{"version":3,"file":"page-Cw2oecH9.js","sources":["../../src/pages/admin-login/page.tsx"],"sourcesContent":["import { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { AdminRole } from '../../types/admin';\nimport { getRolePermissions } from '../../utils/adminPermissions';\nimport { adminAuditLogger } from '../../utils/adminAuditLogger';\nimport { supabase } from '@/utils/supabaseClient';\n\n\n\nexport default function AdminLoginPage() {\n  const navigate = useNavigate();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setLoading(true);\n\n    try {\n      // Simulate authentication delay\n      await new Promise(resolve => setTimeout(resolve, 1000));\n\n      // Find admin user\n      // const adminUser = MOCK_ADMIN_USERS.find(\n      //   user => user.email === email && user.password === password\n      // );\n      console.log('Attempting login with:', { email, password });\n      const { data: adminUser, error: dbError } = await supabase\n        .from('admin')\n        .select('*')\n        .eq('email', email)\n        .eq('password', password)\n        .maybeSingle();\n\n      console.log('Database query result:', { adminUser, dbError });\n      if (dbError || !adminUser) {\n        console.log('Login failed:', dbError);\n        setError('Invalid email or password');\n        setLoading(false);\n        return;\n      }\n\n      // Create session\n      const sessionId = `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n      const session = {\n        sessionId,\n        adminId: `admin_${adminUser.email}`,\n        adminEmail: adminUser.email,\n        adminRole: adminUser.role,\n        loginTime: new Date().toISOString(),\n        ipAddress: 'Client IP (captured server-side)',\n        deviceInfo: navigator.userAgent,\n        expiresAt: new Date(Date.now() + 8 * 60 * 60 * 1000).toISOString(), // 8 hours\n        permissions: getRolePermissions(adminUser.role),\n      };\n\n      // Store session\n      localStorage.setItem('admin_session', JSON.stringify(session));\n\n      // Log the login action\n      adminAuditLogger.log(\n        session.adminId,\n        session.adminEmail,\n        session.adminRole,\n        'ADMIN_LOGIN',\n        'session',\n        sessionId,\n        {\n          loginMethod: 'password',\n          success: true,\n        },\n        sessionId\n      );\n\n      // Redirect to admin dashboard with replace to prevent back navigation\n      navigate('/admin/dashboard', { replace: true });\n    } catch (err) {\n      setError('An error occurred during login');\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4\">\n      {/* Background Pattern */}\n      <div className=\"absolute inset-0 opacity-10\">\n        <div className=\"absolute inset-0\" style={{\n          backgroundImage: 'radial-gradient(circle at 2px 2px, white 1px, transparent 0)',\n          backgroundSize: '40px 40px'\n        }}></div>\n      </div>\n\n      <div className=\"relative w-full max-w-md\">\n        {/* Security Badge */}\n        <div className=\"text-center mb-8\">\n          <div className=\"inline-flex items-center justify-center w-16 h-16 bg-red-500/20 rounded-full mb-4\">\n            <i className=\"ri-shield-keyhole-line text-3xl text-red-400\"></i>\n          </div>\n          <h1 className=\"text-3xl font-bold text-white mb-2\">Admin Access</h1>\n          <p className=\"text-slate-400 text-sm\">Secure Platform Management Portal</p>\n        </div>\n\n        {/* Login Card */}\n        <div className=\"bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-2xl p-8 shadow-2xl\">\n          <form onSubmit={handleLogin} className=\"space-y-6\">\n            {/* Email Field */}\n            <div>\n              <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                Admin Email\n              </label>\n              <div className=\"relative\">\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                  <i className=\"ri-mail-line text-slate-500\"></i>\n                </div>\n                <input\n                  type=\"email\"\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-3 bg-slate-900/50 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all\"\n                  placeholder=\"admin@platform.com\"\n                  required\n                />\n              </div>\n            </div>\n\n            {/* Password Field */}\n            <div>\n              <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                Password\n              </label>\n              <div className=\"relative\">\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                  <i className=\"ri-lock-line text-slate-500\"></i>\n                </div>\n                <input\n                  type={showPassword ? 'text' : 'password'}\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  className=\"w-full pl-10 pr-12 py-3 bg-slate-900/50 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all\"\n                  placeholder=\"Enter your password\"\n                  required\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-500 hover:text-slate-300 transition-colors\"\n                >\n                  <i className={showPassword ? 'ri-eye-off-line' : 'ri-eye-line'}></i>\n                </button>\n              </div>\n            </div>\n\n            {/* Error Message */}\n            {error && (\n              <div className=\"bg-red-500/10 border border-red-500/50 rounded-lg p-3 flex items-start gap-3\">\n                <i className=\"ri-error-warning-line text-red-400 text-lg mt-0.5\"></i>\n                <p className=\"text-sm text-red-300\">{error}</p>\n              </div>\n            )}\n\n            {/* Login Button */}\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"w-full bg-red-500 hover:bg-red-600 text-white font-semibold py-3 rounded-lg transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap\"\n            >\n              {loading ? (\n                <>\n                  <i className=\"ri-loader-4-line animate-spin\"></i>\n                  Authenticating...\n                </>\n              ) : (\n                <>\n                  <i className=\"ri-login-box-line\"></i>\n                  Secure Login\n                </>\n              )}\n            </button>\n          </form>\n\n          {/* Security Notice */}\n          <div className=\"mt-6 pt-6 border-t border-slate-700\">\n            <div className=\"flex items-start gap-3 text-xs text-slate-400\">\n              <i className=\"ri-information-line text-slate-500 mt-0.5\"></i>\n              <p>\n                All admin sessions are logged and monitored. Unauthorized access attempts will be reported.\n              </p>\n            </div>\n          </div>\n        </div>\n\n      </div>\n    </div>\n  );\n}\n"],"names":["AdminLoginPage","navigate","useNavigate","email","setEmail","useState","password","setPassword","showPassword","setShowPassword","error","setError","loading","setLoading","handleLogin","e","resolve","adminUser","dbError","supabase","sessionId","session","getRolePermissions","adminAuditLogger","jsxs","jsx","Fragment"],"mappings":"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"}