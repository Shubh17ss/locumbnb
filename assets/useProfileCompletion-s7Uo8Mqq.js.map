{"version":3,"file":"useProfileCompletion-s7Uo8Mqq.js","sources":["../../src/hooks/useProfileCompletion.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { PhysicianProfile, ProfileCompletionStatus } from '../types/profile';\nimport { supabase } from '../utils/supabaseClient';\n\nexport const useProfileCompletion = () => {\n  const [profile, setProfile] = useState<PhysicianProfile | null>(null);\n  const [completionPercentage, setCompletionPercentage] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n\n  const calculateCompletion = (status: ProfileCompletionStatus): number => {\n    const sections = Object.values(status);\n    const completedSections = sections.filter(Boolean).length;\n    return Math.round((completedSections / sections.length) * 100);\n  };\n\n  const checkProfileComplete = (status: ProfileCompletionStatus): boolean => {\n    return Object.values(status).every(Boolean);\n  };\n\n  const cleanDigits = (v: any) => String(v ?? '').replace(/\\D/g, '');\n  const cleanNpi = (v: any) => cleanDigits(v).slice(0, 10);\n\n  const fetchProfile = async () => {\n    try {\n      setLoading(true);\n      const { data: { user } } = await supabase.auth.getUser();\n\n      if (!user) {\n        setError('No authenticated user');\n        setIsAuthenticated(false);\n        setLoading(false);\n        return;\n      }\n\n      setIsAuthenticated(true);\n\n      const { data, error: fetchError } = await supabase\n        .from('physician_profiles')\n        .select('*')\n        .eq('user_id', user.id)\n        .maybeSingle();\n\n      if (fetchError) {\n        console.error('Error fetching profile:', fetchError);\n        setError(fetchError.message);\n        setLoading(false);\n        return;\n      }\n\n      if (data) {\n        const hasProfessionalInfo =\n          !!data.npi_number ||\n          !!data.dea_number ||\n          !!data.specialty ||\n          !!data.subspecialty ||\n          (data.years_experience !== null && data.years_experience !== undefined && data.years_experience !== '') ||\n          typeof data.board_certified === 'boolean' ||\n          !!data.board_certification_details;\n\n        const profileData: PhysicianProfile = {\n          userId: data.user_id,\n          personalIdentifiers: data.first_name\n            ? {\n                firstName: data.first_name,\n                middleName: data.middle_name,\n                lastName: data.last_name,\n                email: data.email,\n                dateOfBirth: data.date_of_birth,\n                ssnLastFour: data.ssn_last_four,\n                phoneNumber: data.phone_number,\n                address: {\n                  line1: data.address_line1,\n                  line2: data.address_line2,\n                  city: data.city,\n                  state: data.state,\n                  zipCode: data.zip_code,\n                },\n              }\n            : null,\n\n          professionalInformation: hasProfessionalInfo\n            ? {\n                // ✅ ALWAYS treat NPI as string digits for React inputs\n                npiNumber: data.npi_number ? String(data.npi_number) : '',\n                deaNumber: data.dea_number || '',\n                specialty: data.specialty || '',\n                subspecialty: data.subspecialty || '',\n                yearsExperience: data.years_experience ?? '',\n                boardCertified: typeof data.board_certified === 'boolean' ? data.board_certified : null,\n                boardCertificationDetails: data.board_certification_details || '',\n              }\n            : null,\n\n          travelPreferences: data.travel_preferences || null,\n          licenses: data.licenses || [],\n          documents: data.documents || [],\n          questionnaires: data.questionnaires || [],\n          digitalSignature: data.digital_signature\n            ? {\n                signature: data.digital_signature,\n                timestamp: data.signature_timestamp,\n                ipAddress: data.signature_ip,\n                attestationAgreed: data.attestation_agreed,\n              }\n            : null,\n\n          completionStatus: (() => {\n            const rawStatus = data.completion_status || {};\n            return {\n              personalIdentifiers: rawStatus.personalIdentifiers || false,\n              professionalInformation: rawStatus.professionalInformation || false,\n              licensure: rawStatus.licensure || false,\n              documentUploads: rawStatus.documentUploads || false,\n              questionnaires: rawStatus.standardQuestionnaires || rawStatus.questionnaires || false,\n              digitalSignature: rawStatus.digitalAttestation || rawStatus.digitalSignature || false,\n            };\n          })(),\n\n          isComplete: data.is_complete || false,\n          lastUpdated: data.updated_at,\n        };\n\n        setProfile(profileData);\n        setCompletionPercentage(data.completion_percentage || 0);\n      } else {\n        const newProfile: PhysicianProfile = {\n          userId: user.id,\n          personalIdentifiers: null,\n          professionalInformation: null,\n          travelPreferences: null,\n          licenses: [],\n          documents: [],\n          questionnaires: [],\n          digitalSignature: null,\n          completionStatus: {\n            personalIdentifiers: false,\n            professionalInformation: false,\n            licensure: false,\n            documentUploads: false,\n            questionnaires: false,\n            digitalSignature: false,\n          },\n          isComplete: false,\n          lastUpdated: new Date().toISOString(),\n        };\n\n        console.log('Creating new profile in database for user:', user.id);\n        const { error: insertError } = await supabase\n          .from('physician_profiles')\n          .insert({\n            user_id: user.id,\n            completion_status: newProfile.completionStatus,\n            is_complete: false,\n            completion_percentage: 0,\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          });\n\n        if (insertError) {\n          console.error('Error creating profile:', insertError);\n        } else {\n          console.log('New profile created successfully');\n        }\n\n        setProfile(newProfile);\n        setCompletionPercentage(0);\n      }\n\n      setLoading(false);\n    } catch (err) {\n      console.error('Error in fetchProfile:', err);\n      setError('Failed to load profile');\n      setLoading(false);\n    }\n  };\n\n  const updateCompletionStatus = async (\n    section: keyof ProfileCompletionStatus,\n    isComplete: boolean\n  ) => {\n    if (!isAuthenticated) {\n      console.warn('Cannot update completion status: User not authenticated');\n      return;\n    }\n\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        console.error('No user found when updating completion status');\n        return;\n      }\n\n      const currentStatus = profile?.completionStatus || {\n        personalIdentifiers: false,\n        professionalInformation: false,\n        licensure: false,\n        documentUploads: false,\n        questionnaires: false,\n        digitalSignature: false,\n      };\n\n      const newStatus = { ...currentStatus, [section]: isComplete };\n\n      const dbStatus: any = { ...newStatus };\n      if (section === 'questionnaires') dbStatus.standardQuestionnaires = isComplete;\n      if (section === 'digitalSignature') dbStatus.digitalAttestation = isComplete;\n\n      const isProfileComplete = checkProfileComplete(newStatus);\n      const percentage = calculateCompletion(newStatus);\n\n      console.log('Updating completion status:', { section, isComplete, newStatus, isProfileComplete, percentage });\n\n      const { error: updateError } = await supabase\n        .from('physician_profiles')\n        .upsert(\n          {\n            user_id: user.id,\n            completion_status: dbStatus,\n            is_complete: isProfileComplete,\n            completion_percentage: percentage,\n            updated_at: new Date().toISOString(),\n          },\n          { onConflict: 'user_id' }\n        );\n\n      if (updateError) {\n        console.error('Error updating completion status:', updateError);\n        return;\n      }\n\n      console.log('Completion status updated successfully');\n\n      setProfile((prev) =>\n        prev\n          ? {\n              ...prev,\n              completionStatus: newStatus,\n              isComplete: isProfileComplete,\n              lastUpdated: new Date().toISOString(),\n            }\n          : null\n      );\n      setCompletionPercentage(percentage);\n    } catch (err) {\n      console.error('Error in updateCompletionStatus:', err);\n    }\n  };\n\n  const updateProfile = async (updates: Partial<PhysicianProfile>) => {\n    if (!isAuthenticated) {\n      console.warn('Cannot update profile: User not authenticated');\n      return;\n    }\n\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        console.error('No user found when updating profile');\n        return;\n      }\n\n      const dbUpdates: any = {\n        user_id: user.id,\n        updated_at: new Date().toISOString(),\n      };\n\n      if (updates.personalIdentifiers) {\n        const pi: any = updates.personalIdentifiers;\n\n        if (pi.legalFirstName || pi.firstName || pi.first_name) {\n          dbUpdates.first_name = pi.legalFirstName || pi.firstName || pi.first_name;\n        }\n        if (pi.legalMiddleName || pi.middleName || pi.middle_name) {\n          dbUpdates.middle_name = pi.legalMiddleName || pi.middleName || pi.middle_name;\n        }\n        if (pi.legalLastName || pi.lastName || pi.last_name) {\n          dbUpdates.last_name = pi.legalLastName || pi.lastName || pi.last_name;\n        }\n        if (pi.dateOfBirth || pi.date_of_birth) {\n          dbUpdates.date_of_birth = pi.dateOfBirth || pi.date_of_birth;\n        }\n        if (pi.ssnLastFour || pi.ssn_last_four) {\n          dbUpdates.ssn_last_four = pi.ssnLastFour || pi.ssn_last_four;\n        }\n        if (pi.phone || pi.phoneNumber || pi.phone_number) {\n          dbUpdates.phone_number = pi.phone || pi.phoneNumber || pi.phone_number;\n        }\n        if (pi.email) {\n          dbUpdates.email = pi.email;\n        }\n\n        if (pi.address && typeof pi.address === 'object') {\n          if (pi.address.line1 || pi.address.address) {\n            dbUpdates.address_line1 = pi.address.line1 || pi.address.address;\n          }\n          if (pi.address.line2) {\n            dbUpdates.address_line2 = pi.address.line2;\n          }\n          if (pi.address.city) {\n            dbUpdates.city = pi.address.city;\n          }\n          if (pi.address.state) {\n            dbUpdates.state = pi.address.state;\n          }\n          if (pi.address.zipCode || pi.address.zip || pi.address.zip_code) {\n            dbUpdates.zip_code = pi.address.zipCode || pi.address.zip || pi.address.zip_code;\n          }\n        } else {\n          if (pi.address) dbUpdates.address_line1 = pi.address;\n          if (pi.city) dbUpdates.city = pi.city;\n          if (pi.state) dbUpdates.state = pi.state;\n          if (pi.zipCode || pi.zip_code) dbUpdates.zip_code = pi.zipCode || pi.zip_code;\n        }\n      }\n\n      if (updates.professionalInformation) {\n        const pi: any = updates.professionalInformation;\n\n        // ✅ FIX: normalize + save NPI reliably\n        const npi = cleanNpi(pi.npiNumber ?? pi.npi_number);\n        if (npi.length > 0) {\n          dbUpdates.npi_number = npi; // store as string digits\n        }\n\n        const dea = String(pi.deaNumber ?? pi.dea_number ?? '').trim();\n        if (dea) dbUpdates.dea_number = dea;\n\n        const specialty = String(pi.specialty ?? '').trim();\n        if (specialty) dbUpdates.specialty = specialty;\n\n        const subspecialty = String(pi.subspecialty ?? '').trim();\n        if (subspecialty) dbUpdates.subspecialty = subspecialty;\n\n        const years = String(pi.yearsExperience ?? pi.years_experience ?? '').trim();\n        if (years !== '') dbUpdates.years_experience = years;\n\n        if (typeof pi.boardCertified === 'boolean') {\n          dbUpdates.board_certified = pi.boardCertified;\n        } else if (typeof pi.board_certified === 'boolean') {\n          dbUpdates.board_certified = pi.board_certified;\n        }\n\n        const details = String(pi.boardCertificationDetails ?? pi.board_certification_details ?? '').trim();\n        if (details) dbUpdates.board_certification_details = details;\n      }\n\n      if ((updates as any).optionalPreferences) {\n        dbUpdates.travel_preferences = (updates as any).optionalPreferences;\n      }\n\n      if (updates.licenses) dbUpdates.licenses = updates.licenses;\n      if (updates.documents) dbUpdates.documents = updates.documents;\n      if (updates.questionnaires) dbUpdates.questionnaires = updates.questionnaires;\n\n      if (updates.digitalSignature) {\n        dbUpdates.digital_signature = updates.digitalSignature.signature;\n        dbUpdates.signature_timestamp = updates.digitalSignature.timestamp;\n        dbUpdates.signature_ip = updates.digitalSignature.ipAddress;\n        dbUpdates.attestation_agreed = updates.digitalSignature.attestationAgreed;\n      }\n\n      console.log('Saving profile updates:', dbUpdates);\n\n      const { error: updateError } = await supabase\n        .from('physician_profiles')\n        .upsert(dbUpdates, { onConflict: 'user_id' });\n\n      if (updateError) {\n        console.error('Error updating profile:', updateError);\n        return;\n      }\n\n      console.log('Profile updated successfully');\n\n      setProfile((prev) =>\n        prev\n          ? {\n              ...prev,\n              ...updates,\n              lastUpdated: new Date().toISOString(),\n            }\n          : null\n      );\n    } catch (err) {\n      console.error('Error in updateProfile:', err);\n    }\n  };\n\n  useEffect(() => {\n    fetchProfile();\n  }, []);\n\n  return {\n    profile,\n    completionPercentage,\n    updateCompletionStatus,\n    updateProfile,\n    isProfileComplete: profile?.isComplete || false,\n    loading,\n    error,\n    refetch: fetchProfile,\n    isAuthenticated,\n  };\n};"],"names":["useProfileCompletion","profile","setProfile","useState","completionPercentage","setCompletionPercentage","loading","setLoading","error","setError","isAuthenticated","setIsAuthenticated","calculateCompletion","status","sections","completedSections","checkProfileComplete","cleanDigits","v","cleanNpi","fetchProfile","user","supabase","data","fetchError","hasProfessionalInfo","profileData","rawStatus","newProfile","insertError","err","updateCompletionStatus","section","isComplete","newStatus","dbStatus","isProfileComplete","percentage","updateError","prev","updateProfile","updates","dbUpdates","pi","npi","dea","specialty","subspecialty","years","details","useEffect"],"mappings":"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"}