{"version":3,"file":"page-F6Blurij.js","sources":["../../src/pages/facility-login/page.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from '../../utils/supabaseClient';\nimport { validateEmail, validatePhone, formatPhoneForSupabase } from '../../utils/validation';\n\nexport default function FacilityLoginPage() {\n  const navigate = useNavigate();\n  const [loginMethod, setLoginMethod] = useState<'email' | 'phone'>('email');\n  const [authMethod, setAuthMethod] = useState<'password' | 'otp'>('password');\n  const [emailOrPhone, setEmailOrPhone] = useState('');\n  const [password, setPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [otpSent, setOtpSent] = useState(false);\n  const [otp, setOtp] = useState(['', '', '', '', '', '']);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  const supportsPasskey = 'credentials' in navigator && 'PublicKeyCredential' in window;\n  const supportsBiometric = 'credentials' in navigator;\n\n  const handleSendOTP = async () => {\n    setIsLoading(true);\n    setError('');\n\n    // Validate contact\n    if (loginMethod === 'phone') {\n      const phoneValidation = validatePhone(emailOrPhone);\n      if (!phoneValidation.valid) {\n        setError(phoneValidation.error || \"Invalid phone number\");\n        setIsLoading(false);\n        return;\n      }\n    } else {\n      const emailValidation = validateEmail(emailOrPhone);\n      if (!emailValidation.valid) {\n        setError(emailValidation.error || \"Invalid email\");\n        setIsLoading(false);\n        return;\n      }\n    }\n\n    try {\n      if (loginMethod === 'phone') {\n        const formattedPhone = formatPhoneForSupabase(emailOrPhone);\n        const { error: otpError } = await supabase.auth.signInWithOtp({\n          phone: formattedPhone,\n        });\n        if (otpError) throw otpError;\n      } else {\n        const { error: otpError } = await supabase.auth.signInWithOtp({\n          email: emailOrPhone,\n        });\n        if (otpError) throw otpError;\n      }\n\n      setOtpSent(true);\n    } catch (err: any) {\n      setError(err.message || 'Failed to send verification code');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleOTPChange = (index: number, value: string) => {\n    if (value.length > 1) return;\n    \n    const newOtp = [...otp];\n    newOtp[index] = value;\n    setOtp(newOtp);\n\n    // Auto-focus next input\n    if (value && index < 5) {\n      const nextInput = document.getElementById(`otp-${index + 1}`);\n      nextInput?.focus();\n    }\n  };\n\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError('');\n\n    try {\n      let authData;\n\n      if (authMethod === 'otp') {\n        const otpCode = otp.join('');\n        \n        if (loginMethod === 'phone') {\n          const formattedPhone = formatPhoneForSupabase(emailOrPhone);\n          const { data, error: verifyError } = await supabase.auth.verifyOtp({\n            phone: formattedPhone,\n            token: otpCode,\n            type: 'sms'\n          });\n          if (verifyError) throw verifyError;\n          authData = data;\n        } else {\n          const { data, error: verifyError } = await supabase.auth.verifyOtp({\n            email: emailOrPhone,\n            token: otpCode,\n            type: 'email'\n          });\n          if (verifyError) throw verifyError;\n          authData = data;\n        }\n      } else {\n        // Password login\n        if (loginMethod === 'phone') {\n          const formattedPhone = formatPhoneForSupabase(emailOrPhone);\n          const { data, error: loginError } = await supabase.auth.signInWithPassword({\n            phone: formattedPhone,\n            password: password,\n          });\n          if (loginError) throw loginError;\n          authData = data;\n        } else {\n          const { data, error: loginError } = await supabase.auth.signInWithPassword({\n            email: emailOrPhone,\n            password: password,\n          });\n          if (loginError) throw loginError;\n          authData = data;\n        }\n      }\n\n      // Verify user role is facility\n      const userRole = authData.user?.user_metadata?.role?.toLowerCase();\n      \n      if (userRole !== 'facility') {\n        setError('This login is for facilities only. Please use the correct login page for your account type.');\n        await supabase.auth.signOut();\n        setIsLoading(false);\n        return;\n      }\n\n      // Navigate to facility dashboard\n      navigate('/facility-dashboard', { replace: true });\n    } catch (err: any) {\n      setError(err.message || 'Login failed. Please check your credentials.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handlePasskeyLogin = async () => {\n    setIsLoading(true);\n    setError('');\n    \n    try {\n      // Simulate passkey authentication\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      // After passkey auth, verify role\n      const { data } = await supabase.auth.getUser();\n      const userRole = data.user?.user_metadata?.role?.toLowerCase();\n      \n      if (userRole !== 'facility') {\n        setError('This login is for facilities only.');\n        await supabase.auth.signOut();\n        setIsLoading(false);\n        return;\n      }\n      \n      navigate('/facility-dashboard', { replace: true });\n    } catch (err) {\n      setError('Passkey authentication failed');\n      setIsLoading(false);\n    }\n  };\n\n  const handleBiometricLogin = async () => {\n    setIsLoading(true);\n    setError('');\n    \n    try {\n      // Simulate biometric authentication\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      // After biometric auth, verify role\n      const { data } = await supabase.auth.getUser();\n      const userRole = data.user?.user_metadata?.role?.toLowerCase();\n      \n      if (userRole !== 'facility') {\n        setError('This login is for facilities only.');\n        await supabase.auth.signOut();\n        setIsLoading(false);\n        return;\n      }\n      \n      navigate('/facility-dashboard', { replace: true });\n    } catch (err) {\n      setError('Biometric authentication failed');\n      setIsLoading(false);\n    }\n  };\n\n  if (otpSent && authMethod === 'otp') {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center px-4 py-12\">\n        <div className=\"max-w-md w-full\">\n          <div className=\"bg-white rounded-lg border border-gray-200 p-8\">\n            <div className=\"text-center mb-6\">\n              <div className=\"w-16 h-16 bg-teal-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <i className=\"ri-mail-send-line text-teal-600 text-2xl\"></i>\n              </div>\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Enter verification code</h2>\n              <p className=\"text-sm text-gray-600\">\n                We sent a 6-digit code to {emailOrPhone}\n              </p>\n            </div>\n\n            <form onSubmit={handleLogin}>\n              <div className=\"flex justify-center space-x-3 mb-6\">\n                {otp.map((digit, index) => (\n                  <input\n                    key={index}\n                    id={`otp-${index}`}\n                    type=\"text\"\n                    maxLength={1}\n                    value={digit}\n                    onChange={(e) => handleOTPChange(index, e.target.value)}\n                    className=\"w-12 h-12 text-center text-xl font-semibold border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500\"\n                  />\n                ))}\n              </div>\n\n              {error && (\n                <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg\">\n                  <p className=\"text-sm text-red-600\">\n                    <i className=\"ri-error-warning-line mr-1\"></i>\n                    {error}\n                  </p>\n                </div>\n              )}\n\n              <button\n                type=\"submit\"\n                disabled={isLoading || otp.some(d => !d)}\n                className=\"w-full px-6 py-3 bg-teal-600 text-white text-sm font-medium rounded-lg hover:bg-teal-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed whitespace-nowrap\"\n              >\n                {isLoading ? (\n                  <>\n                    <i className=\"ri-loader-4-line animate-spin mr-2\"></i>\n                    Verifying...\n                  </>\n                ) : (\n                  'Verify & Log In'\n                )}\n              </button>\n\n              <button\n                type=\"button\"\n                onClick={() => setOtpSent(false)}\n                className=\"w-full mt-3 text-sm text-gray-600 hover:text-gray-900 whitespace-nowrap\"\n              >\n                Use a different method\n              </button>\n            </form>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex items-center justify-center px-4 py-12\">\n      <div className=\"max-w-md w-full\">\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Facility Login</h1>\n          <p className=\"text-sm text-gray-600\">Access your facility dashboard</p>\n        </div>\n\n        <div className=\"bg-white rounded-lg border border-gray-200 p-8\">\n          {/* Login Method Toggle */}\n          <div className=\"flex bg-gray-100 rounded-lg p-1 mb-6\">\n            <button\n              type=\"button\"\n              onClick={() => setLoginMethod('email')}\n              className={`flex-1 px-4 py-2 text-sm font-medium rounded-md transition-colors whitespace-nowrap ${\n                loginMethod === 'email'\n                  ? 'bg-white text-gray-900 shadow-sm'\n                  : 'text-gray-600 hover:text-gray-900'\n              }`}\n            >\n              <i className=\"ri-mail-line mr-2\"></i>\n              Email\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => setLoginMethod('phone')}\n              className={`flex-1 px-4 py-2 text-sm font-medium rounded-md transition-colors whitespace-nowrap ${\n                loginMethod === 'phone'\n                  ? 'bg-white text-gray-900 shadow-sm'\n                  : 'text-gray-600 hover:text-gray-900'\n              }`}\n            >\n              <i className=\"ri-phone-line mr-2\"></i>\n              Phone\n            </button>\n          </div>\n\n          <form onSubmit={handleLogin} className=\"space-y-4\">\n            {/* Email or Phone Input */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                {loginMethod === 'email' ? 'Email address' : 'Phone number'}\n              </label>\n              <input\n                type={loginMethod === 'email' ? 'email' : 'tel'}\n                value={emailOrPhone}\n                onChange={(e) => {\n                  setEmailOrPhone(e.target.value);\n                  setError('');\n                }}\n                placeholder={loginMethod === 'email' ? 'you@facility.com' : '(555) 123-4567'}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-teal-500\"\n                required\n              />\n            </div>\n\n            {/* Auth Method Toggle */}\n            <div className=\"flex bg-gray-100 rounded-lg p-1\">\n              <button\n                type=\"button\"\n                onClick={() => setAuthMethod('password')}\n                className={`flex-1 px-3 py-2 text-xs font-medium rounded-md transition-colors whitespace-nowrap ${\n                  authMethod === 'password'\n                    ? 'bg-white text-gray-900 shadow-sm'\n                    : 'text-gray-600 hover:text-gray-900'\n                }`}\n              >\n                Password\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => setAuthMethod('otp')}\n                className={`flex-1 px-3 py-2 text-xs font-medium rounded-md transition-colors whitespace-nowrap ${\n                  authMethod === 'otp'\n                    ? 'bg-white text-gray-900 shadow-sm'\n                    : 'text-gray-600 hover:text-gray-900'\n                }`}\n              >\n                One-time code\n              </button>\n            </div>\n\n            {/* Password or OTP */}\n            {authMethod === 'password' ? (\n              <>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Password\n                  </label>\n                  <div className=\"relative\">\n                    <input\n                      type={showPassword ? 'text' : 'password'}\n                      value={password}\n                      onChange={(e) => {\n                        setPassword(e.target.value);\n                        setError('');\n                      }}\n                      placeholder=\"Enter your password\"\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-teal-500\"\n                      required\n                    />\n                    <button\n                      type=\"button\"\n                      onClick={() => setShowPassword(!showPassword)}\n                      className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700\"\n                    >\n                      <i className={showPassword ? 'ri-eye-off-line' : 'ri-eye-line'}></i>\n                    </button>\n                  </div>\n                </div>\n\n                <div className=\"flex items-center justify-between text-sm\">\n                  <a href=\"/forgot-password\" className=\"text-teal-600 hover:text-teal-700 whitespace-nowrap\">\n                    Forgot password?\n                  </a>\n                </div>\n              </>\n            ) : (\n              <button\n                type=\"button\"\n                onClick={handleSendOTP}\n                disabled={isLoading || !emailOrPhone}\n                className=\"w-full px-6 py-3 bg-teal-600 text-white text-sm font-medium rounded-lg hover:bg-teal-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed whitespace-nowrap\"\n              >\n                {isLoading ? (\n                  <>\n                    <i className=\"ri-loader-4-line animate-spin mr-2\"></i>\n                    Sending code...\n                  </>\n                ) : (\n                  'Send verification code'\n                )}\n              </button>\n            )}\n\n            {error && (\n              <div className=\"p-3 bg-red-50 border border-red-200 rounded-lg\">\n                <p className=\"text-sm text-red-600\">\n                  <i className=\"ri-error-warning-line mr-1\"></i>\n                  {error}\n                </p>\n              </div>\n            )}\n\n            {authMethod === 'password' && (\n              <button\n                type=\"submit\"\n                disabled={isLoading || !emailOrPhone || !password}\n                className=\"w-full px-6 py-3 bg-teal-600 text-white text-sm font-medium rounded-lg hover:bg-teal-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed whitespace-nowrap\"\n              >\n                {isLoading ? (\n                  <>\n                    <i className=\"ri-loader-4-line animate-spin mr-2\"></i>\n                    Logging in...\n                  </>\n                ) : (\n                  'Log In'\n                )}\n              </button>\n            )}\n          </form>\n\n          {/* Alternative Login Methods */}\n          {(supportsPasskey || supportsBiometric) && (\n            <>\n              <div className=\"relative my-6\">\n                <div className=\"absolute inset-0 flex items-center\">\n                  <div className=\"w-full border-t border-gray-200\"></div>\n                </div>\n                <div className=\"relative flex justify-center text-xs\">\n                  <span className=\"px-2 bg-white text-gray-500\">Or continue with</span>\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                {supportsPasskey && (\n                  <button\n                    type=\"button\"\n                    onClick={handlePasskeyLogin}\n                    className=\"w-full px-4 py-3 bg-white border border-gray-300 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-50 transition-colors whitespace-nowrap\"\n                  >\n                    <i className=\"ri-key-2-line mr-2\"></i>\n                    Sign in with Passkey\n                  </button>\n                )}\n\n                {supportsBiometric && (\n                  <button\n                    type=\"button\"\n                    onClick={handleBiometricLogin}\n                    className=\"w-full px-4 py-3 bg-white border border-gray-300 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-50 transition-colors whitespace-nowrap\"\n                  >\n                    <i className=\"ri-fingerprint-line mr-2\"></i>\n                    Sign in with Biometrics\n                  </button>\n                )}\n              </div>\n            </>\n          )}\n\n          {/* Security Note */}\n          <div className=\"mt-6 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\n            <p className=\"text-xs text-blue-800\">\n              <i className=\"ri-shield-check-line mr-1\"></i>\n              Enable 2FA in your account security settings for additional protection.\n            </p>\n          </div>\n\n          {/* Sign Up Link */}\n          <div className=\"mt-6 text-center\">\n            <p className=\"text-sm text-gray-600\">\n              Don't have an account?{' '}\n              <a href=\"/signup?role=facility\" className=\"text-teal-600 hover:text-teal-700 font-medium whitespace-nowrap\">\n                Create facility account\n              </a>\n            </p>\n          </div>\n        </div>\n\n        {/* Disclaimer */}\n        <div className=\"mt-6 text-center\">\n          <p className=\"text-xs text-gray-500\">\n            Technology marketplace only. Not an employer or staffing agency.\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["FacilityLoginPage","navigate","useNavigate","loginMethod","setLoginMethod","useState","authMethod","setAuthMethod","emailOrPhone","setEmailOrPhone","password","setPassword","showPassword","setShowPassword","otpSent","setOtpSent","otp","setOtp","isLoading","setIsLoading","error","setError","supportsPasskey","supportsBiometric","handleSendOTP","phoneValidation","validatePhone","emailValidation","validateEmail","formattedPhone","formatPhoneForSupabase","otpError","supabase","err","handleOTPChange","index","value","newOtp","handleLogin","e","authData","otpCode","data","verifyError","loginError","handlePasskeyLogin","resolve","handleBiometricLogin","jsx","jsxs","digit","d","Fragment"],"mappings":"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"}