import{r as c,s as x,j as e}from"./index-Cg48h7fn.js";const b=({isOpen:l,onClose:n})=>{const[r,a]=c.useState([]),[o,i]=c.useState(!0);c.useEffect(()=>{l&&m()},[l]);const m=async()=>{try{const{data:t}=await x.auth.getUser();if(!t.user){i(!1);return}a([]),i(!1)}catch(t){console.error("Error fetching notifications:",t),i(!1)}},d=r.filter(t=>!t.read).length,u=async t=>{try{a(r.map(s=>s.id===t?{...s,read:!0}:s))}catch(s){console.error("Error marking notification as read:",s)}},h=async()=>{try{const{data:t}=await x.auth.getUser();if(!t.user)return;a(r.map(s=>({...s,read:!0})))}catch(t){console.error("Error marking all as read:",t)}},g=async t=>{try{a(r.filter(s=>s.id!==t))}catch(s){console.error("Error deleting notification:",s)}},f=t=>{switch(t){case"success":return"ri-checkbox-circle-line";case"warning":return"ri-alert-line";case"error":return"ri-error-warning-line";default:return"ri-information-line"}},j=t=>{switch(t){case"success":return"text-green-600 bg-green-100";case"warning":return"text-amber-600 bg-amber-100";case"error":return"text-red-600 bg-red-100";default:return"text-blue-600 bg-blue-100"}};return l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/20 z-40",onClick:n}),e.jsxs("div",{className:"fixed top-16 right-4 w-96 max-h-[600px] bg-white rounded-xl shadow-2xl border border-gray-200 z-50 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),e.jsx("button",{onClick:n,className:"w-8 h-8 flex items-center justify-center text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),d>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[d," unread"]}),e.jsx("button",{onClick:h,className:"text-sm text-teal-600 hover:text-teal-700 font-medium",children:"Mark all as read"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:o?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("i",{className:"ri-loader-4-line text-4xl text-teal-600 animate-spin"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading notifications..."})]}):r.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("i",{className:"ri-notification-off-line text-2xl text-gray-400"})}),e.jsx("p",{className:"text-gray-900 font-medium mb-1",children:"No notifications"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"You're all caught up!"})]}):e.jsx("div",{className:"divide-y divide-gray-100",children:r.map(t=>e.jsx("div",{className:`p-4 hover:bg-gray-50 transition-colors ${t.read?"":"bg-teal-50/30"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 ${j(t.type)}`,children:e.jsx("i",{className:`${f(t.type)} text-lg`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:t.title}),!t.read&&e.jsx("div",{className:"w-2 h-2 bg-teal-600 rounded-full flex-shrink-0 mt-1"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:t.message}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:t.time}),e.jsxs("div",{className:"flex items-center gap-2",children:[!t.read&&e.jsx("button",{onClick:()=>u(t.id),className:"text-xs text-teal-600 hover:text-teal-700 font-medium",children:"Mark as read"}),e.jsx("button",{onClick:()=>g(t.id),className:"text-xs text-red-600 hover:text-red-700 font-medium",children:"Delete"})]})]})]})]})},t.id))})})]})]}):null};export{b as N};
//# sourceMappingURL=NotificationPanel-zIli_TJs.js.map
