{"version":3,"file":"page-2QRTjG4p.js","sources":["../../src/components/feature/ProfileStatusBar.tsx","../../src/pages/physician-dashboard/components/PendingApplications.tsx","../../src/pages/physician-dashboard/components/InvitedAssignments.tsx","../../src/pages/physician-dashboard/components/UpcomingAssignments.tsx","../../src/pages/physician-dashboard/components/CompletedAssignments.tsx","../../src/pages/physician-dashboard/components/FacilityRequests.tsx","../../src/pages/physician-dashboard/components/InsuranceQuestions.tsx","../../src/utils/vendorManager.ts","../../src/pages/physician-dashboard/components/ThirdPartyServices.tsx","../../src/pages/physician-dashboard/components/JobBrowse.tsx","../../src/pages/physician-dashboard/components/PhysicianCalendar.tsx","../../src/pages/physician-dashboard/components/AssignmentTabs.tsx","../../src/utils/disputeManager.ts","../../src/components/feature/DisputeInitiationModal.tsx","../../src/utils/reviewManager.ts","../../src/components/feature/ReviewSubmissionModal.tsx","../../src/components/feature/ReviewRequestNotification.tsx","../../src/pages/physician-dashboard/page.tsx"],"sourcesContent":["import React from 'react';\n\ninterface ProfileStatusBarProps {\n  isComplete: boolean;\n  completionPercentage: number;\n  onCompleteProfile: () => void;\n}\n\nexport const ProfileStatusBar: React.FC<ProfileStatusBarProps> = ({\n  isComplete,\n  completionPercentage,\n  onCompleteProfile,\n}) => {\n  return (\n    <div\n      className={`rounded-lg p-4 mb-6 border-2 ${\n        isComplete\n          ? 'bg-green-50 border-green-500'\n          : 'bg-red-50 border-red-500'\n      }`}\n    >\n      <div className=\"flex items-start justify-between gap-4\">\n        <div className=\"flex items-start gap-3 flex-1\">\n          <div className=\"flex-shrink-0 mt-1\">\n            {isComplete ? (\n              <div className=\"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center\">\n                <i className=\"ri-check-line text-white text-sm\"></i>\n              </div>\n            ) : (\n              <div className=\"w-6 h-6 bg-red-500 rounded-full flex items-center justify-center\">\n                <i className=\"ri-error-warning-line text-white text-sm\"></i>\n              </div>\n            )}\n          </div>\n\n          <div className=\"flex-1\">\n            <div className=\"flex items-center gap-2 mb-2\">\n              <h3\n                className={`text-base font-semibold ${\n                  isComplete ? 'text-green-800' : 'text-red-800'\n                }`}\n              >\n                {isComplete ? 'Profile Complete' : 'Profile Incomplete'}\n              </h3>\n              <span\n                className={`text-sm font-medium ${\n                  isComplete ? 'text-green-700' : 'text-red-700'\n                }`}\n              >\n                {completionPercentage}%\n              </span>\n            </div>\n\n            <p\n              className={`text-sm mb-3 ${\n                isComplete ? 'text-green-700' : 'text-red-700'\n              }`}\n            >\n              {isComplete\n                ? 'Your profile is complete. You can now apply to assignments.'\n                : 'Complete all required sections to apply to assignments. You can browse assignments while your profile is incomplete.'}\n            </p>\n\n            {!isComplete && (\n              <div className=\"w-full bg-red-200 rounded-full h-2 mb-2\">\n                <div\n                  className=\"bg-red-600 h-2 rounded-full transition-all duration-500\"\n                  style={{ width: `${completionPercentage}%` }}\n                ></div>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {!isComplete && (\n          <button\n            onClick={onCompleteProfile}\n            className=\"flex-shrink-0 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap\"\n          >\n            Complete Profile\n          </button>\n        )}\n      </div>\n    </div>\n  );\n};\n","import { useState, useEffect } from 'react';\nimport type { Application } from '../../../types/application';\nimport { supabase } from '../../../utils/supabaseClient';\n\nexport default function PendingApplications() {\n  const [applications, setApplications] = useState<Application[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedApplication, setSelectedApplication] = useState<Application | null>(null);\n  const [showDetailsModal, setShowDetailsModal] = useState(false);\n\n  useEffect(() => {\n    fetchApplications();\n  }, []);\n\n  const fetchApplications = async () => {\n    try {\n      const { data: user } = await supabase.auth.getUser();\n      if (!user.user) {\n        setLoading(false);\n        return;\n      }\n\n      // Get physician profile\n      const { data: profile } = await supabase\n        .from('physician_profiles')\n        .select('id')\n        .eq('user_id', user.user.id)\n        .maybeSingle();\n\n      if (!profile) {\n        setLoading(false);\n        return;\n      }\n\n      // TODO: Fetch applications from your database when table is created\n      // const { data, error } = await supabase\n      //   .from('applications')\n      //   .select('*')\n      //   .eq('physician_id', profile.id)\n      //   .order('applied_at', { ascending: false });\n\n      setApplications([]);\n      setLoading(false);\n    } catch (error) {\n      console.error('Error fetching applications:', error);\n      setLoading(false);\n    }\n  };\n\n  const pendingApps = applications.filter(app => app.status === 'pending');\n  const expiredApps = applications.filter(app => app.status === 'expired');\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric'\n    });\n  };\n\n  const formatDateTime = (dateString: string) => {\n    return new Date(dateString).toLocaleString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric',\n      hour: 'numeric',\n      minute: '2-digit'\n    });\n  };\n\n  const getTimeRemaining = (deadline: string) => {\n    const now = new Date();\n    const deadlineDate = new Date(deadline);\n    const diff = deadlineDate.getTime() - now.getTime();\n\n    if (diff <= 0) return 'Expired';\n\n    const hours = Math.floor(diff / (1000 * 60 * 60));\n    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));\n\n    if (hours < 24) {\n      return `${hours}h ${minutes}m remaining`;\n    }\n\n    const days = Math.floor(hours / 24);\n    return `${days} day${days > 1 ? 's' : ''} remaining`;\n  };\n\n  const isApplicationExpired = (deadline: string) => {\n    return new Date(deadline) < new Date();\n  };\n\n  const handleWithdraw = (applicationId: string) => {\n    if (confirm('Are you sure you want to withdraw this application? Your calendar dates will be unblocked.')) {\n      setApplications(applications.map(app => \n        app.id === applicationId \n          ? { ...app, status: 'withdrawn' as const, calendarBlocked: false }\n          : app\n      ));\n    }\n  };\n\n  const handleViewDetails = (app: Application) => {\n    setSelectedApplication(app);\n    setShowDetailsModal(true);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12\">\n        <i className=\"ri-loader-4-line text-4xl text-teal-600 animate-spin\"></i>\n        <p className=\"mt-4 text-gray-600\">Loading applications...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Pending Applications */}\n      <div>\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">\n          Pending Review ({pendingApps.length})\n        </h3>\n\n        {pendingApps.length === 0 ? (\n          <div className=\"bg-white rounded-lg border border-gray-200 p-8 text-center\">\n            <i className=\"ri-file-list-3-line text-4xl text-gray-300 mb-3\"></i>\n            <p className=\"text-gray-600\">No pending applications</p>\n            <p className=\"text-sm text-gray-500 mt-1\">Applications you submit will appear here</p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {pendingApps.map(app => (\n              <div key={app.id} className=\"bg-white rounded-lg border border-gray-200 p-6\">\n                <div className=\"flex items-start justify-between mb-4\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-3 mb-2\">\n                      <h4 className=\"text-lg font-semibold text-gray-900\">\n                        {app.profileSnapshot.professionalInfo.specialty}\n                      </h4>\n                      <span className=\"px-3 py-1 bg-amber-100 text-amber-700 text-xs font-medium rounded-full whitespace-nowrap\">\n                        Under Review\n                      </span>\n                    </div>\n                    <div className=\"flex items-center gap-4 text-sm text-gray-600\">\n                      <div className=\"flex items-center gap-1\">\n                        <i className=\"ri-calendar-line\"></i>\n                        <span>\n                          {formatDate(app.blockedDates.startDate)} - {formatDate(app.blockedDates.endDate)}\n                        </span>\n                      </div>\n                      <div className=\"flex items-center gap-1\">\n                        <i className=\"ri-time-line\"></i>\n                        <span>Applied {formatDateTime(app.appliedAt)}</span>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"text-right\">\n                    <div className={`text-sm font-medium mb-1 ${\n                      isApplicationExpired(app.reviewDeadline) ? 'text-red-600' : 'text-teal-600'\n                    }`}>\n                      {getTimeRemaining(app.reviewDeadline)}\n                    </div>\n                    <div className=\"text-xs text-gray-500\">\n                      Deadline: {formatDateTime(app.reviewDeadline)}\n                    </div>\n                  </div>\n                </div>\n\n                {/* Calendar Block Notice */}\n                {app.calendarBlocked && (\n                  <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4\">\n                    <div className=\"flex items-center gap-2 text-sm text-blue-900\">\n                      <i className=\"ri-lock-line\"></i>\n                      <span>\n                        <strong>Calendar Blocked:</strong> These dates are temporarily blocked while the facility reviews your application.\n                      </span>\n                    </div>\n                  </div>\n                )}\n\n                <div className=\"flex items-center justify-between pt-4 border-t border-gray-200\">\n                  <button\n                    onClick={() => handleViewDetails(app)}\n                    className=\"text-sm text-teal-600 hover:text-teal-700 font-medium whitespace-nowrap\"\n                  >\n                    View Details\n                  </button>\n                  <button\n                    onClick={() => handleWithdraw(app.id)}\n                    className=\"px-4 py-2 border border-red-300 text-red-600 rounded-lg text-sm font-medium hover:bg-red-50 transition-colors whitespace-nowrap\"\n                  >\n                    Withdraw Application\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Expired Applications */}\n      {expiredApps.length > 0 && (\n        <div>\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">\n            Expired ({expiredApps.length})\n          </h3>\n          <div className=\"space-y-4\">\n            {expiredApps.map(app => (\n              <div key={app.id} className=\"bg-gray-50 rounded-lg border border-gray-200 p-6 opacity-75\">\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-3 mb-2\">\n                      <h4 className=\"text-lg font-semibold text-gray-700\">\n                        {app.profileSnapshot.professionalInfo.specialty}\n                      </h4>\n                      <span className=\"px-3 py-1 bg-gray-200 text-gray-600 text-xs font-medium rounded-full whitespace-nowrap\">\n                        Expired\n                      </span>\n                    </div>\n                    <div className=\"flex items-center gap-4 text-sm text-gray-500\">\n                      <div className=\"flex items-center gap-1\">\n                        <i className=\"ri-calendar-line\"></i>\n                        <span>\n                          {formatDate(app.blockedDates.startDate)} - {formatDate(app.blockedDates.endDate)}\n                        </span>\n                      </div>\n                      <div className=\"flex items-center gap-1\">\n                        <i className=\"ri-time-line\"></i>\n                        <span>Applied {formatDateTime(app.appliedAt)}</span>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"text-right\">\n                    <div className=\"text-sm font-medium text-red-600 mb-1\">\n                      No Response\n                    </div>\n                    <div className=\"text-xs text-gray-500\">\n                      Expired {formatDateTime(app.reviewDeadline)}\n                    </div>\n                  </div>\n                </div>\n                <div className=\"mt-4 bg-white border border-gray-200 rounded-lg p-3\">\n                  <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                    <i className=\"ri-unlock-line\"></i>\n                    <span>Calendar dates have been automatically unblocked</span>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Application Details Modal */}\n      {showDetailsModal && selectedApplication && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6 border-b border-gray-200\">\n              <div className=\"flex items-center justify-between\">\n                <h2 className=\"text-xl font-bold text-gray-900\">Application Details</h2>\n                <button\n                  onClick={() => {\n                    setShowDetailsModal(false);\n                    setSelectedApplication(null);\n                  }}\n                  className=\"w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600 transition-colors\"\n                >\n                  <i className=\"ri-close-line text-xl\"></i>\n                </button>\n              </div>\n            </div>\n\n            <div className=\"p-6 space-y-6\">\n              {/* Status */}\n              <div>\n                <h3 className=\"font-semibold text-gray-900 mb-3\">Status</h3>\n                <div className=\"bg-gray-50 rounded-lg p-4\">\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <span className=\"text-sm text-gray-600\">Current Status:</span>\n                    <span className=\"px-3 py-1 bg-amber-100 text-amber-700 text-xs font-medium rounded-full\">\n                      {selectedApplication.status.replace('_', ' ').toUpperCase()}\n                    </span>\n                  </div>\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <span className=\"text-sm text-gray-600\">Applied:</span>\n                    <span className=\"text-sm font-medium text-gray-900\">\n                      {formatDateTime(selectedApplication.appliedAt)}\n                    </span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-gray-600\">Review Deadline:</span>\n                    <span className=\"text-sm font-medium text-gray-900\">\n                      {formatDateTime(selectedApplication.reviewDeadline)}\n                    </span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Assignment Dates */}\n              <div>\n                <h3 className=\"font-semibold text-gray-900 mb-3\">Assignment Dates</h3>\n                <div className=\"bg-gray-50 rounded-lg p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-gray-600\">Dates:</span>\n                    <span className=\"text-sm font-medium text-gray-900\">\n                      {formatDate(selectedApplication.blockedDates.startDate)} - {formatDate(selectedApplication.blockedDates.endDate)}\n                    </span>\n                  </div>\n                  {selectedApplication.calendarBlocked && (\n                    <div className=\"mt-3 pt-3 border-t border-gray-200\">\n                      <div className=\"flex items-center gap-2 text-sm text-blue-900\">\n                        <i className=\"ri-lock-line\"></i>\n                        <span>Calendar blocked for these dates</span>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Profile Snapshot */}\n              <div>\n                <h3 className=\"font-semibold text-gray-900 mb-3\">Submitted Profile</h3>\n                <div className=\"bg-gray-50 rounded-lg p-4 space-y-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-gray-600\">Name:</span>\n                    <span className=\"text-sm font-medium text-gray-900\">\n                      {selectedApplication.profileSnapshot.personalInfo.legalName}\n                    </span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-gray-600\">Specialty:</span>\n                    <span className=\"text-sm font-medium text-gray-900\">\n                      {selectedApplication.profileSnapshot.professionalInfo.specialty}\n                    </span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-gray-600\">Experience:</span>\n                    <span className=\"text-sm font-medium text-gray-900\">\n                      {selectedApplication.profileSnapshot.professionalInfo.yearsExperience} years\n                    </span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-gray-600\">Licenses:</span>\n                    <span className=\"text-sm font-medium text-gray-900\">\n                      {selectedApplication.profileSnapshot.licensure.map(l => l.state).join(', ')}\n                    </span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-gray-600\">Verification:</span>\n                    <span className={`text-sm font-medium ${\n                      selectedApplication.profileSnapshot.verificationStatus === 'verified' \n                        ? 'text-green-600' \n                        : 'text-amber-600'\n                    }`}>\n                      {selectedApplication.profileSnapshot.verificationStatus === 'verified' ? '✓ Verified' : 'Pending'}\n                    </span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Notifications */}\n              <div>\n                <h3 className=\"font-semibold text-gray-900 mb-3\">Notifications</h3>\n                <div className=\"bg-gray-50 rounded-lg p-4 space-y-2\">\n                  <div className=\"flex items-center justify-between text-sm\">\n                    <span className=\"text-gray-600\">Application Received:</span>\n                    <span className={selectedApplication.notificationsSent.applicationReceived ? 'text-green-600' : 'text-gray-400'}>\n                      {selectedApplication.notificationsSent.applicationReceived ? '✓ Sent' : 'Pending'}\n                    </span>\n                  </div>\n                  <div className=\"flex items-center justify-between text-sm\">\n                    <span className=\"text-gray-600\">Facility Notified:</span>\n                    <span className=\"text-green-600\">✓ Sent</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"p-6 border-t border-gray-200\">\n              <button\n                onClick={() => {\n                  setShowDetailsModal(false);\n                  setSelectedApplication(null);\n                }}\n                className=\"w-full px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors whitespace-nowrap\"\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport { supabase } from '../../../utils/supabaseClient';\n\ninterface InvitedAssignment {\n  id: string;\n  facilityName: string;\n  location: string;\n  position: string;\n  dateRange: string;\n  pay: string;\n  status: 'invited' | 'accepted_pending_signature' | 'fully_executed';\n  invitedDate: string;\n  documentsRequired: string[];\n  documentsSigned: string[];\n}\n\nexport function InvitedAssignments() {\n  const [assignments, setAssignments] = useState<InvitedAssignment[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showSigningModal, setShowSigningModal] = useState(false);\n  const [selectedAssignment, setSelectedAssignment] = useState<InvitedAssignment | null>(null);\n\n  useEffect(() => {\n    fetchInvitedAssignments();\n  }, []);\n\n  const fetchInvitedAssignments = async () => {\n    try {\n      const { data: user } = await supabase.auth.getUser();\n      if (!user.user) {\n        setLoading(false);\n        return;\n      }\n\n      // Get physician profile\n      const { data: profile } = await supabase\n        .from('physician_profiles')\n        .select('id')\n        .eq('user_id', user.user.id)\n        .maybeSingle();\n\n      if (!profile) {\n        setLoading(false);\n        return;\n      }\n\n      // TODO: Fetch invited assignments from your database\n      // This is where you'll query your assignments table for invitations\n      // const { data, error } = await supabase\n      //   .from('assignments')\n      //   .select('*')\n      //   .eq('physician_id', profile.id)\n      //   .in('status', ['invited', 'accepted_pending_signature'])\n      //   .order('invited_date', { ascending: false });\n\n      // For now, set empty array until you have real data\n      setAssignments([]);\n      setLoading(false);\n    } catch (error) {\n      console.error('Error fetching invited assignments:', error);\n      setLoading(false);\n    }\n  };\n\n  const handleReviewDocuments = (assignment: InvitedAssignment) => {\n    setSelectedAssignment(assignment);\n    setShowSigningModal(true);\n  };\n\n  const handleAcceptInvitation = async (id: string) => {\n    try {\n      // TODO: Update assignment status in database\n      // await supabase\n      //   .from('assignments')\n      //   .update({ status: 'accepted_pending_signature' })\n      //   .eq('id', id);\n\n      setAssignments((prev) =>\n        prev.map((assignment) =>\n          assignment.id === id\n            ? { ...assignment, status: 'accepted_pending_signature' as const }\n            : assignment\n        )\n      );\n    } catch (error) {\n      console.error('Error accepting invitation:', error);\n      alert('Failed to accept invitation. Please try again.');\n    }\n  };\n\n  const handleDeclineInvitation = async (id: string) => {\n    if (!confirm('Are you sure you want to decline this invitation?')) {\n      return;\n    }\n\n    try {\n      // TODO: Update assignment status in database\n      // await supabase\n      //   .from('assignments')\n      //   .update({ status: 'declined' })\n      //   .eq('id', id);\n\n      setAssignments((prev) => prev.filter((assignment) => assignment.id !== id));\n    } catch (error) {\n      console.error('Error declining invitation:', error);\n      alert('Failed to decline invitation. Please try again.');\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12\">\n        <i className=\"ri-loader-4-line text-4xl text-teal-600 animate-spin\"></i>\n        <p className=\"mt-4 text-gray-600\">Loading invited assignments...</p>\n      </div>\n    );\n  }\n\n  if (assignments.length === 0) {\n    return (\n      <div className=\"text-center py-12\">\n        <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n          <i className=\"ri-checkbox-circle-line text-3xl text-gray-400\"></i>\n        </div>\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No Invited Assignments</h3>\n        <p className=\"text-gray-600\">You don't have any facility invitations at this time.</p>\n        <p className=\"text-sm text-gray-500 mt-2\">\n          When facilities approve your applications, they'll appear here for you to review and accept.\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <div className=\"space-y-4\">\n        {/* Info Banner */}\n        <div className=\"bg-green-50 border border-green-200 rounded-lg p-4 flex items-start gap-3\">\n          <div className=\"w-5 h-5 flex items-center justify-center\">\n            <i className=\"ri-checkbox-circle-line text-green-600\"></i>\n          </div>\n          <div className=\"flex-1\">\n            <p className=\"text-sm text-green-900\">\n              <strong>Congratulations!</strong> These facilities have approved your application. \n              Review and sign the required documents to confirm your assignment.\n            </p>\n          </div>\n        </div>\n\n        {/* Assignments List */}\n        {assignments.map((assignment) => (\n          <div\n            key={assignment.id}\n            className=\"border border-gray-200 rounded-lg p-5 hover:border-teal-300 transition-colors\"\n          >\n            <div className=\"flex items-start justify-between gap-4 mb-4\">\n              <div className=\"flex-1\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <h4 className=\"font-semibold text-gray-900\">{assignment.position}</h4>\n                  <span\n                    className={`px-2 py-1 text-xs font-medium rounded ${\n                      assignment.status === 'invited'\n                        ? 'bg-green-100 text-green-700'\n                        : assignment.status === 'accepted_pending_signature'\n                        ? 'bg-yellow-100 text-yellow-700'\n                        : 'bg-blue-100 text-blue-700'\n                    }`}\n                  >\n                    {assignment.status === 'invited'\n                      ? 'Invited'\n                      : assignment.status === 'accepted_pending_signature'\n                      ? 'Pending Signature'\n                      : 'Fully Executed'}\n                  </span>\n                </div>\n                <p className=\"text-sm text-gray-600 mb-3\">\n                  {assignment.facilityName} • {assignment.location}\n                </p>\n                <div className=\"flex items-center gap-4 text-sm text-gray-600\">\n                  <div className=\"flex items-center gap-1\">\n                    <i className=\"ri-calendar-line\"></i>\n                    <span>{assignment.dateRange}</span>\n                  </div>\n                  <div className=\"flex items-center gap-1 font-semibold text-teal-600\">\n                    <i className=\"ri-money-dollar-circle-line\"></i>\n                    <span>{assignment.pay}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Document Status */}\n            <div className=\"bg-gray-50 rounded-lg p-4 mb-4\">\n              <h5 className=\"text-sm font-semibold text-gray-900 mb-3\">Required Documents</h5>\n              <div className=\"space-y-2\">\n                {assignment.documentsRequired.map((doc) => {\n                  const isSigned = assignment.documentsSigned.includes(doc);\n                  return (\n                    <div key={doc} className=\"flex items-center justify-between text-sm\">\n                      <span className=\"text-gray-700\">{doc}</span>\n                      {isSigned ? (\n                        <span className=\"flex items-center gap-1 text-green-600 font-medium\">\n                          <i className=\"ri-check-line\"></i>\n                          Signed\n                        </span>\n                      ) : (\n                        <span className=\"flex items-center gap-1 text-orange-600 font-medium\">\n                          <i className=\"ri-time-line\"></i>\n                          Pending\n                        </span>\n                      )}\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n\n            {/* Action Buttons */}\n            <div className=\"flex items-center gap-3\">\n              {assignment.status === 'invited' && (\n                <>\n                  <button\n                    onClick={() => handleAcceptInvitation(assignment.id)}\n                    className=\"flex-1 bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors\"\n                  >\n                    Accept Invitation\n                  </button>\n                  <button\n                    onClick={() => handleDeclineInvitation(assignment.id)}\n                    className=\"px-4 py-2 border border-gray-300 text-gray-700 hover:bg-gray-50 rounded-lg text-sm font-medium transition-colors\"\n                  >\n                    Decline\n                  </button>\n                </>\n              )}\n              {assignment.status === 'accepted_pending_signature' && (\n                <button\n                  onClick={() => handleReviewDocuments(assignment)}\n                  className=\"flex-1 bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2\"\n                >\n                  <i className=\"ri-file-text-line\"></i>\n                  Review & Sign Documents\n                </button>\n              )}\n            </div>\n\n            {/* Invitation Details */}\n            <div className=\"mt-4 flex items-start gap-2 text-xs text-gray-500\">\n              <i className=\"ri-information-line mt-0.5\"></i>\n              <p>\n                Invited on {new Date(assignment.invitedDate).toLocaleDateString('en-US', {\n                  month: 'short',\n                  day: 'numeric',\n                  year: 'numeric',\n                })}. \n                Both you and the facility must sign all documents to finalize the assignment.\n              </p>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Document Signing Modal */}\n      {showSigningModal && selectedAssignment && (\n        <DocumentSigningModal\n          assignment={selectedAssignment}\n          onClose={() => {\n            setShowSigningModal(false);\n            setSelectedAssignment(null);\n          }}\n          onComplete={(id: string, signedDocs: string[]) => {\n            setAssignments((prev) =>\n              prev.map((assignment) =>\n                assignment.id === id\n                  ? { ...assignment, documentsSigned: signedDocs }\n                  : assignment\n              )\n            );\n            setShowSigningModal(false);\n            setSelectedAssignment(null);\n          }}\n        />\n      )}\n    </>\n  );\n}\n\n// Document Signing Modal Component\ninterface DocumentSigningModalProps {\n  assignment: InvitedAssignment;\n  onClose: () => void;\n  onComplete: (id: string, signedDocs: string[]) => void;\n}\n\nfunction DocumentSigningModal({ assignment, onClose, onComplete }: DocumentSigningModalProps) {\n  const [currentDocIndex, setCurrentDocIndex] = useState(0);\n  const [signature, setSignature] = useState('');\n  const [agreed, setAgreed] = useState(false);\n  const [signedDocuments, setSignedDocuments] = useState<string[]>([...assignment.documentsSigned]);\n\n  const currentDoc = assignment.documentsRequired[currentDocIndex];\n  const isLastDoc = currentDocIndex === assignment.documentsRequired.length - 1;\n  const isCurrentDocSigned = signedDocuments.includes(currentDoc);\n\n  const handleSign = async () => {\n    if (!signature.trim() || !agreed) {\n      alert('Please enter your full legal name and agree to the terms.');\n      return;\n    }\n\n    try {\n      // TODO: Submit signature to database\n      // await supabase\n      //   .from('document_signatures')\n      //   .insert({\n      //     assignment_id: assignment.id,\n      //     document_name: currentDoc,\n      //     signature: signature,\n      //     signed_at: new Date().toISOString()\n      //   });\n\n      const updatedSigned = [...signedDocuments, currentDoc];\n      setSignedDocuments(updatedSigned);\n      setSignature('');\n      setAgreed(false);\n\n      if (isLastDoc) {\n        onComplete(assignment.id, updatedSigned);\n      } else {\n        setCurrentDocIndex(currentDocIndex + 1);\n      }\n    } catch (error) {\n      console.error('Error signing document:', error);\n      alert('Failed to sign document. Please try again.');\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"p-6 border-b border-gray-200\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <h3 className=\"text-xl font-bold text-gray-900\">Review & Sign Documents</h3>\n            <button\n              onClick={onClose}\n              className=\"w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600 transition-colors\"\n            >\n              <i className=\"ri-close-line text-xl\"></i>\n            </button>\n          </div>\n          <p className=\"text-sm text-gray-600\">\n            Document {currentDocIndex + 1} of {assignment.documentsRequired.length}\n          </p>\n        </div>\n\n        <div className=\"p-6\">\n          {/* Document Preview */}\n          <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-6 mb-6\">\n            <h4 className=\"text-lg font-semibold text-gray-900 mb-4\">{currentDoc}</h4>\n            <div className=\"prose prose-sm max-w-none text-gray-700 space-y-3\">\n              <p>\n                Document preview will be displayed here. In production, this would show the actual \n                document content or embed a PDF viewer.\n              </p>\n              <p>\n                <strong>Assignment Details:</strong>\n              </p>\n              <ul>\n                <li>Position: {assignment.position}</li>\n                <li>Facility: {assignment.facilityName}</li>\n                <li>Dates: {assignment.dateRange}</li>\n                <li>Compensation: {assignment.pay}</li>\n              </ul>\n            </div>\n          </div>\n\n          {/* Signature Section */}\n          {!isCurrentDocSigned && (\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Type your full legal name to sign\n                </label>\n                <input\n                  type=\"text\"\n                  value={signature}\n                  onChange={(e) => setSignature(e.target.value)}\n                  placeholder=\"Your Full Legal Name\"\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n                />\n              </div>\n\n              <div className=\"flex items-start gap-3\">\n                <input\n                  type=\"checkbox\"\n                  id=\"agree\"\n                  checked={agreed}\n                  onChange={(e) => setAgreed(e.target.checked)}\n                  className=\"mt-1 w-4 h-4 text-teal-600 border-gray-300 rounded focus:ring-teal-500\"\n                />\n                <label htmlFor=\"agree\" className=\"text-sm text-gray-700\">\n                  I have reviewed this document and agree to its terms. I understand this is a legally binding signature.\n                </label>\n              </div>\n\n              <div className=\"flex items-center gap-3\">\n                <button\n                  onClick={handleSign}\n                  disabled={!signature.trim() || !agreed}\n                  className=\"flex-1 bg-teal-600 hover:bg-teal-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-medium transition-colors\"\n                >\n                  {isLastDoc ? 'Sign & Complete' : 'Sign & Continue'}\n                </button>\n                {!isLastDoc && (\n                  <button\n                    onClick={() => setCurrentDocIndex(currentDocIndex + 1)}\n                    className=\"px-6 py-3 border border-gray-300 text-gray-700 hover:bg-gray-50 rounded-lg font-medium transition-colors\"\n                  >\n                    Skip for Now\n                  </button>\n                )}\n              </div>\n            </div>\n          )}\n\n          {isCurrentDocSigned && (\n            <div className=\"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center gap-3\">\n              <i className=\"ri-check-circle-fill text-green-600 text-xl\"></i>\n              <div className=\"flex-1\">\n                <p className=\"text-sm font-medium text-green-900\">Document Signed</p>\n                <p className=\"text-xs text-green-700\">This document has been signed and submitted.</p>\n              </div>\n              {!isLastDoc && (\n                <button\n                  onClick={() => setCurrentDocIndex(currentDocIndex + 1)}\n                  className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap\"\n                >\n                  Next Document\n                </button>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}","import React, { useState, useEffect } from 'react';\nimport { supabase } from '../../../utils/supabaseClient';\n\ninterface UpcomingAssignment {\n  id: string;\n  facilityName: string;\n  location: string;\n  position: string;\n  dateRange: string;\n  startDate: string;\n  endDate: string;\n  pay: string;\n  status: 'confirmed' | 'in_progress';\n  facilityContact: {\n    name: string;\n    email: string;\n    phone: string;\n  };\n  address: string;\n  notes: string;\n}\n\nexport function UpcomingAssignments() {\n  const [assignments, setAssignments] = useState<UpcomingAssignment[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showDetailsModal, setShowDetailsModal] = useState(false);\n  const [selectedAssignment, setSelectedAssignment] = useState<UpcomingAssignment | null>(null);\n\n  useEffect(() => {\n    fetchUpcomingAssignments();\n  }, []);\n\n  const fetchUpcomingAssignments = async () => {\n    try {\n      const { data: user } = await supabase.auth.getUser();\n      if (!user.user) {\n        setLoading(false);\n        return;\n      }\n\n      // Get physician profile\n      const { data: profile } = await supabase\n        .from('physician_profiles')\n        .select('id')\n        .eq('user_id', user.user.id)\n        .maybeSingle();\n\n      if (!profile) {\n        setLoading(false);\n        return;\n      }\n\n      // Fetch confirmed assignments from database\n      const { data, error } = await supabase\n        .from('confirmed_assignments')\n        .select('*')\n        .eq('physician_id', profile.id)\n        .gte('end_date', new Date().toISOString().split('T')[0])\n        .order('start_date', { ascending: true });\n\n      if (error) {\n        console.error('Error fetching assignments:', error);\n        setLoading(false);\n        return;\n      }\n\n      // Transform data to match interface\n      const transformedAssignments: UpcomingAssignment[] = (data || []).map((item: any) => ({\n        id: item.id,\n        facilityName: item.facility_name || 'Unknown Facility',\n        location: item.location || '',\n        position: item.position || '',\n        dateRange: `${new Date(item.start_date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}-${new Date(item.end_date).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}`,\n        startDate: item.start_date,\n        endDate: item.end_date,\n        pay: item.pay || '$0',\n        status: item.status || 'confirmed',\n        facilityContact: item.facility_contact || { name: '', email: '', phone: '' },\n        address: item.address || '',\n        notes: item.notes || '',\n      }));\n\n      setAssignments(transformedAssignments);\n      setLoading(false);\n    } catch (error) {\n      console.error('Error fetching upcoming assignments:', error);\n      setLoading(false);\n    }\n  };\n\n  const handleViewDetails = (assignment: UpcomingAssignment) => {\n    setSelectedAssignment(assignment);\n    setShowDetailsModal(true);\n  };\n\n  const getDaysUntilStart = (startDate: string) => {\n    const today = new Date();\n    const start = new Date(startDate);\n    const diffTime = start.getTime() - today.getTime();\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    return diffDays;\n  };\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12\">\n        <i className=\"ri-loader-4-line text-4xl text-teal-600 animate-spin\"></i>\n        <p className=\"mt-4 text-gray-600\">Loading upcoming assignments...</p>\n      </div>\n    );\n  }\n\n  if (assignments.length === 0) {\n    return (\n      <div className=\"text-center py-12\">\n        <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n          <i className=\"ri-calendar-check-line text-3xl text-gray-400\"></i>\n        </div>\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No Upcoming Assignments</h3>\n        <p className=\"text-gray-600\">You don't have any confirmed assignments scheduled.</p>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <div className=\"space-y-4\">\n        {/* Info Banner */}\n        <div className=\"bg-purple-50 border border-purple-200 rounded-lg p-4 flex items-start gap-3\">\n          <div className=\"w-5 h-5 flex items-center justify-center\">\n            <i className=\"ri-calendar-check-line text-purple-600\"></i>\n          </div>\n          <div className=\"flex-1\">\n            <p className=\"text-sm text-purple-900\">\n              <strong>Confirmed Assignments:</strong> These dates are locked in your calendar and cannot be double-booked. \n              Contact the facility directly if you need to make changes.\n            </p>\n          </div>\n        </div>\n\n        {/* Assignments List */}\n        {assignments.map((assignment) => {\n          const daysUntil = getDaysUntilStart(assignment.startDate);\n          const isStartingSoon = daysUntil <= 7 && daysUntil > 0;\n\n          return (\n            <div\n              key={assignment.id}\n              className=\"border border-gray-200 rounded-lg p-5 hover:border-teal-300 transition-colors\"\n            >\n              <div className=\"flex items-start justify-between gap-4 mb-4\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-2 mb-2\">\n                    <h4 className=\"font-semibold text-gray-900\">{assignment.position}</h4>\n                    <span className=\"px-2 py-1 bg-purple-100 text-purple-700 text-xs font-medium rounded\">\n                      Confirmed\n                    </span>\n                    {isStartingSoon && (\n                      <span className=\"px-2 py-1 bg-orange-100 text-orange-700 text-xs font-medium rounded\">\n                        Starting Soon\n                      </span>\n                    )}\n                  </div>\n                  <p className=\"text-sm text-gray-600 mb-3\">\n                    {assignment.facilityName} • {assignment.location}\n                  </p>\n                  <div className=\"flex items-center gap-4 text-sm text-gray-600\">\n                    <div className=\"flex items-center gap-1\">\n                      <i className=\"ri-calendar-line\"></i>\n                      <span>{assignment.dateRange}</span>\n                    </div>\n                    <div className=\"flex items-center gap-1 font-semibold text-teal-600\">\n                      <i className=\"ri-money-dollar-circle-line\"></i>\n                      <span>{assignment.pay}</span>\n                    </div>\n                  </div>\n                </div>\n                <button\n                  onClick={() => handleViewDetails(assignment)}\n                  className=\"bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap\"\n                >\n                  View Details\n                </button>\n              </div>\n\n              {/* Quick Info */}\n              <div className=\"bg-gray-50 rounded-lg p-4 space-y-2\">\n                <div className=\"flex items-start gap-2 text-sm\">\n                  <i className=\"ri-time-line text-gray-400 mt-0.5\"></i>\n                  <div className=\"flex-1\">\n                    <span className=\"text-gray-600\">Starts in: </span>\n                    <span className=\"font-medium text-gray-900\">\n                      {daysUntil > 0 ? `${daysUntil} days` : daysUntil === 0 ? 'Today' : 'In progress'}\n                    </span>\n                  </div>\n                </div>\n                <div className=\"flex items-start gap-2 text-sm\">\n                  <i className=\"ri-map-pin-line text-gray-400 mt-0.5\"></i>\n                  <div className=\"flex-1\">\n                    <span className=\"text-gray-600\">Location: </span>\n                    <span className=\"font-medium text-gray-900\">{assignment.address}</span>\n                  </div>\n                </div>\n                <div className=\"flex items-start gap-2 text-sm\">\n                  <i className=\"ri-user-line text-gray-400 mt-0.5\"></i>\n                  <div className=\"flex-1\">\n                    <span className=\"text-gray-600\">Contact: </span>\n                    <span className=\"font-medium text-gray-900\">{assignment.facilityContact.name}</span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Calendar Lock Notice */}\n              <div className=\"mt-4 flex items-start gap-2 text-xs text-gray-500\">\n                <i className=\"ri-lock-line mt-0.5\"></i>\n                <p>\n                  These dates are locked in your calendar. To make changes, please contact the facility directly.\n                </p>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Assignment Details Modal */}\n      {showDetailsModal && selectedAssignment && (\n        <AssignmentDetailsModal\n          assignment={selectedAssignment}\n          onClose={() => {\n            setShowDetailsModal(false);\n            setSelectedAssignment(null);\n          }}\n        />\n      )}\n    </>\n  );\n}\n\n// Assignment Details Modal Component\ninterface AssignmentDetailsModalProps {\n  assignment: UpcomingAssignment;\n  onClose: () => void;\n}\n\nfunction AssignmentDetailsModal({ assignment, onClose }: AssignmentDetailsModalProps) {\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"p-6 border-b border-gray-200\">\n          <div className=\"flex items-center justify-between\">\n            <h3 className=\"text-xl font-bold text-gray-900\">Assignment Details</h3>\n            <button\n              onClick={onClose}\n              className=\"w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600 transition-colors\"\n            >\n              <i className=\"ri-close-line text-xl\"></i>\n            </button>\n          </div>\n        </div>\n\n        <div className=\"p-6 space-y-6\">\n          {/* Assignment Info */}\n          <div>\n            <h4 className=\"text-lg font-semibold text-gray-900 mb-4\">{assignment.position}</h4>\n            <div className=\"space-y-3\">\n              <div className=\"flex items-start gap-3\">\n                <i className=\"ri-building-line text-gray-400 mt-1\"></i>\n                <div>\n                  <p className=\"text-sm text-gray-600\">Facility</p>\n                  <p className=\"font-medium text-gray-900\">{assignment.facilityName}</p>\n                </div>\n              </div>\n              <div className=\"flex items-start gap-3\">\n                <i className=\"ri-map-pin-line text-gray-400 mt-1\"></i>\n                <div>\n                  <p className=\"text-sm text-gray-600\">Address</p>\n                  <p className=\"font-medium text-gray-900\">{assignment.address}</p>\n                </div>\n              </div>\n              <div className=\"flex items-start gap-3\">\n                <i className=\"ri-calendar-line text-gray-400 mt-1\"></i>\n                <div>\n                  <p className=\"text-sm text-gray-600\">Assignment Dates</p>\n                  <p className=\"font-medium text-gray-900\">{assignment.dateRange}</p>\n                </div>\n              </div>\n              <div className=\"flex items-start gap-3\">\n                <i className=\"ri-money-dollar-circle-line text-gray-400 mt-1\"></i>\n                <div>\n                  <p className=\"text-sm text-gray-600\">Compensation</p>\n                  <p className=\"font-medium text-teal-600 text-lg\">{assignment.pay}</p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Facility Contact */}\n          <div className=\"bg-gray-50 rounded-lg p-4\">\n            <h5 className=\"text-sm font-semibold text-gray-900 mb-3\">Facility Contact</h5>\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center gap-2 text-sm\">\n                <i className=\"ri-user-line text-gray-400\"></i>\n                <span className=\"text-gray-900\">{assignment.facilityContact.name}</span>\n              </div>\n              <div className=\"flex items-center gap-2 text-sm\">\n                <i className=\"ri-mail-line text-gray-400\"></i>\n                <a\n                  href={`mailto:${assignment.facilityContact.email}`}\n                  className=\"text-teal-600 hover:text-teal-700\"\n                >\n                  {assignment.facilityContact.email}\n                </a>\n              </div>\n              <div className=\"flex items-center gap-2 text-sm\">\n                <i className=\"ri-phone-line text-gray-400\"></i>\n                <a\n                  href={`tel:${assignment.facilityContact.phone}`}\n                  className=\"text-teal-600 hover:text-teal-700\"\n                >\n                  {assignment.facilityContact.phone}\n                </a>\n              </div>\n            </div>\n          </div>\n\n          {/* Special Notes */}\n          {assignment.notes && (\n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n              <div className=\"flex items-start gap-3\">\n                <i className=\"ri-information-line text-blue-600 mt-0.5\"></i>\n                <div>\n                  <h5 className=\"text-sm font-semibold text-blue-900 mb-1\">Important Notes</h5>\n                  <p className=\"text-sm text-blue-800\">{assignment.notes}</p>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Action Buttons */}\n          <div className=\"flex items-center gap-3\">\n            <button\n              onClick={onClose}\n              className=\"flex-1 bg-teal-600 hover:bg-teal-700 text-white px-6 py-3 rounded-lg font-medium transition-colors\"\n            >\n              Close\n            </button>\n            <button className=\"px-6 py-3 border border-gray-300 text-gray-700 hover:bg-gray-50 rounded-lg font-medium transition-colors whitespace-nowrap\">\n              Add to Calendar\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport { supabase } from '../../../utils/supabaseClient';\n\ninterface CompletedAssignment {\n  id: string;\n  facilityName: string;\n  location: string;\n  position: string;\n  dateRange: string;\n  completedDate: string;\n  pay: string;\n  paymentStatus: 'pending' | 'paid';\n  invoiceUploaded: boolean;\n  facilityFeedback: string | null;\n  messages: Message[];\n}\n\ninterface Message {\n  id: string;\n  sender: 'facility' | 'physician';\n  senderName: string;\n  content: string;\n  timestamp: string;\n  type: 'message' | 'document_request' | 'clarification';\n}\n\nexport function CompletedAssignments() {\n  const [assignments, setAssignments] = useState<CompletedAssignment[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showDetailsModal, setShowDetailsModal] = useState(false);\n  const [selectedAssignment, setSelectedAssignment] = useState<CompletedAssignment | null>(null);\n\n  useEffect(() => {\n    fetchCompletedAssignments();\n  }, []);\n\n  const fetchCompletedAssignments = async () => {\n    try {\n      const { data: user } = await supabase.auth.getUser();\n      if (!user.user) {\n        setLoading(false);\n        return;\n      }\n\n      // Get physician profile\n      const { data: profile } = await supabase\n        .from('physician_profiles')\n        .select('id')\n        .eq('user_id', user.user.id)\n        .maybeSingle();\n\n      if (!profile) {\n        setLoading(false);\n        return;\n      }\n\n      // TODO: Fetch completed assignments from your database when table is created\n      // const { data, error } = await supabase\n      //   .from('completed_assignments')\n      //   .select('*')\n      //   .eq('physician_id', profile.id)\n      //   .order('completed_date', { ascending: false });\n\n      setAssignments([]);\n      setLoading(false);\n    } catch (error) {\n      console.error('Error fetching completed assignments:', error);\n      setLoading(false);\n    }\n  };\n\n  const handleViewDetails = (assignment: CompletedAssignment) => {\n    setSelectedAssignment(assignment);\n    setShowDetailsModal(true);\n  };\n\n  const handleUploadInvoice = (id: string) => {\n    // Simulate invoice upload\n    const fileInput = document.createElement('input');\n    fileInput.type = 'file';\n    fileInput.accept = '.pdf,.doc,.docx';\n    fileInput.onchange = () => {\n      setAssignments((prev) =>\n        prev.map((assignment) =>\n          assignment.id === id ? { ...assignment, invoiceUploaded: true } : assignment\n        )\n      );\n      alert('Invoice uploaded successfully!');\n    };\n    fileInput.click();\n  };\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12\">\n        <i className=\"ri-loader-4-line text-4xl text-teal-600 animate-spin\"></i>\n        <p className=\"mt-4 text-gray-600\">Loading completed assignments...</p>\n      </div>\n    );\n  }\n\n  if (assignments.length === 0) {\n    return (\n      <div className=\"text-center py-12\">\n        <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n          <i className=\"ri-check-double-line text-3xl text-gray-400\"></i>\n        </div>\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No Completed Assignments</h3>\n        <p className=\"text-gray-600\">Your completed assignments will appear here.</p>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <div className=\"space-y-4\">\n        {/* Summary Stats */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\n          <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center\">\n                <i className=\"ri-check-double-line text-green-600 text-xl\"></i>\n              </div>\n              <div>\n                <p className=\"text-sm text-green-700\">Total Completed</p>\n                <p className=\"text-2xl font-bold text-green-900\">{assignments.length}</p>\n              </div>\n            </div>\n          </div>\n          <div className=\"bg-teal-50 border border-teal-200 rounded-lg p-4\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-10 h-10 bg-teal-100 rounded-lg flex items-center justify-center\">\n                <i className=\"ri-money-dollar-circle-line text-teal-600 text-xl\"></i>\n              </div>\n              <div>\n                <p className=\"text-sm text-teal-700\">Total Earned</p>\n                <p className=\"text-2xl font-bold text-teal-900\">\n                  ${assignments.reduce((sum, a) => sum + parseInt(a.pay.replace(/[$,]/g, '')), 0).toLocaleString()}\n                </p>\n              </div>\n            </div>\n          </div>\n          <div className=\"bg-orange-50 border border-orange-200 rounded-lg p-4\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center\">\n                <i className=\"ri-file-text-line text-orange-600 text-xl\"></i>\n              </div>\n              <div>\n                <p className=\"text-sm text-orange-700\">Pending Invoices</p>\n                <p className=\"text-2xl font-bold text-orange-900\">\n                  {assignments.filter((a) => !a.invoiceUploaded).length}\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Assignments List */}\n        {assignments.map((assignment) => (\n          <div\n            key={assignment.id}\n            className=\"border border-gray-200 rounded-lg p-5 hover:border-teal-300 transition-colors\"\n          >\n            <div className=\"flex items-start justify-between gap-4 mb-4\">\n              <div className=\"flex-1\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <h4 className=\"font-semibold text-gray-900\">{assignment.position}</h4>\n                  <span\n                    className={`px-2 py-1 text-xs font-medium rounded ${\n                      assignment.paymentStatus === 'paid'\n                        ? 'bg-green-100 text-green-700'\n                        : 'bg-orange-100 text-orange-700'\n                    }`}\n                  >\n                    {assignment.paymentStatus === 'paid' ? 'Paid' : 'Payment Pending'}\n                  </span>\n                  {!assignment.invoiceUploaded && (\n                    <span className=\"px-2 py-1 bg-red-100 text-red-700 text-xs font-medium rounded\">\n                      Invoice Required\n                    </span>\n                  )}\n                </div>\n                <p className=\"text-sm text-gray-600 mb-3\">\n                  {assignment.facilityName} • {assignment.location}\n                </p>\n                <div className=\"flex items-center gap-4 text-sm text-gray-600\">\n                  <div className=\"flex items-center gap-1\">\n                    <i className=\"ri-calendar-line\"></i>\n                    <span>{assignment.dateRange}</span>\n                  </div>\n                  <div className=\"flex items-center gap-1\">\n                    <i className=\"ri-calendar-check-line\"></i>\n                    <span>\n                      Completed {new Date(assignment.completedDate).toLocaleDateString('en-US', {\n                        month: 'short',\n                        day: 'numeric',\n                        year: 'numeric',\n                      })}\n                    </span>\n                  </div>\n                  <div className=\"flex items-center gap-1 font-semibold text-teal-600\">\n                    <i className=\"ri-money-dollar-circle-line\"></i>\n                    <span>{assignment.pay}</span>\n                  </div>\n                </div>\n              </div>\n              <button\n                onClick={() => handleViewDetails(assignment)}\n                className=\"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap\"\n              >\n                View Details\n              </button>\n            </div>\n\n            {/* Quick Actions */}\n            <div className=\"flex items-center gap-3\">\n              {!assignment.invoiceUploaded && (\n                <button\n                  onClick={() => handleUploadInvoice(assignment.id)}\n                  className=\"flex items-center gap-2 bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors\"\n                >\n                  <i className=\"ri-upload-line\"></i>\n                  Upload Invoice\n                </button>\n              )}\n              {assignment.messages.length > 0 && (\n                <button\n                  onClick={() => handleViewDetails(assignment)}\n                  className=\"flex items-center gap-2 text-teal-600 hover:text-teal-700 text-sm font-medium\"\n                >\n                  <i className=\"ri-message-3-line\"></i>\n                  {assignment.messages.length} Message{assignment.messages.length > 1 ? 's' : ''}\n                </button>\n              )}\n            </div>\n\n            {/* Facility Feedback */}\n            {assignment.facilityFeedback && (\n              <div className=\"mt-4 bg-green-50 border border-green-200 rounded-lg p-3 flex items-start gap-2\">\n                <i className=\"ri-star-fill text-green-600 mt-0.5\"></i>\n                <div className=\"flex-1\">\n                  <p className=\"text-xs font-semibold text-green-900 mb-1\">Facility Feedback</p>\n                  <p className=\"text-sm text-green-800\">{assignment.facilityFeedback}</p>\n                </div>\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n\n      {/* Assignment Details Modal */}\n      {showDetailsModal && selectedAssignment && (\n        <CompletedAssignmentModal\n          assignment={selectedAssignment}\n          onClose={() => {\n            setShowDetailsModal(false);\n            setSelectedAssignment(null);\n          }}\n          onUploadInvoice={handleUploadInvoice}\n        />\n      )}\n    </>\n  );\n}\n\n// Completed Assignment Details Modal\ninterface CompletedAssignmentModalProps {\n  assignment: CompletedAssignment;\n  onClose: () => void;\n  onUploadInvoice: (id: string) => void;\n}\n\nfunction CompletedAssignmentModal({ assignment, onClose, onUploadInvoice }: CompletedAssignmentModalProps) {\n  const [newMessage, setNewMessage] = useState('');\n\n  const handleSendMessage = () => {\n    if (!newMessage.trim()) return;\n    alert('Message sent to facility!');\n    setNewMessage('');\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"p-6 border-b border-gray-200\">\n          <div className=\"flex items-center justify-between\">\n            <h3 className=\"text-xl font-bold text-gray-900\">Completed Assignment Details</h3>\n            <button\n              onClick={onClose}\n              className=\"w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600 transition-colors\"\n            >\n              <i className=\"ri-close-line text-xl\"></i>\n            </button>\n          </div>\n        </div>\n\n        <div className=\"p-6 space-y-6\">\n          {/* Assignment Summary */}\n          <div>\n            <h4 className=\"text-lg font-semibold text-gray-900 mb-4\">{assignment.position}</h4>\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <p className=\"text-sm text-gray-600\">Facility</p>\n                <p className=\"font-medium text-gray-900\">{assignment.facilityName}</p>\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-600\">Location</p>\n                <p className=\"font-medium text-gray-900\">{assignment.location}</p>\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-600\">Assignment Dates</p>\n                <p className=\"font-medium text-gray-900\">{assignment.dateRange}</p>\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-600\">Compensation</p>\n                <p className=\"font-medium text-teal-600 text-lg\">{assignment.pay}</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Payment & Invoice Status */}\n          <div className=\"bg-gray-50 rounded-lg p-4\">\n            <h5 className=\"text-sm font-semibold text-gray-900 mb-3\">Payment Status</h5>\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center justify-between text-sm\">\n                <span className=\"text-gray-600\">Payment Status:</span>\n                <span\n                  className={`font-medium ${\n                    assignment.paymentStatus === 'paid' ? 'text-green-600' : 'text-orange-600'\n                  }`}\n                >\n                  {assignment.paymentStatus === 'paid' ? 'Paid' : 'Pending'}\n                </span>\n              </div>\n              <div className=\"flex items-center justify-between text-sm\">\n                <span className=\"text-gray-600\">Invoice Status:</span>\n                <span\n                  className={`font-medium ${\n                    assignment.invoiceUploaded ? 'text-green-600' : 'text-red-600'\n                  }`}\n                >\n                  {assignment.invoiceUploaded ? 'Uploaded' : 'Required'}\n                </span>\n              </div>\n            </div>\n            {!assignment.invoiceUploaded && (\n              <button\n                onClick={() => onUploadInvoice(assignment.id)}\n                className=\"w-full mt-3 bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2\"\n              >\n                <i className=\"ri-upload-line\"></i>\n                Upload Invoice\n              </button>\n            )}\n          </div>\n\n          {/* Facility Feedback */}\n          {assignment.facilityFeedback && (\n            <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n              <div className=\"flex items-start gap-3\">\n                <i className=\"ri-star-fill text-green-600 text-xl mt-0.5\"></i>\n                <div>\n                  <h5 className=\"text-sm font-semibold text-green-900 mb-1\">Facility Feedback</h5>\n                  <p className=\"text-sm text-green-800\">{assignment.facilityFeedback}</p>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Message History */}\n          <div>\n            <h5 className=\"text-sm font-semibold text-gray-900 mb-3\">Communication History</h5>\n            {assignment.messages.length > 0 ? (\n              <div className=\"space-y-3 mb-4\">\n                {assignment.messages.map((message) => (\n                  <div\n                    key={message.id}\n                    className={`p-3 rounded-lg ${\n                      message.sender === 'physician' ? 'bg-teal-50 ml-8' : 'bg-gray-50 mr-8'\n                    }`}\n                  >\n                    <div className=\"flex items-center justify-between mb-1\">\n                      <span className=\"text-xs font-semibold text-gray-900\">{message.senderName}</span>\n                      <span className=\"text-xs text-gray-500\">\n                        {new Date(message.timestamp).toLocaleDateString('en-US', {\n                          month: 'short',\n                          day: 'numeric',\n                          hour: 'numeric',\n                          minute: '2-digit',\n                        })}\n                      </span>\n                    </div>\n                    {message.type === 'document_request' && (\n                      <span className=\"inline-block px-2 py-0.5 bg-orange-100 text-orange-700 text-xs font-medium rounded mb-1\">\n                        Document Request\n                      </span>\n                    )}\n                    <p className=\"text-sm text-gray-700\">{message.content}</p>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <p className=\"text-sm text-gray-500 mb-4\">No messages yet.</p>\n            )}\n\n            {/* Send Message */}\n            <div className=\"flex gap-2\">\n              <input\n                type=\"text\"\n                value={newMessage}\n                onChange={(e) => setNewMessage(e.target.value)}\n                placeholder=\"Type a message to the facility...\"\n                className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\n                onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()}\n              />\n              <button\n                onClick={handleSendMessage}\n                disabled={!newMessage.trim()}\n                className=\"bg-teal-600 hover:bg-teal-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap\"\n              >\n                Send\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport { supabase } from \"../../../utils/supabaseClient\";\n\ninterface FacilityRequest {\n  id: string;\n  assignmentId: string;\n  assignmentTitle: string;\n  facilityName: string;\n  requestType: \"clarification\" | \"document\" | \"information\";\n  subject: string;\n  message: string;\n  requestedDocuments?: string[];\n  status: \"pending\" | \"responded\" | \"resolved\";\n  createdAt: string;\n  responses: RequestResponse[];\n}\n\ninterface RequestResponse {\n  id: string;\n  sender: \"physician\" | \"facility\";\n  message: string;\n  attachments?: string[];\n  timestamp: string;\n}\n\n/**\n * FacilityRequests component\n *\n * - Displays a list of facility requests.\n * - Allows filtering by status.\n * - Shows a detailed thread for the selected request.\n * - Enables the physician to reply with optional file attachments.\n *\n * The component now includes:\n *   • Proper TypeScript generic syntax (`useState<FacilityRequest[]>`).\n *   • Minimal error‑handling for file uploads and reply submission.\n *   • Defensive checks to avoid runtime crashes (e.g., missing timestamps).\n */\nexport const FacilityRequests: React.FC = () => {\n  // -------------------------------------------------------------------------\n  // State\n  // -------------------------------------------------------------------------\n  const [requests, setRequests] = useState<FacilityRequest[]>([]);\n\n  const [selectedRequest, setSelectedRequest] = useState<FacilityRequest | null>(\n    null\n  );\n  const [replyMessage, setReplyMessage] = useState(\"\");\n  const [uploadedFiles, setUploadedFiles] = useState<File[]>([]);\n  const [filterStatus, setFilterStatus] = useState<\n    \"all\" | \"pending\" | \"responded\" | \"resolved\"\n  >(\"all\");\n\n  // -------------------------------------------------------------------------\n  // Fetch facility requests from Supabase\n  // -------------------------------------------------------------------------\n  useEffect(() => {\n    const fetchRequests = async () => {\n      // TODO: Replace with actual Supabase query when table is created\n      // const { data, error } = await supabase\n      //   .from('facility_requests')\n      //   .select('*')\n      //   .order('created_at', { ascending: false });\n      \n      // if (data) {\n      //   setRequests(data);\n      // }\n    };\n\n    fetchRequests();\n  }, []);\n\n  // -------------------------------------------------------------------------\n  // Helpers\n  // -------------------------------------------------------------------------\n  const formatTimestamp = (timestamp: string): string => {\n    if (!timestamp) return \"\";\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffMs = now.getTime() - date.getTime();\n    const diffMins = Math.floor(diffMs / 60000);\n    const diffHours = Math.floor(diffMs / 3600000);\n    const diffDays = Math.floor(diffMs / 86400000);\n\n    if (diffMins < 60) return `${diffMins} minutes ago`;\n    if (diffHours < 24) return `${diffHours} hours ago`;\n    if (diffDays < 7) return `${diffDays} days ago`;\n\n    return date.toLocaleDateString(\"en-US\", {\n      month: \"short\",\n      day: \"numeric\",\n      year: date.getFullYear() !== now.getFullYear() ? \"numeric\" : undefined,\n    });\n  };\n\n  const getRequestTypeIcon = (type: string): string => {\n    switch (type) {\n      case \"clarification\":\n        return \"ri-question-line\";\n      case \"document\":\n        return \"ri-file-text-line\";\n      case \"information\":\n        return \"ri-information-line\";\n      default:\n        return \"ri-mail-line\";\n    }\n  };\n\n  const getRequestTypeColor = (type: string): string => {\n    switch (type) {\n      case \"clarification\":\n        return \"bg-blue-100 text-blue-700\";\n      case \"document\":\n        return \"bg-purple-100 text-purple-700\";\n      case \"information\":\n        return \"bg-orange-100 text-orange-700\";\n      default:\n        return \"bg-gray-100 text-gray-700\";\n    }\n  };\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case \"pending\":\n        return (\n          <span className=\"px-2 py-1 bg-yellow-100 text-yellow-700 text-xs font-medium rounded\">\n            Pending Response\n          </span>\n        );\n      case \"responded\":\n        return (\n          <span className=\"px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded\">\n            Responded\n          </span>\n        );\n      case \"resolved\":\n        return (\n          <span className=\"px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded\">\n            Resolved\n          </span>\n        );\n      default:\n        return null;\n    }\n  };\n\n  // -------------------------------------------------------------------------\n  // Event Handlers\n  // -------------------------------------------------------------------------\n  const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files) {\n      setUploadedFiles(Array.from(e.target.files));\n    }\n  };\n\n  const handleSendReply = () => {\n    if (!selectedRequest || !replyMessage.trim()) return;\n\n    const newResponse: RequestResponse = {\n      id: `resp-${Date.now()}`,\n      sender: \"physician\",\n      message: replyMessage,\n      attachments: uploadedFiles.map((f) => f.name),\n      timestamp: new Date().toISOString(),\n    };\n\n    // Update the master list\n    setRequests((prev) =>\n      prev.map((req) =>\n        req.id === selectedRequest.id\n          ? {\n              ...req,\n              status: \"responded\",\n              responses: [...req.responses, newResponse],\n            }\n          : req\n      )\n    );\n\n    // Update the selected request (keeps UI in sync)\n    setSelectedRequest((prev) => {\n      if (!prev) return prev;\n      return {\n        ...prev,\n        status: \"responded\",\n        responses: [...prev.responses, newResponse],\n      };\n    });\n\n    // Reset form\n    setReplyMessage(\"\");\n    setUploadedFiles([]);\n  };\n\n  // -------------------------------------------------------------------------\n  // Derived data\n  // -------------------------------------------------------------------------\n  const filteredRequests = requests.filter((req) =>\n    filterStatus === \"all\" ? true : req.status === filterStatus\n  );\n\n  const pendingCount = requests.filter((r) => r.status === \"pending\").length;\n\n  // -------------------------------------------------------------------------\n  // Render\n  // -------------------------------------------------------------------------\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-xl font-bold text-gray-900\">Facility Requests</h2>\n          <p className=\"text-sm text-gray-600 mt-1\">\n            Respond to facility clarifications and document requests\n          </p>\n        </div>\n        {pendingCount > 0 && (\n          <div className=\"px-4 py-2 bg-yellow-100 border border-yellow-200 rounded-lg\">\n            <p className=\"text-sm font-medium text-yellow-800\">\n              <i className=\"ri-alert-line mr-2\"></i>\n              {pendingCount} pending {pendingCount === 1 ? \"request\" : \"requests\"}\n            </p>\n          </div>\n        )}\n      </div>\n\n      {/* Filter Tabs */}\n      <div className=\"flex items-center gap-2 border-b border-gray-200\">\n        {([\"all\", \"pending\", \"responded\", \"resolved\"] as const).map((status) => (\n          <button\n            key={status}\n            onClick={() => setFilterStatus(status)}\n            className={`px-4 py-2 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${\n              filterStatus === status\n                ? \"border-teal-600 text-teal-600\"\n                : \"border-transparent text-gray-600 hover:text-gray-900\"\n            }`}\n          >\n            {status.charAt(0).toUpperCase() + status.slice(1)}\n            {status !== \"all\" && (\n              <span className=\"ml-2 px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full\">\n                {requests.filter((r) => r.status === status).length}\n              </span>\n            )}\n          </button>\n        ))}\n      </div>\n\n      {/* Requests List */}\n      {filteredRequests.length === 0 ? (\n        <div className=\"bg-white rounded-lg border border-gray-200 p-12 text-center\">\n          <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <i className=\"ri-mail-check-line text-gray-400 text-3xl\"></i>\n          </div>\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n            No requests found\n          </h3>\n          <p className=\"text-sm text-gray-600\">\n            {filterStatus === \"all\"\n              ? \"You have no facility requests at this time.\"\n              : `You have no ${filterStatus} requests.`}\n          </p>\n        </div>\n      ) : (\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {/* Request Cards */}\n          <div className=\"space-y-4\">\n            {filteredRequests.map((request) => (\n              <div\n                key={request.id}\n                onClick={() => setSelectedRequest(request)}\n                className={`bg-white rounded-lg border p-4 cursor-pointer transition-all ${\n                  selectedRequest?.id === request.id\n                    ? \"border-teal-300 shadow-md\"\n                    : \"border-gray-200 hover:border-teal-200\"\n                }`}\n              >\n                <div className=\"flex items-start justify-between mb-3\">\n                  <div className=\"flex items-start gap-3 flex-1\">\n                    <div\n                      className={`w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 ${getRequestTypeColor(\n                        request.requestType\n                      )}`}\n                    >\n                      <i className={`${getRequestTypeIcon(request.requestType)} text-lg`}></i>\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <h4 className=\"font-semibold text-gray-900 mb-1\">\n                        {request.subject}\n                      </h4>\n                      <p className=\"text-sm text-gray-600 mb-2\">\n                        {request.facilityName} • {request.assignmentTitle}\n                      </p>\n                      <p className=\"text-sm text-gray-700 line-clamp-2\">\n                        {request.message}\n                      </p>\n                    </div>\n                  </div>\n                  {getStatusBadge(request.status)}\n                </div>\n\n                {request.requestedDocuments?.length && (\n                  <div className=\"mb-3 p-3 bg-gray-50 rounded-lg\">\n                    <p className=\"text-xs font-medium text-gray-700 mb-2\">\n                      Requested Documents:\n                    </p>\n                    <ul className=\"space-y-1\">\n                      {request.requestedDocuments.map((doc, idx) => (\n                        <li\n                          key={idx}\n                          className=\"text-xs text-gray-600 flex items-center gap-2\"\n                        >\n                          <i className=\"ri-file-line text-gray-400\"></i>\n                          {doc}\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n                )}\n\n                <div className=\"flex items-center justify-between text-xs text-gray-500\">\n                  <span>\n                    <i className=\"ri-time-line mr-1\"></i>\n                    {formatTimestamp(request.createdAt)}\n                  </span>\n                  {request.responses.length > 0 && (\n                    <span>\n                      <i className=\"ri-message-3-line mr-1\"></i>\n                      {request.responses.length}{\" \"}\n                      {request.responses.length === 1 ? \"reply\" : \"replies\"}\n                    </span>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n\n          {/* Message Thread */}\n          {selectedRequest ? (\n            <div className=\"bg-white rounded-lg border border-gray-200 flex flex-col h-[600px] sticky top-4\">\n              {/* Thread Header */}\n              <div className=\"p-4 border-b border-gray-200\">\n                <div className=\"flex items-start justify-between mb-2\">\n                  <h3 className=\"font-semibold text-gray-900\">\n                    {selectedRequest.subject}\n                  </h3>\n                  {getStatusBadge(selectedRequest.status)}\n                </div>\n                <p className=\"text-sm text-gray-600\">\n                  {selectedRequest.facilityName} • {selectedRequest.assignmentTitle}\n                </p>\n              </div>\n\n              {/* Messages */}\n              <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n                {/* Initial Request */}\n                <div className=\"flex gap-3\">\n                  <div className=\"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center flex-shrink-0\">\n                    <i className=\"ri-building-line text-gray-600 text-sm\"></i>\n                  </div>\n                  <div className=\"flex-1\">\n                    <div className=\"bg-gray-50 rounded-lg p-3\">\n                      <p className=\"text-sm font-medium text-gray-900 mb-1\">\n                        {selectedRequest.facilityName}\n                      </p>\n                      <p className=\"text-sm text-gray-700\">\n                        {selectedRequest.message}\n                      </p>\n\n                      {selectedRequest.requestedDocuments?.length && (\n                        <div className=\"mt-3 pt-3 border-t border-gray-200\">\n                          <p className=\"text-xs font-medium text-gray-700 mb-2\">\n                            Requested Documents:\n                          </p>\n                          <ul className=\"space-y-1\">\n                            {selectedRequest.requestedDocuments.map((doc, idx) => (\n                              <li\n                                key={idx}\n                                className=\"text-xs text-gray-600 flex items-center gap-2\"\n                              >\n                                <i className=\"ri-file-line text-gray-400\"></i>\n                                {doc}\n                              </li>\n                            ))}\n                          </ul>\n                        </div>\n                      )}\n                    </div>\n                    <p className=\"text-xs text-gray-500 mt-1\">\n                      {formatTimestamp(selectedRequest.createdAt)}\n                    </p>\n                  </div>\n                </div>\n\n                {/* Responses */}\n                {selectedRequest.responses.map((response) => (\n                  <div\n                    key={response.id}\n                    className={`flex gap-3 ${\n                      response.sender === \"physician\" ? \"flex-row-reverse\" : \"\"\n                    }`}\n                  >\n                    <div\n                      className={`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${\n                        response.sender === \"physician\"\n                          ? \"bg-teal-100\"\n                          : \"bg-gray-200\"\n                      }`}\n                    >\n                      <i\n                        className={`${\n                          response.sender === \"physician\"\n                            ? \"ri-user-line text-teal-600\"\n                            : \"ri-building-line text-gray-600\"\n                        } text-sm`}\n                      ></i>\n                    </div>\n                    <div className=\"flex-1\">\n                      <div\n                        className={`rounded-lg p-3 ${\n                          response.sender === \"physician\"\n                            ? \"bg-teal-50\"\n                            : \"bg-gray-50\"\n                        }`}\n                      >\n                        <p className=\"text-sm font-medium text-gray-900 mb-1\">\n                          {response.sender === \"physician\"\n                            ? \"You\"\n                            : selectedRequest.facilityName}\n                        </p>\n                        <p className=\"text-sm text-gray-700\">{response.message}</p>\n\n                        {response.attachments?.length && (\n                          <div className=\"mt-3 pt-3 border-t border-gray-200\">\n                            <p className=\"text-xs font-medium text-gray-700 mb-2\">\n                              Attachments:\n                            </p>\n                            <div className=\"space-y-1\">\n                              {response.attachments.map((file, idx) => (\n                                <div\n                                  key={idx}\n                                  className=\"flex items-center gap-2 text-xs text-gray-600\"\n                                >\n                                  <i className=\"ri-attachment-line text-gray-400\"></i>\n                                  {file}\n                                </div>\n                              ))}\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                      <p\n                        className={`text-xs text-gray-500 mt-1 ${\n                          response.sender === \"physician\" ? \"text-right\" : \"\"\n                        }`}\n                      >\n                        {formatTimestamp(response.timestamp)}\n                      </p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n\n              {/* Reply Form */}\n              {selectedRequest.status !== \"resolved\" && (\n                <div className=\"p-4 border-t border-gray-200\">\n                  <textarea\n                    value={replyMessage}\n                    onChange={(e) => setReplyMessage(e.target.value)}\n                    placeholder=\"Type your response...\"\n                    rows={3}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-teal-500 resize-none\"\n                  ></textarea>\n\n                  {uploadedFiles.length > 0 && (\n                    <div className=\"mt-2 p-2 bg-gray-50 rounded-lg\">\n                      <p className=\"text-xs font-medium text-gray-700 mb-1\">\n                        Attached Files:\n                      </p>\n                      <div className=\"space-y-1\">\n                        {uploadedFiles.map((file, idx) => (\n                          <div\n                            key={idx}\n                            className=\"flex items-center justify-between text-xs text-gray-600\"\n                          >\n                            <span>\n                              <i className=\"ri-file-line mr-1\"></i>\n                              {file.name}\n                            </span>\n                            <button\n                              onClick={() =>\n                                setUploadedFiles((prev) =>\n                                  prev.filter((_, i) => i !== idx)\n                                )\n                              }\n                              className=\"text-red-600 hover:text-red-700\"\n                            >\n                              <i className=\"ri-close-line\"></i>\n                            </button>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n\n                  <div className=\"flex items-center justify-between mt-3\">\n                    <label className=\"cursor-pointer\">\n                      <input\n                        type=\"file\"\n                        multiple\n                        onChange={handleFileUpload}\n                        className=\"hidden\"\n                      />\n                      <span className=\"text-sm text-teal-600 hover:text-teal-700 font-medium\">\n                        <i className=\"ri-attachment-line mr-1\"></i>\n                        Attach Files\n                      </span>\n                    </label>\n                    <button\n                      onClick={handleSendReply}\n                      disabled={!replyMessage.trim()}\n                      className={`px-4 py-2 text-sm font-medium rounded-lg transition-colors whitespace-nowrap ${\n                        replyMessage.trim()\n                          ? \"bg-teal-600 text-white hover:bg-teal-700\"\n                          : \"bg-gray-300 text-gray-500 cursor-not-allowed\"\n                      }`}\n                    >\n                      <i className=\"ri-send-plane-fill mr-2\"></i>\n                      Send Reply\n                    </button>\n                  </div>\n                </div>\n              )}\n            </div>\n          ) : (\n            <div className=\"bg-white rounded-lg border border-gray-200 flex items-center justify-center h-[600px] sticky top-4\">\n              <div className=\"text-center\">\n                <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <i className=\"ri-message-3-line text-gray-400 text-3xl\"></i>\n                </div>\n                <p className=\"text-sm text-gray-600\">\n                  Select a request to view the conversation\n                </p>\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n","import { useState } from 'react';\n\ninterface InsuranceQuestion {\n  id: string;\n  question: string;\n  type: 'text' | 'select' | 'textarea' | 'date' | 'boolean';\n  options?: string[];\n  required: boolean;\n}\n\ninterface InsuranceQuote {\n  id: string;\n  provider: string;\n  assignmentId?: string;\n  assignmentTitle?: string;\n  coverageType: string;\n  coverageAmount: string;\n  premium: string;\n  deductible: string;\n  effectiveDate: string;\n  expirationDate: string;\n  status: 'pending' | 'accepted' | 'declined';\n  submittedDate: string;\n  details: string;\n}\n\nconst standardQuestions: InsuranceQuestion[] = [\n  {\n    id: 'current_coverage',\n    question: 'Do you currently have malpractice insurance?',\n    type: 'boolean',\n    required: true\n  },\n  {\n    id: 'current_provider',\n    question: 'Current insurance provider (if applicable)',\n    type: 'text',\n    required: false\n  },\n  {\n    id: 'coverage_type',\n    question: 'Preferred coverage type',\n    type: 'select',\n    options: ['Claims-Made', 'Occurrence', 'Tail Coverage', 'Not Sure'],\n    required: true\n  },\n  {\n    id: 'coverage_amount',\n    question: 'Desired coverage amount',\n    type: 'select',\n    options: [\n      '$1M / $3M',\n      '$2M / $4M',\n      '$3M / $5M',\n      'Other'\n    ],\n    required: true\n  },\n  {\n    id: 'specialty_coverage',\n    question: 'Do you require specialty-specific coverage?',\n    type: 'boolean',\n    required: true\n  },\n  {\n    id: 'specialty_details',\n    question: 'Specialty coverage details',\n    type: 'textarea',\n    required: false\n  },\n  {\n    id: 'claims_history',\n    question: 'Have you had any malpractice claims in the past 10 years?',\n    type: 'boolean',\n    required: true\n  },\n  {\n    id: 'claims_details',\n    question: 'Claims history details (if applicable)',\n    type: 'textarea',\n    required: false\n  },\n  {\n    id: 'license_sanctions',\n    question: 'Have you ever had license sanctions or disciplinary actions?',\n    type: 'boolean',\n    required: true\n  },\n  {\n    id: 'sanctions_details',\n    question: 'Sanctions/disciplinary details (if applicable)',\n    type: 'textarea',\n    required: false\n  }\n];\n\nconst mockQuotes: InsuranceQuote[] = [\n  {\n    id: 'quote-1',\n    provider: 'MedPro Group',\n    assignmentId: 'assign-001',\n    assignmentTitle: 'Emergency Medicine - Memorial Hospital',\n    coverageType: 'Claims-Made',\n    coverageAmount: '$1M / $3M',\n    premium: '$4,200/year',\n    deductible: '$5,000',\n    effectiveDate: '2025-02-01',\n    expirationDate: '2026-02-01',\n    status: 'pending',\n    submittedDate: '2025-01-15',\n    details: 'Comprehensive coverage for emergency medicine with tail coverage option available. Includes legal defense costs and risk management resources.'\n  },\n  {\n    id: 'quote-2',\n    provider: 'The Doctors Company',\n    coverageType: 'Occurrence',\n    coverageAmount: '$2M / $4M',\n    premium: '$5,800/year',\n    deductible: '$10,000',\n    effectiveDate: '2025-02-01',\n    expirationDate: '2026-02-01',\n    status: 'pending',\n    submittedDate: '2025-01-18',\n    details: 'Occurrence-based policy with no tail coverage needed. Includes consent-to-settle clause and 24/7 risk management hotline.'\n  }\n];\n\nexport default function InsuranceQuestions() {\n  const [answers, setAnswers] = useState<Record<string, string>>({});\n  const [quotes, setQuotes] = useState<InsuranceQuote[]>(mockQuotes);\n  const [isSaved, setIsSaved] = useState(false);\n\n  const handleAnswerChange = (questionId: string, value: string) => {\n    setAnswers(prev => ({\n      ...prev,\n      [questionId]: value\n    }));\n    setIsSaved(false);\n  };\n\n  const handleSaveAnswers = () => {\n    // Save answers logic here\n    console.log('Saving insurance answers:', answers);\n    setIsSaved(true);\n    setTimeout(() => setIsSaved(false), 3000);\n  };\n\n  const handleQuoteAction = (quoteId: string, action: 'accept' | 'decline') => {\n    setQuotes(prev =>\n      prev.map(quote =>\n        quote.id === quoteId\n          ? { ...quote, status: action === 'accept' ? 'accepted' : 'declined' }\n          : quote\n      )\n    );\n  };\n\n  const isFormComplete = standardQuestions\n    .filter(q => q.required)\n    .every(q => answers[q.id]);\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Insurance Questionnaire Section */}\n      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200\">\n        <div className=\"p-6 border-b border-gray-200\">\n          <div className=\"flex items-start justify-between\">\n            <div>\n              <h2 className=\"text-xl font-semibold text-gray-900\">\n                Insurance Questionnaire\n              </h2>\n              <p className=\"text-sm text-gray-600 mt-1\">\n                Answer these questions once. Your responses will be reusable across all assignments.\n              </p>\n            </div>\n            <span className=\"px-3 py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded-full\">\n              Reusable\n            </span>\n          </div>\n        </div>\n\n        <div className=\"p-6 space-y-6\">\n          {standardQuestions.map((question) => (\n            <div key={question.id} className=\"space-y-2\">\n              <label className=\"block text-sm font-medium text-gray-900\">\n                {question.question}\n                {question.required && (\n                  <span className=\"text-red-500 ml-1\">*</span>\n                )}\n              </label>\n\n              {question.type === 'boolean' && (\n                <div className=\"flex gap-4\">\n                  <label className=\"flex items-center cursor-pointer\">\n                    <input\n                      type=\"radio\"\n                      name={question.id}\n                      value=\"yes\"\n                      checked={answers[question.id] === 'yes'}\n                      onChange={(e) => handleAnswerChange(question.id, e.target.value)}\n                      className=\"w-4 h-4 text-teal-600 focus:ring-teal-500\"\n                    />\n                    <span className=\"ml-2 text-sm text-gray-700\">Yes</span>\n                  </label>\n                  <label className=\"flex items-center cursor-pointer\">\n                    <input\n                      type=\"radio\"\n                      name={question.id}\n                      value=\"no\"\n                      checked={answers[question.id] === 'no'}\n                      onChange={(e) => handleAnswerChange(question.id, e.target.value)}\n                      className=\"w-4 h-4 text-teal-600 focus:ring-teal-500\"\n                    />\n                    <span className=\"ml-2 text-sm text-gray-700\">No</span>\n                  </label>\n                </div>\n              )}\n\n              {question.type === 'text' && (\n                <input\n                  type=\"text\"\n                  value={answers[question.id] || ''}\n                  onChange={(e) => handleAnswerChange(question.id, e.target.value)}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\n                  placeholder=\"Enter your answer\"\n                />\n              )}\n\n              {question.type === 'select' && question.options && (\n                <select\n                  value={answers[question.id] || ''}\n                  onChange={(e) => handleAnswerChange(question.id, e.target.value)}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\n                >\n                  <option value=\"\">Select an option</option>\n                  {question.options.map((option) => (\n                    <option key={option} value={option}>\n                      {option}\n                    </option>\n                  ))}\n                </select>\n              )}\n\n              {question.type === 'textarea' && (\n                <textarea\n                  value={answers[question.id] || ''}\n                  onChange={(e) => handleAnswerChange(question.id, e.target.value)}\n                  rows={3}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm resize-none\"\n                  placeholder=\"Provide details\"\n                />\n              )}\n\n              {question.type === 'date' && (\n                <input\n                  type=\"date\"\n                  value={answers[question.id] || ''}\n                  onChange={(e) => handleAnswerChange(question.id, e.target.value)}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\n                />\n              )}\n            </div>\n          ))}\n\n          <div className=\"flex items-center justify-between pt-4 border-t border-gray-200\">\n            <div className=\"text-sm text-gray-600\">\n              {isFormComplete ? (\n                <span className=\"flex items-center text-green-600\">\n                  <i className=\"ri-checkbox-circle-fill mr-2\"></i>\n                  All required questions answered\n                </span>\n              ) : (\n                <span className=\"flex items-center text-amber-600\">\n                  <i className=\"ri-error-warning-fill mr-2\"></i>\n                  Please answer all required questions\n                </span>\n              )}\n            </div>\n            <button\n              onClick={handleSaveAnswers}\n              disabled={!isFormComplete}\n              className=\"px-6 py-2 bg-teal-600 text-white text-sm font-medium rounded-lg hover:bg-teal-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors whitespace-nowrap\"\n            >\n              {isSaved ? (\n                <span className=\"flex items-center\">\n                  <i className=\"ri-check-line mr-2\"></i>\n                  Saved\n                </span>\n              ) : (\n                'Save Answers'\n              )}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Insurance Quotes Section */}\n      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200\">\n        <div className=\"p-6 border-b border-gray-200\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">\n            Insurance Quotes\n          </h2>\n          <p className=\"text-sm text-gray-600 mt-1\">\n            Review and respond to insurance quotes from providers\n          </p>\n        </div>\n\n        <div className=\"p-6\">\n          {quotes.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <i className=\"ri-file-shield-2-line text-3xl text-gray-400\"></i>\n              </div>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n                No quotes yet\n              </h3>\n              <p className=\"text-sm text-gray-600\">\n                Insurance providers will submit quotes based on your questionnaire responses\n              </p>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {quotes.map((quote) => (\n                <div\n                  key={quote.id}\n                  className={`border rounded-lg p-6 ${\n                    quote.status === 'accepted'\n                      ? 'border-green-200 bg-green-50'\n                      : quote.status === 'declined'\n                      ? 'border-gray-200 bg-gray-50'\n                      : 'border-gray-200 bg-white'\n                  }`}\n                >\n                  <div className=\"flex items-start justify-between mb-4\">\n                    <div>\n                      <h3 className=\"text-lg font-semibold text-gray-900\">\n                        {quote.provider}\n                      </h3>\n                      {quote.assignmentTitle && (\n                        <p className=\"text-sm text-gray-600 mt-1\">\n                          For: {quote.assignmentTitle}\n                        </p>\n                      )}\n                      <p className=\"text-xs text-gray-500 mt-1\">\n                        Submitted: {new Date(quote.submittedDate).toLocaleDateString()}\n                      </p>\n                    </div>\n                    <span\n                      className={`px-3 py-1 text-xs font-medium rounded-full whitespace-nowrap ${\n                        quote.status === 'pending'\n                          ? 'bg-amber-100 text-amber-700'\n                          : quote.status === 'accepted'\n                          ? 'bg-green-100 text-green-700'\n                          : 'bg-gray-100 text-gray-700'\n                      }`}\n                    >\n                      {quote.status === 'pending'\n                        ? 'Pending Review'\n                        : quote.status === 'accepted'\n                        ? 'Accepted'\n                        : 'Declined'}\n                    </span>\n                  </div>\n\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4\">\n                    <div>\n                      <p className=\"text-xs text-gray-600 mb-1\">Coverage Type</p>\n                      <p className=\"text-sm font-medium text-gray-900\">\n                        {quote.coverageType}\n                      </p>\n                    </div>\n                    <div>\n                      <p className=\"text-xs text-gray-600 mb-1\">Coverage Amount</p>\n                      <p className=\"text-sm font-medium text-gray-900\">\n                        {quote.coverageAmount}\n                      </p>\n                    </div>\n                    <div>\n                      <p className=\"text-xs text-gray-600 mb-1\">Premium</p>\n                      <p className=\"text-sm font-medium text-teal-600\">\n                        {quote.premium}\n                      </p>\n                    </div>\n                    <div>\n                      <p className=\"text-xs text-gray-600 mb-1\">Deductible</p>\n                      <p className=\"text-sm font-medium text-gray-900\">\n                        {quote.deductible}\n                      </p>\n                    </div>\n                  </div>\n\n                  <div className=\"mb-4\">\n                    <p className=\"text-xs text-gray-600 mb-1\">Coverage Period</p>\n                    <p className=\"text-sm text-gray-900\">\n                      {new Date(quote.effectiveDate).toLocaleDateString()} -{' '}\n                      {new Date(quote.expirationDate).toLocaleDateString()}\n                    </p>\n                  </div>\n\n                  <div className=\"mb-4 p-4 bg-gray-50 rounded-lg\">\n                    <p className=\"text-xs text-gray-600 mb-2\">Quote Details</p>\n                    <p className=\"text-sm text-gray-700\">{quote.details}</p>\n                  </div>\n\n                  {quote.status === 'pending' && (\n                    <div className=\"flex gap-3\">\n                      <button\n                        onClick={() => handleQuoteAction(quote.id, 'accept')}\n                        className=\"flex-1 px-4 py-2 bg-teal-600 text-white text-sm font-medium rounded-lg hover:bg-teal-700 transition-colors whitespace-nowrap\"\n                      >\n                        <i className=\"ri-check-line mr-2\"></i>\n                        Accept Quote\n                      </button>\n                      <button\n                        onClick={() => handleQuoteAction(quote.id, 'decline')}\n                        className=\"flex-1 px-4 py-2 bg-white border border-gray-300 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-50 transition-colors whitespace-nowrap\"\n                      >\n                        <i className=\"ri-close-line mr-2\"></i>\n                        Decline Quote\n                      </button>\n                    </div>\n                  )}\n\n                  {quote.status === 'accepted' && (\n                    <div className=\"flex items-center text-sm text-green-700\">\n                      <i className=\"ri-checkbox-circle-fill mr-2\"></i>\n                      You accepted this quote\n                    </div>\n                  )}\n\n                  {quote.status === 'declined' && (\n                    <div className=\"flex items-center text-sm text-gray-600\">\n                      <i className=\"ri-close-circle-fill mr-2\"></i>\n                      You declined this quote\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import type { \n  Vendor, \n  InsuranceQuote, \n  TravelQuote, \n  ServiceRequest, \n  VendorPerformanceMetrics,\n  VendorDataAccess \n} from '../types/vendor';\n\n/**\n * Submit insurance request and share verified profile with approved vendors\n */\nexport const submitInsuranceRequest = (\n  physicianId: string,\n  assignmentId: string,\n  requestDetails: any\n): ServiceRequest => {\n  const request: ServiceRequest = {\n    id: `request-${Date.now()}`,\n    type: 'insurance',\n    physicianId,\n    physicianName: 'Current Physician',\n    assignmentId,\n    status: 'submitted',\n    requestDetails,\n    profileShared: true,\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n    auditLog: [\n      {\n        timestamp: new Date().toISOString(),\n        action: 'request_created',\n        actor: physicianId,\n        details: `Insurance request submitted for assignment ${assignmentId}`\n      },\n      {\n        timestamp: new Date().toISOString(),\n        action: 'profile_shared',\n        actor: 'system',\n        details: 'Verified profile automatically shared with approved insurance vendors'\n      }\n    ]\n  };\n\n  console.log('Insurance request submitted:', request);\n  return request;\n};\n\n/**\n * Submit travel request tied to specific assignment\n */\nexport const submitTravelRequest = (\n  physicianId: string,\n  assignmentId: string,\n  requestDetails: any\n): ServiceRequest => {\n  const request: ServiceRequest = {\n    id: `request-${Date.now()}`,\n    type: 'travel',\n    physicianId,\n    physicianName: 'Current Physician',\n    assignmentId,\n    status: 'submitted',\n    requestDetails,\n    profileShared: true,\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n    auditLog: [\n      {\n        timestamp: new Date().toISOString(),\n        action: 'request_created',\n        actor: physicianId,\n        details: `Travel request submitted for assignment ${assignmentId}`\n      },\n      {\n        timestamp: new Date().toISOString(),\n        action: 'profile_shared',\n        actor: 'system',\n        details: 'Travel preferences shared with approved travel vendors'\n      }\n    ]\n  };\n\n  console.log('Travel request submitted:', request);\n  return request;\n};\n\n/**\n * Vendor requests additional information from physician\n */\nexport const requestAdditionalInfo = (\n  requestId: string,\n  vendorId: string,\n  questions: string[]\n): ServiceRequest => {\n  const updatedRequest = {\n    additionalInfoRequested: {\n      requestedAt: new Date().toISOString(),\n      requestedBy: vendorId,\n      questions\n    },\n    status: 'vendor_reviewing' as const,\n    updatedAt: new Date().toISOString()\n  };\n\n  console.log('Additional info requested:', { requestId, vendorId, questions });\n  return updatedRequest as any;\n};\n\n/**\n * Physician responds to vendor's additional info request\n */\nexport const respondToAdditionalInfoRequest = (\n  requestId: string,\n  physicianId: string,\n  responses: any\n): void => {\n  const auditEntry = {\n    timestamp: new Date().toISOString(),\n    action: 'additional_info_provided',\n    actor: physicianId,\n    details: 'Physician responded to vendor information request'\n  };\n\n  console.log('Additional info provided:', { requestId, responses, auditEntry });\n};\n\n/**\n * Vendor submits quote (insurance or travel)\n */\nexport const submitQuote = (\n  requestId: string,\n  vendorId: string,\n  quoteDetails: Partial<InsuranceQuote | TravelQuote>\n): InsuranceQuote | TravelQuote => {\n  const quote = {\n    id: `quote-${Date.now()}`,\n    requestId,\n    vendorId,\n    status: 'submitted' as const,\n    submittedAt: new Date().toISOString(),\n    ...quoteDetails\n  };\n\n  // Calculate platform fee (15%)\n  const serviceCost = (quoteDetails as any).premium || (quoteDetails as any).totalServiceCost || 0;\n  const platformFee = serviceCost * 0.15;\n  const totalCost = serviceCost + platformFee;\n\n  const finalQuote = {\n    ...quote,\n    platformFee,\n    totalCost\n  };\n\n  console.log('Quote submitted:', finalQuote);\n  \n  // Trigger notification to physician\n  notifyPhysicianQuoteReceived(requestId, vendorId);\n\n  return finalQuote as any;\n};\n\n/**\n * Physician accepts quote\n */\nexport const acceptQuote = (\n  quoteId: string,\n  physicianId: string,\n  requestId: string\n): void => {\n  const timestamp = new Date().toISOString();\n\n  console.log('Quote accepted:', {\n    quoteId,\n    physicianId,\n    requestId,\n    timestamp,\n    status: 'accepted'\n  });\n\n  // Update service request status\n  updateServiceRequestStatus(requestId, 'accepted');\n\n  // Log transaction for platform fee collection\n  logPlatformFeeTransaction(quoteId, physicianId);\n\n  // Notify vendor of acceptance\n  notifyVendorQuoteAccepted(quoteId);\n};\n\n/**\n * Physician declines quote\n */\nexport const declineQuote = (\n  quoteId: string,\n  physicianId: string,\n  reason?: string\n): void => {\n  console.log('Quote declined:', {\n    quoteId,\n    physicianId,\n    reason,\n    timestamp: new Date().toISOString(),\n    status: 'declined'\n  });\n\n  // Notify vendor of decline\n  notifyVendorQuoteDeclined(quoteId, reason);\n};\n\n/**\n * Update service request status\n */\nexport const updateServiceRequestStatus = (\n  requestId: string,\n  status: ServiceRequest['status']\n): void => {\n  console.log('Service request status updated:', {\n    requestId,\n    status,\n    timestamp: new Date().toISOString()\n  });\n};\n\n/**\n * Mark service as completed\n */\nexport const completeService = (\n  requestId: string,\n  vendorId: string\n): void => {\n  const timestamp = new Date().toISOString();\n\n  console.log('Service completed:', {\n    requestId,\n    vendorId,\n    completedAt: timestamp\n  });\n\n  // Update vendor performance metrics\n  updateVendorPerformance(vendorId, 'service_completed');\n};\n\n/**\n * Calculate vendor performance metrics\n */\nexport const calculateVendorPerformance = (\n  vendorId: string,\n  quotes: any[],\n  services: any[]\n): VendorPerformanceMetrics => {\n  const totalQuotes = quotes.length;\n  const acceptedQuotes = quotes.filter(q => q.status === 'accepted').length;\n  const completedServices = services.filter(s => s.status === 'completed').length;\n  \n  const quoteAcceptanceRate = totalQuotes > 0 ? (acceptedQuotes / totalQuotes) * 100 : 0;\n  const serviceCompletionRate = acceptedQuotes > 0 ? (completedServices / acceptedQuotes) * 100 : 0;\n\n  const totalRevenue = services.reduce((sum, s) => sum + (s.totalServiceCost || 0), 0);\n  const platformFees = totalRevenue * 0.15;\n\n  const avgResponseTimes = quotes.map(q => {\n    const requested = new Date(q.requestedAt || Date.now());\n    const submitted = new Date(q.submittedAt);\n    return (submitted.getTime() - requested.getTime()) / (1000 * 60 * 60); // hours\n  });\n  const averageResponseTime = avgResponseTimes.length > 0 \n    ? avgResponseTimes.reduce((a, b) => a + b, 0) / avgResponseTimes.length \n    : 0;\n\n  return {\n    vendorId,\n    vendorName: 'Vendor Name',\n    type: 'insurance',\n    averageResponseTime,\n    quoteAcceptanceRate,\n    serviceCompletionRate,\n    averageRating: 4.5,\n    totalQuotesSubmitted: totalQuotes,\n    totalQuotesAccepted: acceptedQuotes,\n    totalServicesCompleted: completedServices,\n    revenueGenerated: totalRevenue,\n    platformFeesCollected: platformFees,\n    lastActivityDate: new Date().toISOString(),\n    reliabilityTrend: 'stable',\n    flaggedIssues: 0,\n    customerSatisfaction: 90\n  };\n};\n\n/**\n * Update vendor performance after action\n */\nexport const updateVendorPerformance = (\n  vendorId: string,\n  action: 'quote_submitted' | 'quote_accepted' | 'service_completed' | 'issue_flagged'\n): void => {\n  console.log('Vendor performance updated:', {\n    vendorId,\n    action,\n    timestamp: new Date().toISOString()\n  });\n};\n\n/**\n * Log platform fee transaction (15%)\n */\nexport const logPlatformFeeTransaction = (\n  quoteId: string,\n  physicianId: string\n): void => {\n  console.log('Platform fee transaction logged:', {\n    quoteId,\n    physicianId,\n    feePercentage: 15,\n    timestamp: new Date().toISOString()\n  });\n};\n\n/**\n * Track vendor data access\n */\nexport const logVendorDataAccess = (\n  vendorId: string,\n  physicianId: string,\n  dataAccessed: string[],\n  purpose: string\n): VendorDataAccess => {\n  const access: VendorDataAccess = {\n    vendorId,\n    physicianId,\n    dataShared: dataAccessed,\n    sharedAt: new Date().toISOString(),\n    sharedBy: 'system',\n    purpose,\n    accessLog: [\n      {\n        timestamp: new Date().toISOString(),\n        action: 'data_shared',\n        dataAccessed\n      }\n    ]\n  };\n\n  console.log('Vendor data access logged:', access);\n  return access;\n};\n\n/**\n * Revoke vendor data access\n */\nexport const revokeVendorDataAccess = (\n  vendorId: string,\n  physicianId: string\n): void => {\n  console.log('Vendor data access revoked:', {\n    vendorId,\n    physicianId,\n    revokedAt: new Date().toISOString()\n  });\n};\n\n/**\n * Notification helpers\n */\nconst notifyPhysicianQuoteReceived = (requestId: string, vendorId: string): void => {\n  console.log('Notification sent: Quote received', { requestId, vendorId });\n};\n\nconst notifyVendorQuoteAccepted = (quoteId: string): void => {\n  console.log('Notification sent: Quote accepted', { quoteId });\n};\n\nconst notifyVendorQuoteDeclined = (quoteId: string, reason?: string): void => {\n  console.log('Notification sent: Quote declined', { quoteId, reason });\n};\n\n/**\n * Validate vendor eligibility\n */\nexport const isVendorEligible = (vendor: Vendor): boolean => {\n  return (\n    vendor.status === 'approved' &&\n    vendor.reliabilityScore >= 80 &&\n    vendor.averageResponseTime <= 24\n  );\n};\n\n/**\n * Get vendor reliability trend\n */\nexport const getVendorReliabilityTrend = (\n  currentScore: number,\n  previousScore: number\n): 'improving' | 'stable' | 'declining' => {\n  const difference = currentScore - previousScore;\n  if (difference > 2) return 'improving';\n  if (difference < -2) return 'declining';\n  return 'stable';\n};\n","import { useState } from 'react';\nimport type { ServiceRequest, InsuranceQuote, TravelQuote } from '../../../types/vendor';\nimport { \n  mockServiceRequests, \n  mockInsuranceQuotes, \n  mockTravelQuotes,\n  getServiceRequestsByPhysician,\n  getInsuranceQuotesByRequest,\n  getTravelQuotesByRequest\n} from '../../../mocks/vendors';\nimport {\n  submitInsuranceRequest,\n  submitTravelRequest,\n  acceptQuote,\n  declineQuote\n} from '../../../utils/vendorManager';\n\nexport default function ThirdPartyServices() {\n  const physicianId = 'physician-001'; // Current logged-in physician\n  \n  const [requests, setRequests] = useState<ServiceRequest[]>(\n    getServiceRequestsByPhysician(physicianId)\n  );\n  const [insuranceQuotes] = useState<InsuranceQuote[]>(mockInsuranceQuotes);\n  const [travelQuotes] = useState<TravelQuote[]>(mockTravelQuotes);\n  const [showNewRequestModal, setShowNewRequestModal] = useState(false);\n  const [dataOptIn, setDataOptIn] = useState(true);\n  const [requestType, setRequestType] = useState<'insurance' | 'travel'>('insurance');\n  \n  // Insurance request form\n  const [insuranceForm, setInsuranceForm] = useState({\n    assignmentId: '',\n    coverageType: 'Claims-Made',\n    coverageAmount: 1000000,\n    specialty: 'Emergency Medicine',\n    statesLicensed: [] as string[],\n    priorClaims: false,\n    additionalRequirements: ''\n  });\n\n  // Travel request form\n  const [travelForm, setTravelForm] = useState({\n    assignmentId: '',\n    serviceType: 'full_package' as 'flight' | 'hotel' | 'car_rental' | 'full_package',\n    departureCity: '',\n    destinationCity: '',\n    departureDate: '',\n    returnDate: '',\n    flightClass: 'Economy Plus',\n    hotelType: 'Extended Stay',\n    carRental: false,\n    airlinePreference: '',\n    hotelChain: '',\n    specialRequests: ''\n  });\n\n  /** ------------------------------------------------------------\n   *  Handlers\n   * ------------------------------------------------------------ */\n  const handleAcceptQuote = (quoteId: string, requestId: string, quoteType: 'insurance' | 'travel') => {\n    acceptQuote(quoteId, physicianId, requestId);\n    \n    // Update request status\n    setRequests(prev => prev.map(req => \n      req.id === requestId ? { ...req, status: 'accepted', quoteId, purchasedAt: new Date().toISOString() } : req\n    ));\n\n    alert(`Quote accepted! ${quoteType === 'insurance' ? 'Insurance coverage' : 'Travel arrangements'} will be processed.`);\n  };\n\n  const handleDeclineQuote = (quoteId: string, quoteType: 'insurance' | 'travel') => {\n    const reason = prompt('Optional: Provide a reason for declining this quote');\n    declineQuote(quoteId, physicianId, reason || undefined);\n    alert('Quote declined. The vendor has been notified.');\n  };\n\n  const handleSubmitInsuranceRequest = () => {\n    if (!dataOptIn) {\n      alert('Please authorize data sharing with approved vendors');\n      return;\n    }\n\n    if (!insuranceForm.assignmentId) {\n      alert('Please select an assignment');\n      return;\n    }\n\n    const request = submitInsuranceRequest(\n      physicianId,\n      insuranceForm.assignmentId,\n      insuranceForm\n    );\n\n    setRequests(prev => [request, ...prev]);\n    setShowNewRequestModal(false);\n    \n    // Reset form\n    setInsuranceForm({\n      assignmentId: '',\n      coverageType: 'Claims-Made',\n      coverageAmount: 1000000,\n      specialty: 'Emergency Medicine',\n      statesLicensed: [],\n      priorClaims: false,\n      additionalRequirements: ''\n    });\n\n    alert('Insurance request submitted! Approved vendors will review your profile and submit quotes within 24-48 hours.');\n  };\n\n  const handleSubmitTravelRequest = () => {\n    if (!dataOptIn) {\n      alert('Please authorize data sharing with approved vendors');\n      return;\n    }\n\n    if (!travelForm.assignmentId || !travelForm.departureCity || !travelForm.destinationCity) {\n      alert('Please fill in all required fields');\n      return;\n    }\n\n    const request = submitTravelRequest(\n      physicianId,\n      travelForm.assignmentId,\n      {\n        serviceType: travelForm.serviceType,\n        departureCity: travelForm.departureCity,\n        destinationCity: travelForm.destinationCity,\n        travelDates: {\n          departure: travelForm.departureDate,\n          return: travelForm.returnDate\n        },\n        preferences: {\n          flightClass: travelForm.flightClass,\n          hotelType: travelForm.hotelType,\n          carRental: travelForm.carRental,\n          airlinePreference: travelForm.airlinePreference,\n          hotelChain: travelForm.hotelChain,\n          specialRequests: travelForm.specialRequests\n        }\n      }\n    );\n\n    setRequests(prev => [request, ...prev]);\n    setShowNewRequestModal(false);\n    \n    // Reset form\n    setTravelForm({\n      assignmentId: '',\n      serviceType: 'full_package',\n      departureCity: '',\n      destinationCity: '',\n      departureDate: '',\n      returnDate: '',\n      flightClass: 'Economy Plus',\n      hotelType: 'Extended Stay',\n      carRental: false,\n      airlinePreference: '',\n      hotelChain: '',\n      specialRequests: ''\n    });\n\n    alert('Travel request submitted! Approved vendors will review your preferences and submit quotes within 24-48 hours.');\n  };\n\n  /** ------------------------------------------------------------\n   *  UI helpers\n   * ------------------------------------------------------------ */\n  const getRequestIcon = (type: 'insurance' | 'travel') => {\n    return type === 'insurance' ? 'ri-shield-check-line' : 'ri-flight-takeoff-line';\n  };\n\n  const getRequestLabel = (type: 'insurance' | 'travel') => {\n    return type === 'insurance' ? 'Malpractice Insurance' : 'Travel & Lodging';\n  };\n\n  const getStatusColor = (status: ServiceRequest['status']) => {\n    switch (status) {\n      case 'draft': return 'bg-gray-100 text-gray-700';\n      case 'submitted': return 'bg-blue-100 text-blue-700';\n      case 'vendor_reviewing': return 'bg-purple-100 text-purple-700';\n      case 'quote_received': return 'bg-teal-100 text-teal-700';\n      case 'accepted': return 'bg-green-100 text-green-700';\n      case 'in_progress': return 'bg-indigo-100 text-indigo-700';\n      case 'completed': return 'bg-emerald-100 text-emerald-700';\n      case 'cancelled': return 'bg-red-100 text-red-700';\n      default: return 'bg-gray-100 text-gray-700';\n    }\n  };\n\n  const getStatusLabel = (status: ServiceRequest['status']) => {\n    switch (status) {\n      case 'draft': return 'Draft';\n      case 'submitted': return 'Submitted';\n      case 'vendor_reviewing': return 'Under Review';\n      case 'quote_received': return 'Quote Received';\n      case 'accepted': return 'Accepted';\n      case 'in_progress': return 'In Progress';\n      case 'completed': return 'Completed';\n      case 'cancelled': return 'Cancelled';\n      default: return status;\n    }\n  };\n\n  const formatCurrency = (amount: number) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0\n    }).format(amount);\n  };\n\n  /** ------------------------------------------------------------\n   *  Render\n   * ------------------------------------------------------------ */\n  return (\n    <div className=\"space-y-8\">\n      {/* Privacy Opt‑In Notice */}\n      <div className=\"bg-teal-50 border border-teal-200 rounded-lg p-6\">\n        <div className=\"flex items-start\">\n          <div className=\"flex-shrink-0\">\n            <i className=\"ri-shield-check-line text-2xl text-teal-600\"></i>\n          </div>\n          <div className=\"ml-4 flex-1\">\n            <h3 className=\"text-sm font-semibold text-teal-900 mb-2\">\n              Secure Data Sharing\n            </h3>\n            <p className=\"text-sm text-teal-800 mb-4\">\n              Your verified profile and preferences are only shared with approved third‑party vendors when you explicitly request services. All vendors are vetted and monitored by the platform.\n            </p>\n            <label className=\"flex items-start cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={dataOptIn}\n                onChange={(e) => setDataOptIn(e.target.checked)}\n                className=\"w-4 h-4 text-teal-600 focus:ring-teal-500 rounded mt-0.5\"\n              />\n              <span className=\"ml-3 text-sm text-teal-900\">\n                I authorize the platform to securely share my verified profile with approved vendors only when I request services. Platform fee: 15% of service cost.\n              </span>\n            </label>\n          </div>\n        </div>\n      </div>\n\n      {/* Request Service Buttons */}\n      <div className=\"flex gap-4\">\n        <button\n          onClick={() => {\n            setRequestType('insurance');\n            setShowNewRequestModal(true);\n          }}\n          disabled={!dataOptIn}\n          className=\"flex-1 px-6 py-4 bg-white border-2 border-teal-600 text-teal-600 font-medium rounded-lg hover:bg-teal-50 disabled:bg-gray-100 disabled:border-gray-300 disabled:text-gray-400 disabled:cursor-not-allowed transition-colors\"\n        >\n          <i className=\"ri-shield-check-line text-xl mr-2\"></i>\n          Request Insurance Quote\n        </button>\n        <button\n          onClick={() => {\n            setRequestType('travel');\n            setShowNewRequestModal(true);\n          }}\n          disabled={!dataOptIn}\n          className=\"flex-1 px-6 py-4 bg-white border-2 border-teal-600 text-teal-600 font-medium rounded-lg hover:bg-teal-50 disabled:bg-gray-100 disabled:border-gray-300 disabled:text-gray-400 disabled:cursor-not-allowed transition-colors\"\n        >\n          <i className=\"ri-flight-takeoff-line text-xl mr-2\"></i>\n          Request Travel Services\n        </button>\n      </div>\n\n      {/* Service Requests List */}\n      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200\">\n        <div className=\"p-6 border-b border-gray-200\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">Service Requests</h2>\n          <p className=\"text-sm text-gray-600 mt-1\">\n            Track insurance and travel service requests tied to your assignments\n          </p>\n        </div>\n\n        <div className=\"p-6\">\n          {requests.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <i className=\"ri-customer-service-2-line text-3xl text-gray-400\"></i>\n              </div>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n                No service requests yet\n              </h3>\n              <p className=\"text-sm text-gray-600\">\n                Request malpractice insurance or travel services for your assignments\n              </p>\n            </div>\n          ) : (\n            <div className=\"space-y-6\">\n              {requests.map((request) => {\n                const requestInsuranceQuotes = request.type === 'insurance' \n                  ? getInsuranceQuotesByRequest(request.id)\n                  : [];\n                const requestTravelQuotes = request.type === 'travel'\n                  ? getTravelQuotesByRequest(request.id)\n                  : [];\n\n                return (\n                  <div\n                    key={request.id}\n                    className=\"border border-gray-200 rounded-lg p-6 bg-white hover:shadow-md transition-shadow\"\n                  >\n                    {/* Request Header */}\n                    <div className=\"flex items-start justify-between mb-4\">\n                      <div className=\"flex items-start\">\n                        <div className=\"w-12 h-12 bg-teal-100 rounded-lg flex items-center justify-center flex-shrink-0\">\n                          <i\n                            className={`${getRequestIcon(request.type)} text-2xl text-teal-600`}\n                          ></i>\n                        </div>\n                        <div className=\"ml-4\">\n                          <h3 className=\"text-base font-semibold text-gray-900\">\n                            {getRequestLabel(request.type)}\n                          </h3>\n                          {request.assignmentDetails && (\n                            <>\n                              <p className=\"text-sm text-gray-600 mt-1\">\n                                {request.assignmentDetails.facilityName}\n                              </p>\n                              <p className=\"text-xs text-gray-500 mt-1\">\n                                {request.assignmentDetails.location} • {request.assignmentDetails.startDate} to {request.assignmentDetails.endDate}\n                              </p>\n                            </>\n                          )}\n                          <p className=\"text-xs text-gray-500 mt-2\">\n                            Requested: {new Date(request.createdAt).toLocaleDateString()}\n                          </p>\n                        </div>\n                      </div>\n\n                      <span className={`px-3 py-1 text-xs font-medium rounded-full whitespace-nowrap ${getStatusColor(request.status)}`}>\n                        {getStatusLabel(request.status)}\n                      </span>\n                    </div>\n\n                    {/* Profile Shared Notice */}\n                    {request.profileShared && (\n                      <div className=\"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\n                        <div className=\"flex items-start\">\n                          <i className=\"ri-shield-check-line text-blue-600 mt-0.5 mr-2\"></i>\n                          <div>\n                            <p className=\"text-xs font-medium text-blue-900\">\n                              Verified Profile Shared Securely\n                            </p>\n                            <p className=\"text-xs text-blue-700 mt-1\">\n                              Your profile has been shared with approved {request.type} vendors\n                            </p>\n                          </div>\n                        </div>\n                      </div>\n                    )}\n\n                    {/* Insurance Quotes */}\n                    {request.type === 'insurance' && requestInsuranceQuotes.length > 0 && (\n                      <div className=\"space-y-3 mt-4 pt-4 border-t border-gray-200\">\n                        <h4 className=\"text-sm font-semibold text-gray-900\">\n                          Insurance Quotes ({requestInsuranceQuotes.length})\n                        </h4>\n                        {requestInsuranceQuotes.map((quote) => (\n                          <div\n                            key={quote.id}\n                            className=\"border-2 border-teal-200 rounded-lg p-4 bg-teal-50\"\n                          >\n                            <div className=\"flex items-start justify-between mb-3\">\n                              <div>\n                                <h5 className=\"text-sm font-semibold text-gray-900\">\n                                  {quote.vendorName}\n                                </h5>\n                                <p className=\"text-xs text-gray-600 mt-1\">\n                                  {quote.coverageType} • {formatCurrency(quote.coverageAmount)} Coverage\n                                </p>\n                                <p className=\"text-xs text-gray-500 mt-1\">\n                                  Submitted: {new Date(quote.submittedAt).toLocaleDateString()}\n                                </p>\n                              </div>\n                              <div className=\"text-right\">\n                                <p className=\"text-xs text-gray-600\">Premium</p>\n                                <p className=\"text-lg font-bold text-teal-600\">\n                                  {formatCurrency(quote.premium)}\n                                </p>\n                                <p className=\"text-xs text-gray-500 mt-1\">\n                                  + {formatCurrency(quote.platformFee)} platform fee\n                                </p>\n                                <p className=\"text-xs font-semibold text-gray-900 mt-1\">\n                                  Total: {formatCurrency(quote.totalCost)}\n                                </p>\n                              </div>\n                            </div>\n\n                            <div className=\"grid grid-cols-2 gap-3 mb-3 text-xs\">\n                              <div>\n                                <span className=\"text-gray-600\">Policy Term:</span>\n                                <span className=\"ml-2 font-medium text-gray-900\">{quote.policyTerm}</span>\n                              </div>\n                              <div>\n                                <span className=\"text-gray-600\">Deductible:</span>\n                                <span className=\"ml-2 font-medium text-gray-900\">{formatCurrency(quote.deductible)}</span>\n                              </div>\n                              <div className=\"col-span-2\">\n                                <span className=\"text-gray-600\">Coverage Period:</span>\n                                <span className=\"ml-2 font-medium text-gray-900\">\n                                  {new Date(quote.coverageStartDate).toLocaleDateString()} - {new Date(quote.coverageEndDate).toLocaleDateString()}\n                                </span>\n                              </div>\n                            </div>\n\n                            {quote.additionalBenefits.length > 0 && (\n                              <div className=\"mb-3\">\n                                <p className=\"text-xs font-medium text-gray-900 mb-1\">Benefits:</p>\n                                <ul className=\"text-xs text-gray-700 space-y-1\">\n                                  {quote.additionalBenefits.map((benefit, idx) => (\n                                    <li key={idx} className=\"flex items-start\">\n                                      <i className=\"ri-check-line text-green-600 mr-1 mt-0.5\"></i>\n                                      {benefit}\n                                    </li>\n                                  ))}\n                                </ul>\n                              </div>\n                            )}\n\n                            {quote.notes && (\n                              <p className=\"text-xs text-gray-700 mb-3 italic\">\n                                Note: {quote.notes}\n                              </p>\n                            )}\n\n                            {quote.status === 'submitted' && (\n                              <div className=\"flex gap-3\">\n                                <button\n                                  onClick={() => handleAcceptQuote(quote.id, request.id, 'insurance')}\n                                  className=\"flex-1 px-4 py-2 bg-teal-600 text-white text-sm font-medium rounded-lg hover:bg-teal-700 transition-colors whitespace-nowrap\"\n                                >\n                                  <i className=\"ri-check-line mr-2\"></i>\n                                  Accept Quote\n                                </button>\n                                <button\n                                  onClick={() => handleDeclineQuote(quote.id, 'insurance')}\n                                  className=\"flex-1 px-4 py-2 bg-white border border-gray-300 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-50 transition-colors whitespace-nowrap\"\n                                >\n                                  <i className=\"ri-close-line mr-2\"></i>\n                                  Decline\n                                </button>\n                              </div>\n                            )}\n\n                            {quote.status === 'accepted' && (\n                              <div className=\"flex items-center text-sm text-green-700 bg-green-100 px-3 py-2 rounded-lg\">\n                                <i className=\"ri-checkbox-circle-fill mr-2\"></i>\n                                Coverage purchased - Policy will be active on {new Date(quote.coverageStartDate).toLocaleDateString()}\n                              </div>\n                            )}\n                          </div>\n                        ))}\n                      </div>\n                    )}\n\n                    {/* Travel Quotes */}\n                    {request.type === 'travel' && requestTravelQuotes.length > 0 && (\n                      <div className=\"space-y-3 mt-4 pt-4 border-t border-gray-200\">\n                        <h4 className=\"text-sm font-semibold text-gray-900\">\n                          Travel Quotes ({requestTravelQuotes.length})\n                        </h4>\n                        {requestTravelQuotes.map((quote) => (\n                          <div\n                            key={quote.id}\n                            className=\"border-2 border-blue-200 rounded-lg p-4 bg-blue-50\"\n                          >\n                            <div className=\"flex items-start justify-between mb-3\">\n                              <div>\n                                <h5 className=\"text-sm font-semibold text-gray-900\">\n                                  {quote.vendorName}\n                                </h5>\n                                <p className=\"text-xs text-gray-600 mt-1 capitalize\">\n                                  {quote.serviceType.replace('_', ' ')} Package\n                                </p>\n                                <p className=\"text-xs text-gray-500 mt-1\">\n                                  Submitted: {new Date(quote.submittedAt).toLocaleDateString()}\n                                </p>\n                              </div>\n                              <div className=\"text-right\">\n                                <p className=\"text-xs text-gray-600\">Service Cost</p>\n                                <p className=\"text-lg font-bold text-blue-600\">\n                                  {formatCurrency(quote.totalServiceCost)}\n                                </p>\n                                <p className=\"text-xs text-gray-500 mt-1\">\n                                  + {formatCurrency(quote.platformFee)} platform fee\n                                </p>\n                                <p className=\"text-xs font-semibold text-gray-900 mt-1\">\n                                  Total: {formatCurrency(quote.totalCost)}\n                                </p>\n                              </div>\n                            </div>\n\n                            {/* Flight Details */}\n                            {quote.flightDetails && (\n                              <div className=\"mb-3 p-3 bg-white rounded-lg\">\n                                <p className=\"text-xs font-medium text-gray-900 mb-2 flex items-center\">\n                                  <i className=\"ri-flight-takeoff-line mr-1\"></i>\n                                  Flight Details\n                                </p>\n                                <div className=\"text-xs text-gray-700 space-y-1\">\n                                  <p><span className=\"font-medium\">Route:</span> {quote.flightDetails.departure} → {quote.flightDetails.arrival}</p>\n                                  <p><span className=\"font-medium\">Dates:</span> {new Date(quote.flightDetails.departureDate).toLocaleDateString()} - {new Date(quote.flightDetails.returnDate).toLocaleDateString()}</p>\n                                  <p><span className=\"font-medium\">Airline:</span> {quote.flightDetails.airline} ({quote.flightDetails.flightNumber})</p>\n                                  <p><span className=\"font-medium\">Class:</span> {quote.flightDetails.class} • {formatCurrency(quote.flightDetails.price)}</p>\n                                </div>\n                              </div>\n                            )}\n\n                            {/* Hotel Details */}\n                            {quote.hotelDetails && (\n                              <div className=\"mb-3 p-3 bg-white rounded-lg\">\n                                <p className=\"text-xs font-medium text-gray-900 mb-2 flex items-center\">\n                                  <i className=\"ri-hotel-line mr-1\"></i>\n                                  Hotel Details\n                                </p>\n                                <div className=\"text-xs text-gray-700 space-y-1\">\n                                  <p><span className=\"font-medium\">Hotel:</span> {quote.hotelDetails.name}</p>\n                                  <p><span className=\"font-medium\">Address:</span> {quote.hotelDetails.address}</p>\n                                  <p><span className=\"font-medium\">Dates:</span> {new Date(quote.hotelDetails.checkIn).toLocaleDateString()} - {new Date(quote.hotelDetails.checkOut).toLocaleDateString()}</p>\n                                  <p><span className=\"font-medium\">Room:</span> {quote.hotelDetails.roomType} • {quote.hotelDetails.totalNights} nights</p>\n                                  <p><span className=\"font-medium\">Price:</span> {formatCurrency(quote.hotelDetails.pricePerNight)}/night • Total: {formatCurrency(quote.hotelDetails.totalPrice)}</p>\n                                </div>\n                              </div>\n                            )}\n\n                            {/* Car Rental Details */}\n                            {quote.carRentalDetails && (\n                              <div className=\"mb-3 p-3 bg-white rounded-lg\">\n                                <p className=\"text-xs font-medium text-gray-900 mb-2 flex items-center\">\n                                  <i className=\"ri-car-line mr-1\"></i>\n                                  Car Rental Details\n                                </p>\n                                <div className=\"text-xs text-gray-700 space-y-1\">\n                                  <p><span className=\"font-medium\">Company:</span> {quote.carRentalDetails.company}</p>\n                                  <p><span className=\"font-medium\">Vehicle:</span> {quote.carRentalDetails.vehicleType}</p>\n                                  <p><span className=\"font-medium\">Dates:</span> {new Date(quote.carRentalDetails.pickupDate).toLocaleDateString()} - {new Date(quote.carRentalDetails.returnDate).toLocaleDateString()}</p>\n                                  <p><span className=\"font-medium\">Price:</span> {formatCurrency(quote.carRentalDetails.price)}</p>\n                                </div>\n                              </div>\n                            )}\n\n                            {quote.notes && (\n                              <p className=\"text-xs text-gray-700 mb-3 italic\">\n                                Note: {quote.notes}\n                              </p>\n                            )}\n\n                            {quote.status === 'submitted' && (\n                              <div className=\"flex gap-3\">\n                                <button\n                                  onClick={() => handleAcceptQuote(quote.id, request.id, 'travel')}\n                                  className=\"flex-1 px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap\"\n                                >\n                                  <i className=\"ri-check-line mr-2\"></i>\n                                  Accept Quote\n                                </button>\n                                <button\n                                  onClick={() => handleDeclineQuote(quote.id, 'travel')}\n                                  className=\"flex-1 px-4 py-2 bg-white border border-gray-300 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-50 transition-colors whitespace-nowrap\"\n                                >\n                                  <i className=\"ri-close-line mr-2\"></i>\n                                  Decline\n                                </button>\n                              </div>\n                            )}\n\n                            {quote.status === 'accepted' && (\n                              <div className=\"flex items-center text-sm text-green-700 bg-green-100 px-3 py-2 rounded-lg\">\n                                <i className=\"ri-checkbox-circle-fill mr-2\"></i>\n                                Travel arrangements confirmed - Vendor will fulfill independently\n                              </div>\n                            )}\n                          </div>\n                        ))}\n                      </div>\n                    )}\n\n                    {/* Audit Log */}\n                    {request.auditLog && request.auditLog.length > 0 && (\n                      <details className=\"mt-4 pt-4 border-t border-gray-200\">\n                        <summary className=\"text-xs font-medium text-gray-600 cursor-pointer hover:text-gray-900\">\n                          View Activity Log ({request.auditLog.length} events)\n                        </summary>\n                        <div className=\"mt-3 space-y-2\">\n                          {request.auditLog.map((log, idx) => (\n                            <div key={idx} className=\"text-xs text-gray-600 flex items-start\">\n                              <i className=\"ri-time-line mr-2 mt-0.5\"></i>\n                              <div>\n                                <span className=\"font-medium\">{log.action.replace(/_/g, ' ')}</span>\n                                <span className=\"mx-2\">•</span>\n                                <span>{log.details}</span>\n                                <span className=\"mx-2\">•</span>\n                                <span className=\"text-gray-500\">{new Date(log.timestamp).toLocaleString()}</span>\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      </details>\n                    )}\n                  </div>\n                );\n              })}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* New Request Modal */}\n      {showNewRequestModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6 border-b border-gray-200 flex items-center justify-between sticky top-0 bg-white z-10\">\n              <h3 className=\"text-xl font-semibold text-gray-900\">\n                {requestType === 'insurance' ? 'Request Insurance Quote' : 'Request Travel Services'}\n              </h3>\n              <button\n                onClick={() => setShowNewRequestModal(false)}\n                className=\"w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600 transition-colors\"\n              >\n                <i className=\"ri-close-line text-2xl\"></i>\n              </button>\n            </div>\n\n            <div className=\"p-6 space-y-6\">\n              {/* Insurance Request Form */}\n              {requestType === 'insurance' && (\n                <>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-900 mb-2\">\n                      Assignment <span className=\"text-red-500\">*</span>\n                    </label>\n                    <select\n                      value={insuranceForm.assignmentId}\n                      onChange={(e) => setInsuranceForm(prev => ({ ...prev, assignmentId: e.target.value }))}\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\n                    >\n                      <option value=\"\">Select an assignment</option>\n                      <option value=\"assignment-001\">Emergency Medicine - Boston General Hospital (Jul 1 - Sep 30)</option>\n                      <option value=\"assignment-002\">Internal Medicine - City Medical Center (Aug 15 - Nov 15)</option>\n                    </select>\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-900 mb-2\">\n                        Coverage Type\n                      </label>\n                      <select\n                        value={insuranceForm.coverageType}\n                        onChange={(e) => setInsuranceForm(prev => ({ ...prev, coverageType: e.target.value }))}\n                        className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\n                      >\n                        <option value=\"Claims-Made\">Claims-Made Policy</option>\n                        <option value=\"Occurrence\">Occurrence Policy</option>\n                        <option value=\"Per-Diem\">Per-Diem Policy</option>\n                      </select>\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-900 mb-2\">\n                        Coverage Amount\n                      </label>\n                      <select\n                        value={insuranceForm.coverageAmount}\n                        onChange={(e) => setInsuranceForm(prev => ({ ...prev, coverageAmount: Number(e.target.value) }))}\n                        className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\n                      >\n                        <option value={1000000}>$1,000,000</option>\n                        <option value={2000000}>$2,000,000</option>\n                        <option value={3000000}>$3,000,000</option>\n                      </select>\n                    </div>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-900 mb-2\">\n                      Prior Claims\n                    </label>\n                    <div className=\"flex gap-4\">\n                      <label className=\"flex items-center cursor-pointer\">\n                        <input\n                          type=\"radio\"\n                          checked={!insuranceForm.priorClaims}\n                          onChange={() => setInsuranceForm(prev => ({ ...prev, priorClaims: false }))}\n                          className=\"w-4 h-4 text-teal-600 focus:ring-teal-500\"\n                        />\n                        <span className=\"ml-2 text-sm text-gray-700\">No prior claims</span>\n                      </label>\n                      <label className=\"flex items-center cursor-pointer\">\n                        <input\n                          type=\"radio\"\n                          checked={insuranceForm.priorClaims}\n                          onChange={() => setInsuranceForm(prev => ({ ...prev, priorClaims: true }))}\n                          className=\"w-4 h-4 text-teal-600 focus:ring-teal-500\"\n                        />\n                        <span className=\"ml-2 text-sm text-gray-700\">Have prior claims</span>\n                      </label>\n                    </div>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-900 mb-2\">\n                      Additional Requirements\n                    </label>\n                    <textarea\n                      value={insuranceForm.additionalRequirements}\n                      onChange={(e) => setInsuranceForm(prev => ({ ...prev, additionalRequirements: e.target.value }))}\n                      rows={3}\n                      placeholder=\"e.g., Need tail coverage, multi-state coverage, specific policy features...\"\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm resize-none\"\n                    ></textarea>\n                  </div>\n                </>\n              )}\n\n              {/* Travel Request Form */}\n              {requestType === 'travel' && (\n                <>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-900 mb-2\">\n                      Assignment <span className=\"text-red-500\">*</span>\n                    </label>\n                    <select\n                      value={travelForm.assignmentId}\n                      onChange={(e) => setTravelForm(prev => ({ ...prev, assignmentId: e.target.value }))}\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\n                    >\n                      <option value=\"\">Select an assignment</option>\n                      <option value=\"assignment-001\">Emergency Medicine - Boston General Hospital (Jul 1 - Sep 30)</option>\n                      <option value=\"assignment-002\">Internal Medicine - City Medical Center (Aug 15 - Nov 15)</option>\n                    </select>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-900 mb-2\">\n                      Service Type\n                    </label>\n                    <div className=\"grid grid-cols-4 gap-3\">\n                      {[\n                        { value: 'full_package', label: 'Full Package', icon: 'ri-suitcase-line' },\n                        { value: 'flight', label: 'Flight Only', icon: 'ri-flight-takeoff-line' },\n                        { value: 'hotel', label: 'Hotel Only', icon: 'ri-hotel-line' },\n                        { value: 'car_rental', label: 'Car Rental', icon: 'ri-car-line' }\n                      ].map((type) => (\n                        <button\n                          key={type.value}\n                          type=\"button\"\n                          onClick={() => setTravelForm(prev => ({ ...prev, serviceType: type.value as any }))}\n                          className={`p-3 border-2 rounded-lg text-center transition-all ${\n                            travelForm.serviceType === type.value\n                              ? 'border-teal-600 bg-teal-50'\n                              : 'border-gray-200 hover:border-gray-300'\n                          }`}\n                        >\n                          <i className={`${type.icon} text-xl ${travelForm.serviceType === type.value ? 'text-teal-600' : 'text-gray-400'}`}></i>\n                          <p className={`text-xs font-medium mt-1 ${travelForm.serviceType === type.value ? 'text-teal-900' : 'text-gray-700'}`}>\n                            {type.label}\n                          </p>\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-900 mb-2\">\n                        Departure City <span className=\"text-red-500\">*</span>\n                      </label>\n                      <input\n                        type=\"text\"\n                        value={travelForm.departureCity}\n                        onChange={(e) => setTravelForm(prev => ({ ...prev, departureCity: e.target.value }))}\n                        placeholder=\"e.g., Los Angeles\"\n                        className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-900 mb-2\">\n                        Destination City <span className=\"text-red-500\">*</span>\n                      </label>\n                      <input\n                        type=\"text\"\n                        value={travelForm.destinationCity}\n                        onChange={(e) => setTravelForm(prev => ({ ...prev, destinationCity: e.target.value }))}\n                        placeholder=\"e.g., Boston\"\n                        className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-900 mb-2\">\n                        Departure Date\n                      </label>\n                      <input\n                        type=\"date\"\n                        value={travelForm.departureDate}\n                        onChange={(e) => setTravelForm(prev => ({ ...prev, departureDate: e.target.value }))}\n                        className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-900 mb-2\">\n                        Return Date\n                      </label>\n                      <input\n                        type=\"date\"\n                        value={travelForm.returnDate}\n                        onChange={(e) => setTravelForm(prev => ({ ...prev, returnDate: e.target.value }))}\n                        className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-900 mb-2\">\n                        Flight Class Preference\n                      </label>\n                      <select\n                        value={travelForm.flightClass}\n                        onChange={(e) => setTravelForm(prev => ({ ...prev, flightClass: e.target.value }))}\n                        className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\n                      >\n                        <option value=\"Economy\">Economy</option>\n                        <option value=\"Economy Plus\">Economy Plus</option>\n                        <option value=\"Business\">Business</option>\n                        <option value=\"First\">First Class</option>\n                      </select>\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-900 mb-2\">\n                        Hotel Type Preference\n                      </label>\n                      <select\n                        value={travelForm.hotelType}\n                        onChange={(e) => setTravelForm(prev => ({ ...prev, hotelType: e.target.value }))}\n                        className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\n                      >\n                        <option value=\"Standard\">Standard</option>\n                        <option value=\"Extended Stay\">Extended Stay</option>\n                        <option value=\"Luxury\">Luxury</option>\n                      </select>\n                    </div>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-900 mb-2\">\n                      Special Requests\n                    </label>\n                    <textarea\n                      value={travelForm.specialRequests}\n                      onChange={(e) => setTravelForm(prev => ({ ...prev, specialRequests: e.target.value }))}\n                      rows={3}\n                      placeholder=\"e.g., Airline loyalty program, hotel chain preference, parking needs, accessibility requirements...\"\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm resize-none\"\n                    ></textarea>\n                  </div>\n                </>\n              )}\n\n              {/* Information notice */}\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                <div className=\"flex items-start\">\n                  <i className=\"ri-information-line text-blue-600 mt-0.5 mr-3 flex-shrink-0\"></i>\n                  <div>\n                    <p className=\"text-sm text-blue-900 font-medium mb-1\">\n                      Vendor Service Notice\n                    </p>\n                    <p className=\"text-sm text-blue-800\">\n                      Services are provided by approved third‑party vendors. The platform monitors vendor performance but does not directly provide, underwrite, or guarantee these services. A 15% platform fee applies to all vendor services.\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Modal actions */}\n            <div className=\"p-6 border-t border-gray-200 flex gap-3 sticky bottom-0 bg-white\">\n              <button\n                onClick={() => setShowNewRequestModal(false)}\n                className=\"flex-1 px-6 py-3 bg-white border border-gray-300 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-50 transition-colors whitespace-nowrap\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={requestType === 'insurance' ? handleSubmitInsuranceRequest : handleSubmitTravelRequest}\n                className=\"flex-1 px-6 py-3 bg-teal-600 text-white text-sm font-medium rounded-lg hover:bg-teal-700 transition-colors whitespace-nowrap\"\n              >\n                Submit Request\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","// Job Browse and Application Component for Physician Dashboard\n\nimport { useState, useEffect } from 'react';\nimport type { JobPosting, Application, OverlapCheck } from '../../../types/application';\nimport { \n  checkDateOverlap, \n  createProfileSnapshot,\n  calculateReviewDeadline,\n  createCalendarBlock,\n  validateJobRequirements,\n  getDeviceInfo,\n  getIPAddress\n} from '../../../utils/applicationMatcher';\nimport { mockJobPostings, mockApplications, mockCalendarBlocks } from '../../../mocks/applications';\nimport { useProfileCompletion } from '../../../hooks/useProfileCompletion';\n\ninterface JobBrowseProps {\n  physicianId: string;\n}\n\nexport default function JobBrowse({ physicianId }: JobBrowseProps) {\n  const { profile, isProfileComplete, completionPercentage } = useProfileCompletion();\n  const [jobPostings, setJobPostings] = useState<JobPosting[]>(mockJobPostings);\n  const [applications, setApplications] = useState<Application[]>(mockApplications);\n  const [calendarBlocks, setCalendarBlocks] = useState(mockCalendarBlocks);\n  const [selectedJob, setSelectedJob] = useState<JobPosting | null>(null);\n  const [showApplicationModal, setShowApplicationModal] = useState(false);\n  const [applicationError, setApplicationError] = useState<string>('');\n  const [filterSpecialty, setFilterSpecialty] = useState<string>('all');\n  const [sortBy, setSortBy] = useState<'date' | 'pay'>('date');\n\n  // Filter and sort job postings\n  const filteredJobs = jobPostings\n    .filter(job => job.status === 'open')\n    .filter(job => filterSpecialty === 'all' || job.specialty === filterSpecialty)\n    .sort((a, b) => {\n      if (sortBy === 'date') {\n        return new Date(a.startDate).getTime() - new Date(b.startDate).getTime();\n      }\n      return b.payAmount - a.payAmount;\n    });\n\n  // Get unique specialties for filter\n  const specialties = Array.from(new Set(jobPostings.map(job => job.specialty)));\n\n  const handleApplyClick = (job: JobPosting) => {\n    setSelectedJob(job);\n    setApplicationError('');\n    \n    // Check profile completion\n    if (!isProfileComplete) {\n      setApplicationError(`Profile incomplete (${completionPercentage}% complete). You must complete all required sections before applying.`);\n      setShowApplicationModal(true);\n      return;\n    }\n\n    setShowApplicationModal(true);\n  };\n\n  const handleSubmitApplication = async () => {\n    if (!selectedJob || !profile) return;\n\n    try {\n      // Final profile check\n      if (!isProfileComplete) {\n        setApplicationError(`Cannot apply. Profile is only ${completionPercentage}% complete. Please complete all required sections.`);\n        return;\n      }\n\n      // Check for date overlaps\n      const overlapCheck: OverlapCheck = checkDateOverlap(\n        physicianId,\n        selectedJob.startDate,\n        selectedJob.endDate,\n        applications,\n        calendarBlocks\n      );\n\n      if (overlapCheck.hasOverlap) {\n        setApplicationError('Cannot apply. You have overlapping applications or assignments for these dates.');\n        return;\n      }\n\n      // Get IP and device info\n      const ipAddress = await getIPAddress();\n      const deviceInfo = getDeviceInfo();\n\n      // Create profile snapshot from real profile data\n      const profileSnapshot = {\n        personalInfo: {\n          legalName: profile.personalIdentifiers \n            ? `${profile.personalIdentifiers.firstName} ${profile.personalIdentifiers.lastName}`\n            : 'Unknown',\n          dateOfBirth: profile.personalIdentifiers?.dateOfBirth || '',\n          ssnLastFour: profile.personalIdentifiers?.ssnLastFour || '',\n          contactInfo: {\n            phone: profile.personalIdentifiers?.phoneNumber || '',\n            email: '',\n            address: profile.personalIdentifiers?.address || {\n              line1: '',\n              line2: '',\n              city: '',\n              state: '',\n              zipCode: ''\n            }\n          }\n        },\n        professionalInfo: {\n          npiNumber: profile.professionalInformation?.npiNumber || '',\n          deaNumber: profile.professionalInformation?.deaNumber || '',\n          specialty: profile.professionalInformation?.specialty || '',\n          subspecialty: profile.professionalInformation?.subspecialty || '',\n          yearsExperience: profile.professionalInformation?.yearsExperience || 0,\n          boardCertified: profile.professionalInformation?.boardCertified || false\n        },\n        licenses: profile.licenses || [],\n        documents: profile.documents || [],\n        questionnaires: profile.questionnaires || [],\n        digitalSignature: profile.digitalSignature || null,\n        capturedAt: new Date().toISOString(),\n        ipAddress,\n        deviceInfo\n      };\n\n      // Calculate review deadline (72 hours)\n      const appliedAt = new Date();\n      const reviewDeadline = calculateReviewDeadline(appliedAt, 72);\n\n      // Create application\n      const newApplication: Application = {\n        id: `app_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n        jobPostingId: selectedJob.id,\n        physicianId,\n        physicianName: profileSnapshot.personalInfo.legalName,\n        physicianSpecialty: profileSnapshot.professionalInfo.specialty,\n        status: 'pending',\n        appliedAt: appliedAt.toISOString(),\n        reviewDeadline,\n        calendarBlocked: true,\n        blockedDates: {\n          startDate: selectedJob.startDate,\n          endDate: selectedJob.endDate\n        },\n        profileSnapshot,\n        notificationsSent: {\n          applicationReceived: false,\n          reminderSent: false,\n          deadlineWarning: false,\n          decision: false\n        }\n      };\n\n      // Create calendar block\n      const calendarBlock = createCalendarBlock(\n        physicianId,\n        newApplication.id,\n        selectedJob.id,\n        selectedJob.startDate,\n        selectedJob.endDate,\n        reviewDeadline\n      );\n\n      // Update state\n      setApplications([...applications, newApplication]);\n      setCalendarBlocks([...calendarBlocks, calendarBlock]);\n\n      // Send notifications (would be handled by backend)\n      console.log('Application submitted:', newApplication);\n      console.log('Calendar blocked:', calendarBlock);\n      console.log('Facility notification sent');\n      console.log('Physician confirmation sent');\n\n      // Close modal\n      setShowApplicationModal(false);\n      setSelectedJob(null);\n\n      // Show success message\n      alert('Application submitted successfully! The facility has 72 hours to review. Your calendar has been blocked for these dates.');\n\n    } catch (error) {\n      console.error('Application error:', error);\n      setApplicationError('An error occurred while submitting your application. Please try again.');\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric'\n    });\n  };\n\n  const formatCurrency = (amount: number) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0\n    }).format(amount);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Profile Eligibility Warning */}\n      {!isProfileComplete && (\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n          <div className=\"flex items-start gap-3\">\n            <i className=\"ri-error-warning-line text-xl text-red-600 mt-0.5\"></i>\n            <div className=\"flex-1\">\n              <h3 className=\"font-semibold text-red-900 mb-1\">Profile Incomplete - Cannot Apply</h3>\n              <p className=\"text-sm text-red-700 mb-2\">\n                You must complete your profile before applying to assignments. Your profile is currently {completionPercentage}% complete.\n              </p>\n              <p className=\"text-sm text-red-600 font-medium\">\n                Complete all required sections to unlock the ability to apply.\n              </p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Filters and Sort */}\n      <div className=\"bg-white rounded-lg border border-gray-200 p-4\">\n        <div className=\"flex flex-wrap gap-4 items-center justify-between\">\n          <div className=\"flex items-center gap-4\">\n            <div>\n              <label className=\"text-sm font-medium text-gray-700 mb-1 block\">Specialty</label>\n              <select\n                value={filterSpecialty}\n                onChange={(e) => setFilterSpecialty(e.target.value)}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-teal-500\"\n              >\n                <option value=\"all\">All Specialties</option>\n                {specialties.map(specialty => (\n                  <option key={specialty} value={specialty}>{specialty}</option>\n                ))}\n              </select>\n            </div>\n            <div>\n              <label className=\"text-sm font-medium text-gray-700 mb-1 block\">Sort By</label>\n              <select\n                value={sortBy}\n                onChange={(e) => setSortBy(e.target.value as 'date' | 'pay')}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-teal-500\"\n              >\n                <option value=\"date\">Start Date</option>\n                <option value=\"pay\">Pay Amount</option>\n              </select>\n            </div>\n          </div>\n          <div className=\"text-sm text-gray-600\">\n            {filteredJobs.length} {filteredJobs.length === 1 ? 'assignment' : 'assignments'} available\n          </div>\n        </div>\n      </div>\n\n      {/* Job Listings */}\n      <div className=\"space-y-4\">\n        {filteredJobs.map(job => (\n          <div key={job.id} className=\"bg-white rounded-lg border border-gray-200 p-6 hover:border-teal-500 transition-colors\">\n            <div className=\"flex items-start justify-between mb-4\">\n              <div className=\"flex-1\">\n                <div className=\"flex items-center gap-3 mb-2\">\n                  <h3 className=\"text-lg font-semibold text-gray-900\">{job.facilityName}</h3>\n                  <span className=\"px-3 py-1 bg-teal-100 text-teal-700 text-xs font-medium rounded-full whitespace-nowrap\">\n                    {job.specialty}\n                  </span>\n                  {job.subspecialty && (\n                    <span className=\"px-3 py-1 bg-gray-100 text-gray-700 text-xs font-medium rounded-full whitespace-nowrap\">\n                      {job.subspecialty}\n                    </span>\n                  )}\n                </div>\n                <div className=\"flex items-center gap-4 text-sm text-gray-600\">\n                  <div className=\"flex items-center gap-1\">\n                    <i className=\"ri-calendar-line\"></i>\n                    <span>{formatDate(job.startDate)} - {formatDate(job.endDate)}</span>\n                  </div>\n                  <div className=\"flex items-center gap-1\">\n                    <i className=\"ri-time-line\"></i>\n                    <span>{job.blockDuration} days</span>\n                  </div>\n                  <div className=\"flex items-center gap-1\">\n                    <i className=\"ri-map-pin-line\"></i>\n                    <span>{job.requiredLicenses.join(', ')} license required</span>\n                  </div>\n                </div>\n              </div>\n              <div className=\"text-right\">\n                <div className=\"text-2xl font-bold text-teal-600 mb-1\">{formatCurrency(job.payAmount)}</div>\n                <div className=\"text-xs text-gray-500\">Total compensation</div>\n              </div>\n            </div>\n\n            <div className=\"mb-4\">\n              <p className=\"text-sm text-gray-700 line-clamp-2\">{job.requirements}</p>\n            </div>\n\n            <div className=\"flex items-center gap-4 mb-4 text-sm\">\n              <div className=\"flex items-center gap-2\">\n                <i className={`ri-shield-check-line ${job.malpracticeIncluded ? 'text-green-600' : 'text-gray-400'}`}></i>\n                <span className={job.malpracticeIncluded ? 'text-green-700' : 'text-gray-500'}>\n                  Malpractice {job.malpracticeIncluded ? 'Included' : 'Not Included'}\n                </span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <i className={`ri-flight-takeoff-line ${job.travelIncluded ? 'text-green-600' : 'text-gray-400'}`}></i>\n                <span className={job.travelIncluded ? 'text-green-700' : 'text-gray-500'}>\n                  Travel {job.travelIncluded ? 'Included' : 'Not Included'}\n                </span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <i className={`ri-hotel-line ${job.lodgingIncluded ? 'text-green-600' : 'text-gray-400'}`}></i>\n                <span className={job.lodgingIncluded ? 'text-green-700' : 'text-gray-500'}>\n                  Lodging {job.lodgingIncluded ? 'Included' : 'Not Included'}\n                </span>\n              </div>\n            </div>\n\n            <div className=\"flex items-center justify-between pt-4 border-t border-gray-200\">\n              <div className=\"text-xs text-gray-500\">\n                Posted {formatDate(job.createdAt)}\n              </div>\n              <button\n                onClick={() => handleApplyClick(job)}\n                disabled={!isProfileComplete}\n                className={`px-6 py-2 rounded-lg font-medium whitespace-nowrap transition-colors ${\n                  isProfileComplete\n                    ? 'bg-teal-600 text-white hover:bg-teal-700 cursor-pointer'\n                    : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                }`}\n              >\n                {isProfileComplete ? 'Apply Now' : 'Complete Profile to Apply'}\n              </button>\n            </div>\n          </div>\n        ))}\n\n        {filteredJobs.length === 0 && (\n          <div className=\"bg-white rounded-lg border border-gray-200 p-12 text-center\">\n            <i className=\"ri-briefcase-line text-5xl text-gray-300 mb-4\"></i>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No assignments found</h3>\n            <p className=\"text-gray-600\">Try adjusting your filters or check back later for new opportunities.</p>\n          </div>\n        )}\n      </div>\n\n      {/* Application Modal */}\n      {showApplicationModal && selectedJob && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6 border-b border-gray-200\">\n              <div className=\"flex items-center justify-between\">\n                <h2 className=\"text-xl font-bold text-gray-900\">Apply to Assignment</h2>\n                <button\n                  onClick={() => {\n                    setShowApplicationModal(false);\n                    setSelectedJob(null);\n                    setApplicationError('');\n                  }}\n                  className=\"w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600 transition-colors\"\n                >\n                  <i className=\"ri-close-line text-xl\"></i>\n                </button>\n              </div>\n            </div>\n\n            <div className=\"p-6 space-y-6\">\n              {/* Error Message */}\n              {applicationError && (\n                <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n                  <div className=\"flex items-start gap-3\">\n                    <i className=\"ri-error-warning-line text-xl text-red-600\"></i>\n                    <div>\n                      <h4 className=\"font-semibold text-red-900 mb-1\">Cannot Submit Application</h4>\n                      <p className=\"text-sm text-red-700\">{applicationError}</p>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* Job Details */}\n              <div>\n                <h3 className=\"font-semibold text-gray-900 mb-3\">Assignment Details</h3>\n                <div className=\"bg-gray-50 rounded-lg p-4 space-y-2\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-sm text-gray-600\">Facility:</span>\n                    <span className=\"text-sm font-medium text-gray-900\">{selectedJob.facilityName}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-sm text-gray-600\">Specialty:</span>\n                    <span className=\"text-sm font-medium text-gray-900\">{selectedJob.specialty}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-sm text-gray-600\">Dates:</span>\n                    <span className=\"text-sm font-medium text-gray-900\">\n                      {formatDate(selectedJob.startDate)} - {formatDate(selectedJob.endDate)}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-sm text-gray-600\">Compensation:</span>\n                    <span className=\"text-sm font-medium text-teal-600\">{formatCurrency(selectedJob.payAmount)}</span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Application Terms */}\n              {isProfileComplete && (\n                <div>\n                  <h3 className=\"font-semibold text-gray-900 mb-3\">Application Terms</h3>\n                  <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 space-y-3 text-sm\">\n                    <div className=\"flex items-start gap-2\">\n                      <i className=\"ri-information-line text-blue-600 mt-0.5\"></i>\n                      <p className=\"text-blue-900\">\n                        <strong>Calendar Block:</strong> These dates will be automatically blocked on your calendar upon submission.\n                      </p>\n                    </div>\n                    <div className=\"flex items-start gap-2\">\n                      <i className=\"ri-time-line text-blue-600 mt-0.5\"></i>\n                      <p className=\"text-blue-900\">\n                        <strong>Review Period:</strong> The facility has 72 hours to review your application.\n                      </p>\n                    </div>\n                    <div className=\"flex items-start gap-2\">\n                      <i className=\"ri-lock-line text-blue-600 mt-0.5\"></i>\n                      <p className=\"text-blue-900\">\n                        <strong>Temporary Lock:</strong> You cannot apply to overlapping assignments during the review period.\n                      </p>\n                    </div>\n                    <div className=\"flex items-start gap-2\">\n                      <i className=\"ri-refresh-line text-blue-600 mt-0.5\"></i>\n                      <p className=\"text-blue-900\">\n                        <strong>Auto-Expiration:</strong> If the facility doesn't respond within 72 hours, your application will expire and dates will be unblocked.\n                      </p>\n                    </div>\n                    <div className=\"flex items-start gap-2\">\n                      <i className=\"ri-file-text-line text-blue-600 mt-0.5\"></i>\n                      <p className=\"text-blue-900\">\n                        <strong>Profile Sharing:</strong> Your complete verified profile will be shared with the facility upon submission.\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            <div className=\"p-6 border-t border-gray-200 flex gap-3\">\n              <button\n                onClick={() => {\n                  setShowApplicationModal(false);\n                  setSelectedJob(null);\n                  setApplicationError('');\n                }}\n                className=\"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors whitespace-nowrap\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSubmitApplication}\n                disabled={!isProfileComplete}\n                className={`flex-1 px-6 py-3 rounded-lg font-medium whitespace-nowrap transition-colors ${\n                  isProfileComplete\n                    ? 'bg-teal-600 text-white hover:bg-teal-700 cursor-pointer'\n                    : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                }`}\n              >\n                Submit Application\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useState, useEffect, useMemo } from 'react';\nimport { supabase } from '../../../utils/supabaseClient';\n\ninterface CalendarEvent {\n  id: string;\n  startDate: Date;\n  endDate: Date;\n  blockType: 'assignment' | 'personal_block' | 'travel_buffer' | 'available';\n  visibility: 'private' | 'public';\n  assignmentId?: string;\n  facilityName?: string;\n  assignmentTitle?: string;\n  notes?: string;\n  isBufferDay?: boolean;\n}\n\ninterface PhysicianCalendarProps {\n  physicianId: string;\n}\n\nexport default function PhysicianCalendar({ physicianId }: PhysicianCalendarProps) {\n  const [currentDate, setCurrentDate] = useState(new Date());\n  const [events, setEvents] = useState<CalendarEvent[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedDate, setSelectedDate] = useState<Date | null>(null);\n  const [showBlockModal, setShowBlockModal] = useState(false);\n  const [showEventDetails, setShowEventDetails] = useState(false);\n  const [selectedEvent, setSelectedEvent] = useState<CalendarEvent | null>(null);\n  const [blockForm, setBlockForm] = useState({\n    startDate: '',\n    endDate: '',\n    blockType: 'personal_block' as 'personal_block' | 'available',\n    visibility: 'private' as 'private' | 'public',\n    notes: ''\n  });\n  const [saving, setSaving] = useState(false);\n\n  // Fetch calendar events\n  useEffect(() => {\n    fetchCalendarEvents();\n  }, [physicianId]);\n\n  const fetchCalendarEvents = async () => {\n    setLoading(true);\n    try {\n      const { data: user } = await supabase.auth.getUser();\n      if (!user.user) return;\n\n      // Get physician profile\n      const { data: profile } = await supabase\n        .from('physician_profiles')\n        .select('id')\n        .eq('user_id', user.user.id)\n        .maybeSingle();\n\n      if (!profile) {\n        setLoading(false);\n        return;\n      }\n\n      // Fetch calendar entries\n      const { data: calendarData, error } = await supabase\n        .from('physician_calendar')\n        .select('*')\n        .eq('physician_id', profile.id)\n        .order('start_date', { ascending: true });\n\n      if (error) {\n        console.error('Error fetching calendar:', error);\n        setLoading(false);\n        return;\n      }\n\n      const mappedEvents: CalendarEvent[] = (calendarData || []).map(item => ({\n        id: item.id,\n        startDate: new Date(item.start_date),\n        endDate: new Date(item.end_date),\n        blockType: item.block_type,\n        visibility: item.visibility,\n        assignmentId: item.assignment_id,\n        facilityName: item.facility_name,\n        assignmentTitle: item.assignment_title,\n        notes: item.notes,\n        isBufferDay: item.is_buffer_day\n      }));\n\n      setEvents(mappedEvents);\n    } catch (err) {\n      console.error('Error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Calendar navigation\n  const goToPreviousMonth = () => {\n    setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 1));\n  };\n\n  const goToNextMonth = () => {\n    setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 1));\n  };\n\n  const goToToday = () => {\n    setCurrentDate(new Date());\n  };\n\n  // Get events for a specific date - MOVED BEFORE useMemo\n  const getEventsForDate = (date: Date): CalendarEvent[] => {\n    return events.filter(event => {\n      const eventStart = new Date(event.startDate);\n      const eventEnd = new Date(event.endDate);\n      eventStart.setHours(0, 0, 0, 0);\n      eventEnd.setHours(23, 59, 59, 999);\n      const checkDate = new Date(date);\n      checkDate.setHours(12, 0, 0, 0);\n      return checkDate >= eventStart && checkDate <= eventEnd;\n    });\n  };\n\n  // Generate calendar days\n  const calendarDays = useMemo(() => {\n    const year = currentDate.getFullYear();\n    const month = currentDate.getMonth();\n    const firstDay = new Date(year, month, 1);\n    const lastDay = new Date(year, month + 1, 0);\n    const startingDayOfWeek = firstDay.getDay();\n    const daysInMonth = lastDay.getDate();\n\n    const days: { date: Date; isCurrentMonth: boolean; events: CalendarEvent[] }[] = [];\n\n    // Previous month days\n    const prevMonthLastDay = new Date(year, month, 0).getDate();\n    for (let i = startingDayOfWeek - 1; i >= 0; i--) {\n      const date = new Date(year, month - 1, prevMonthLastDay - i);\n      days.push({ date, isCurrentMonth: false, events: getEventsForDate(date) });\n    }\n\n    // Current month days\n    for (let i = 1; i <= daysInMonth; i++) {\n      const date = new Date(year, month, i);\n      days.push({ date, isCurrentMonth: true, events: getEventsForDate(date) });\n    }\n\n    // Next month days\n    const remainingDays = 42 - days.length;\n    for (let i = 1; i <= remainingDays; i++) {\n      const date = new Date(year, month + 1, i);\n      days.push({ date, isCurrentMonth: false, events: getEventsForDate(date) });\n    }\n\n    return days;\n  }, [currentDate, events]);\n\n  // Get color for event type (for event tags)\n  const getEventColor = (event: CalendarEvent) => {\n    if (event.blockType === 'assignment') {\n      return 'bg-teal-500 text-white';\n    }\n    if (event.blockType === 'travel_buffer') {\n      return 'bg-amber-400 text-amber-900';\n    }\n    if (event.blockType === 'personal_block') {\n      return 'bg-red-400 text-white';\n    }\n    if (event.blockType === 'available') {\n      return event.visibility === 'public' ? 'bg-green-500 text-white' : 'bg-green-200 text-green-800';\n    }\n    return 'bg-gray-300 text-gray-800';\n  };\n\n  // Get background color for calendar day cell based on highest priority event\n  const getDayBackgroundColor = (dayEvents: CalendarEvent[]) => {\n    if (dayEvents.length === 0) return '';\n    \n    // Priority order: assignment > personal_block > travel_buffer > available\n    const hasAssignment = dayEvents.some(e => e.blockType === 'assignment');\n    const hasPersonalBlock = dayEvents.some(e => e.blockType === 'personal_block');\n    const hasTravelBuffer = dayEvents.some(e => e.blockType === 'travel_buffer');\n    const hasAvailablePublic = dayEvents.some(e => e.blockType === 'available' && e.visibility === 'public');\n    const hasAvailablePrivate = dayEvents.some(e => e.blockType === 'available' && e.visibility === 'private');\n    \n    if (hasAssignment) {\n      return 'bg-teal-100 border-l-4 border-teal-500';\n    }\n    if (hasPersonalBlock) {\n      return 'bg-red-100 border-l-4 border-red-500';\n    }\n    if (hasTravelBuffer) {\n      return 'bg-amber-100 border-l-4 border-amber-500';\n    }\n    if (hasAvailablePublic) {\n      return 'bg-green-100 border-l-4 border-green-500';\n    }\n    if (hasAvailablePrivate) {\n      return 'bg-green-50 border-l-4 border-green-300';\n    }\n    \n    return '';\n  };\n\n  // Handle date click\n  const handleDateClick = (date: Date, dayEvents: CalendarEvent[]) => {\n    setSelectedDate(date);\n    if (dayEvents.length > 0) {\n      setSelectedEvent(dayEvents[0]);\n      setShowEventDetails(true);\n    } else {\n      // Open block modal for empty dates\n      const dateStr = date.toISOString().split('T')[0];\n      setBlockForm({\n        startDate: dateStr,\n        endDate: dateStr,\n        blockType: 'personal_block',\n        visibility: 'private',\n        notes: ''\n      });\n      setShowBlockModal(true);\n    }\n  };\n\n  // Save calendar block\n  const handleSaveBlock = async () => {\n    setSaving(true);\n    try {\n      const { data: user } = await supabase.auth.getUser();\n      if (!user.user) return;\n\n      const { data: profile } = await supabase\n        .from('physician_profiles')\n        .select('id')\n        .eq('user_id', user.user.id)\n        .maybeSingle();\n\n      if (!profile) return;\n\n      const { error } = await supabase\n        .from('physician_calendar')\n        .insert({\n          physician_id: profile.id,\n          start_date: blockForm.startDate,\n          end_date: blockForm.endDate,\n          block_type: blockForm.blockType,\n          visibility: blockForm.visibility,\n          notes: blockForm.notes\n        });\n\n      if (error) {\n        console.error('Error saving block:', error);\n        return;\n      }\n\n      await fetchCalendarEvents();\n      setShowBlockModal(false);\n      setBlockForm({\n        startDate: '',\n        endDate: '',\n        blockType: 'personal_block',\n        visibility: 'private',\n        notes: ''\n      });\n    } catch (err) {\n      console.error('Error:', err);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // Delete calendar block\n  const handleDeleteBlock = async (eventId: string) => {\n    try {\n      const { error } = await supabase\n        .from('physician_calendar')\n        .delete()\n        .eq('id', eventId);\n\n      if (error) {\n        console.error('Error deleting block:', error);\n        return;\n      }\n\n      await fetchCalendarEvents();\n      setShowEventDetails(false);\n      setSelectedEvent(null);\n    } catch (err) {\n      console.error('Error:', err);\n    }\n  };\n\n  // Toggle visibility\n  const handleToggleVisibility = async (eventId: string, currentVisibility: string) => {\n    try {\n      const newVisibility = currentVisibility === 'private' ? 'public' : 'private';\n      const { error } = await supabase\n        .from('physician_calendar')\n        .update({ visibility: newVisibility })\n        .eq('id', eventId);\n\n      if (error) {\n        console.error('Error updating visibility:', error);\n        return;\n      }\n\n      await fetchCalendarEvents();\n      if (selectedEvent) {\n        setSelectedEvent({ ...selectedEvent, visibility: newVisibility as 'private' | 'public' });\n      }\n    } catch (err) {\n      console.error('Error:', err);\n    }\n  };\n\n  const monthNames = [\n    'January', 'February', 'March', 'April', 'May', 'June',\n    'July', 'August', 'September', 'October', 'November', 'December'\n  ];\n\n  const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n\n  const isToday = (date: Date) => {\n    const today = new Date();\n    return date.getDate() === today.getDate() &&\n      date.getMonth() === today.getMonth() &&\n      date.getFullYear() === today.getFullYear();\n  };\n\n  if (loading) {\n    return (\n      <div className=\"bg-white rounded-xl border border-gray-200 p-8 text-center\">\n        <i className=\"ri-loader-4-line text-4xl text-teal-600 animate-spin\"></i>\n        <p className=\"mt-4 text-gray-600\">Loading calendar...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900\">My Calendar</h2>\n          <p className=\"text-gray-600 mt-1\">Manage your assignments and availability</p>\n        </div>\n        <button\n          onClick={() => {\n            const today = new Date();\n            const dateStr = today.toISOString().split('T')[0];\n            setBlockForm({\n              startDate: dateStr,\n              endDate: dateStr,\n              blockType: 'personal_block',\n              visibility: 'private',\n              notes: ''\n            });\n            setShowBlockModal(true);\n          }}\n          className=\"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors flex items-center gap-2 whitespace-nowrap cursor-pointer\"\n        >\n          <i className=\"ri-add-line\"></i>\n          Block Dates\n        </button>\n      </div>\n\n      {/* Legend */}\n      <div className=\"bg-white rounded-xl border border-gray-200 p-4\">\n        <div className=\"space-y-3\">\n          <span className=\"text-sm font-semibold text-gray-900\">Calendar Color Legend:</span>\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-6 h-6 rounded bg-teal-100 border-l-4 border-teal-500\"></div>\n              <div className=\"flex-1\">\n                <span className=\"text-sm font-medium text-gray-900\">Confirmed Assignment</span>\n                <p className=\"text-xs text-gray-500\">Booked shifts</p>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-6 h-6 rounded bg-red-100 border-l-4 border-red-500\"></div>\n              <div className=\"flex-1\">\n                <span className=\"text-sm font-medium text-gray-900\">Personal Block</span>\n                <p className=\"text-xs text-gray-500\">Unavailable dates</p>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-6 h-6 rounded bg-amber-100 border-l-4 border-amber-500\"></div>\n              <div className=\"flex-1\">\n                <span className=\"text-sm font-medium text-gray-900\">Travel Buffer</span>\n                <p className=\"text-xs text-gray-500\">Auto-added between assignments</p>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-6 h-6 rounded bg-green-100 border-l-4 border-green-500\"></div>\n              <div className=\"flex-1\">\n                <span className=\"text-sm font-medium text-gray-900\">Available (Public)</span>\n                <p className=\"text-xs text-gray-500\">Visible to facilities</p>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-6 h-6 rounded bg-green-50 border-l-4 border-green-300\"></div>\n              <div className=\"flex-1\">\n                <span className=\"text-sm font-medium text-gray-900\">Available (Private)</span>\n                <p className=\"text-xs text-gray-500\">Only visible to you</p>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-6 h-6 rounded bg-teal-50 ring-2 ring-inset ring-teal-400\"></div>\n              <div className=\"flex-1\">\n                <span className=\"text-sm font-medium text-gray-900\">Today</span>\n                <p className=\"text-xs text-gray-500\">Current date</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Calendar */}\n      <div className=\"bg-white rounded-xl border border-gray-200 overflow-hidden\">\n        {/* Calendar Header */}\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-200 bg-gray-50\">\n          <div className=\"flex items-center gap-2\">\n            <button\n              onClick={goToPreviousMonth}\n              className=\"w-10 h-10 flex items-center justify-center hover:bg-gray-200 rounded-lg transition-colors cursor-pointer\"\n            >\n              <i className=\"ri-arrow-left-s-line text-xl text-gray-600\"></i>\n            </button>\n            <button\n              onClick={goToNextMonth}\n              className=\"w-10 h-10 flex items-center justify-center hover:bg-gray-200 rounded-lg transition-colors cursor-pointer\"\n            >\n              <i className=\"ri-arrow-right-s-line text-xl text-gray-600\"></i>\n            </button>\n          </div>\n          <h3 className=\"text-xl font-semibold text-gray-900\">\n            {monthNames[currentDate.getMonth()]} {currentDate.getFullYear()}\n          </h3>\n          <button\n            onClick={goToToday}\n            className=\"px-4 py-2 text-sm font-medium text-teal-600 hover:bg-teal-50 rounded-lg transition-colors cursor-pointer whitespace-nowrap\"\n          >\n            Today\n          </button>\n        </div>\n\n        {/* Day Headers */}\n        <div className=\"grid grid-cols-7 border-b border-gray-200\">\n          {dayNames.map(day => (\n            <div key={day} className=\"p-3 text-center text-sm font-medium text-gray-600 bg-gray-50\">\n              {day}\n            </div>\n          ))}\n        </div>\n\n        {/* Calendar Grid */}\n        <div className=\"grid grid-cols-7\">\n          {calendarDays.map((day, index) => {\n            const dayBgColor = getDayBackgroundColor(day.events);\n            return (\n              <div\n                key={index}\n                onClick={() => handleDateClick(day.date, day.events)}\n                className={`min-h-[100px] p-2 border-b border-r border-gray-100 cursor-pointer transition-colors hover:bg-opacity-80 ${\n                  !day.isCurrentMonth ? 'bg-gray-50 opacity-60' : ''\n                } ${isToday(day.date) && !dayBgColor ? 'bg-teal-50 ring-2 ring-inset ring-teal-400' : ''} ${dayBgColor}`}\n              >\n                <div className={`text-sm font-medium mb-1 ${\n                  !day.isCurrentMonth ? 'text-gray-400' : \n                  isToday(day.date) ? 'text-teal-700 font-bold' : 'text-gray-900'\n                }`}>\n                  {day.date.getDate()}\n                </div>\n                <div className=\"space-y-1\">\n                  {day.events.slice(0, 2).map((event, eventIndex) => (\n                    <div\n                      key={eventIndex}\n                      className={`text-xs px-2 py-1 rounded truncate ${getEventColor(event)}`}\n                      title={event.assignmentTitle || event.notes || event.blockType}\n                    >\n                      {event.blockType === 'assignment' && event.assignmentTitle\n                        ? event.assignmentTitle\n                        : event.blockType === 'travel_buffer'\n                        ? 'Travel Buffer'\n                        : event.blockType === 'personal_block'\n                        ? 'Blocked'\n                        : event.blockType === 'available'\n                        ? `Available ${event.visibility === 'public' ? '(Public)' : ''}`\n                        : event.blockType}\n                    </div>\n                  ))}\n                  {day.events.length > 2 && (\n                    <div className=\"text-xs text-gray-500 px-2\">\n                      +{day.events.length - 2} more\n                    </div>\n                  )}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Upcoming Reminders */}\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2\">\n          <i className=\"ri-notification-3-line text-teal-600\"></i>\n          Automatic Reminders\n        </h3>\n        <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n          <div className=\"flex items-start gap-3\">\n            <i className=\"ri-information-line text-xl text-blue-600 mt-0.5\"></i>\n            <div>\n              <p className=\"text-sm text-blue-800 font-medium mb-2\">\n                Automatic reminders are sent to both you and the facility:\n              </p>\n              <ul className=\"text-sm text-blue-700 space-y-1\">\n                <li className=\"flex items-center gap-2\">\n                  <i className=\"ri-checkbox-circle-fill text-blue-500\"></i>\n                  30 days before assignment start\n                </li>\n                <li className=\"flex items-center gap-2\">\n                  <i className=\"ri-checkbox-circle-fill text-blue-500\"></i>\n                  15 days before assignment start\n                </li>\n                <li className=\"flex items-center gap-2\">\n                  <i className=\"ri-checkbox-circle-fill text-blue-500\"></i>\n                  3 days before assignment start\n                </li>\n              </ul>\n              <p className=\"text-xs text-blue-600 mt-3\">\n                Reminders are sent via email and dashboard notifications. All reminders are logged for compliance.\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Block Dates Modal */}\n      {showBlockModal && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-xl max-w-md w-full p-6\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h3 className=\"text-xl font-semibold text-gray-900\">Block Dates</h3>\n              <button\n                onClick={() => setShowBlockModal(false)}\n                className=\"w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded-lg transition-colors cursor-pointer\"\n              >\n                <i className=\"ri-close-line text-xl text-gray-600\"></i>\n              </button>\n            </div>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Start Date</label>\n                <input\n                  type=\"date\"\n                  value={blockForm.startDate}\n                  onChange={(e) => setBlockForm({ ...blockForm, startDate: e.target.value })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">End Date</label>\n                <input\n                  type=\"date\"\n                  value={blockForm.endDate}\n                  onChange={(e) => setBlockForm({ ...blockForm, endDate: e.target.value })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Block Type</label>\n                <select\n                  value={blockForm.blockType}\n                  onChange={(e) => setBlockForm({ ...blockForm, blockType: e.target.value as 'personal_block' | 'available' })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n                >\n                  <option value=\"personal_block\">Personal Block (Unavailable)</option>\n                  <option value=\"available\">Available for Work</option>\n                </select>\n              </div>\n\n              {blockForm.blockType === 'available' && (\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Visibility</label>\n                  <select\n                    value={blockForm.visibility}\n                    onChange={(e) => setBlockForm({ ...blockForm, visibility: e.target.value as 'private' | 'public' })}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n                  >\n                    <option value=\"private\">Private (Only visible to you)</option>\n                    <option value=\"public\">Public (Visible to facilities)</option>\n                  </select>\n                  <p className=\"text-xs text-gray-500 mt-1\">\n                    Public availability will be shown to facilities looking for physicians.\n                  </p>\n                </div>\n              )}\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Notes (Optional)</label>\n                <textarea\n                  value={blockForm.notes}\n                  onChange={(e) => setBlockForm({ ...blockForm, notes: e.target.value })}\n                  rows={3}\n                  maxLength={500}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent resize-none\"\n                  placeholder=\"Add any notes about this block...\"\n                />\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-3 mt-6\">\n              <button\n                onClick={() => setShowBlockModal(false)}\n                className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer whitespace-nowrap\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSaveBlock}\n                disabled={saving || !blockForm.startDate || !blockForm.endDate}\n                className=\"flex-1 px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer whitespace-nowrap\"\n              >\n                {saving ? 'Saving...' : 'Save Block'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Event Details Modal */}\n      {showEventDetails && selectedEvent && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-xl max-w-md w-full p-6\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h3 className=\"text-xl font-semibold text-gray-900\">\n                {selectedEvent.blockType === 'assignment' ? 'Assignment Details' :\n                 selectedEvent.blockType === 'travel_buffer' ? 'Travel Buffer' :\n                 selectedEvent.blockType === 'personal_block' ? 'Personal Block' :\n                 'Available Dates'}\n              </h3>\n              <button\n                onClick={() => {\n                  setShowEventDetails(false);\n                  setSelectedEvent(null);\n                }}\n                className=\"w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded-lg transition-colors cursor-pointer\"\n              >\n                <i className=\"ri-close-line text-xl text-gray-600\"></i>\n              </button>\n            </div>\n\n            <div className=\"space-y-4\">\n              {selectedEvent.assignmentTitle && (\n                <div>\n                  <label className=\"text-sm text-gray-500\">Assignment</label>\n                  <p className=\"font-medium text-gray-900\">{selectedEvent.assignmentTitle}</p>\n                </div>\n              )}\n\n              {selectedEvent.facilityName && (\n                <div>\n                  <label className=\"text-sm text-gray-500\">Facility</label>\n                  <p className=\"font-medium text-gray-900\">{selectedEvent.facilityName}</p>\n                </div>\n              )}\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"text-sm text-gray-500\">Start Date</label>\n                  <p className=\"font-medium text-gray-900\">\n                    {selectedEvent.startDate.toLocaleDateString()}\n                  </p>\n                </div>\n                <div>\n                  <label className=\"text-sm text-gray-500\">End Date</label>\n                  <p className=\"font-medium text-gray-900\">\n                    {selectedEvent.endDate.toLocaleDateString()}\n                  </p>\n                </div>\n              </div>\n\n              <div>\n                <label className=\"text-sm text-gray-500\">Type</label>\n                <p className={`inline-block px-3 py-1 rounded-full text-sm font-medium ${getEventColor(selectedEvent)}`}>\n                  {selectedEvent.blockType === 'assignment' ? 'Confirmed Assignment' :\n                   selectedEvent.blockType === 'travel_buffer' ? 'Travel Buffer Day' :\n                   selectedEvent.blockType === 'personal_block' ? 'Personal Block' :\n                   'Available for Work'}\n                </p>\n              </div>\n\n              {selectedEvent.blockType === 'available' && (\n                <div>\n                  <label className=\"text-sm text-gray-500\">Visibility</label>\n                  <div className=\"flex items-center gap-2 mt-1\">\n                    <span className={`px-3 py-1 rounded-full text-sm font-medium ${\n                      selectedEvent.visibility === 'public' \n                        ? 'bg-green-100 text-green-800' \n                        : 'bg-gray-100 text-gray-800'\n                    }`}>\n                      {selectedEvent.visibility === 'public' ? 'Public' : 'Private'}\n                    </span>\n                    <button\n                      onClick={() => handleToggleVisibility(selectedEvent.id, selectedEvent.visibility)}\n                      className=\"text-sm text-teal-600 hover:text-teal-700 cursor-pointer\"\n                    >\n                      {selectedEvent.visibility === 'public' ? 'Make Private' : 'Make Public'}\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {selectedEvent.notes && (\n                <div>\n                  <label className=\"text-sm text-gray-500\">Notes</label>\n                  <p className=\"text-gray-900\">{selectedEvent.notes}</p>\n                </div>\n              )}\n\n              {selectedEvent.isBufferDay && (\n                <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-3\">\n                  <p className=\"text-sm text-amber-800\">\n                    <i className=\"ri-information-line mr-1\"></i>\n                    This is an automatic travel buffer day to allow time between assignments.\n                  </p>\n                </div>\n              )}\n            </div>\n\n            <div className=\"flex items-center gap-3 mt-6\">\n              <button\n                onClick={() => {\n                  setShowEventDetails(false);\n                  setSelectedEvent(null);\n                }}\n                className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer whitespace-nowrap\"\n              >\n                Close\n              </button>\n              {(selectedEvent.blockType === 'personal_block' || selectedEvent.blockType === 'available') && (\n                <button\n                  onClick={() => handleDeleteBlock(selectedEvent.id)}\n                  className=\"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors cursor-pointer whitespace-nowrap\"\n                >\n                  Delete Block\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}","\nimport React, { useState } from 'react';\nimport PendingApplications from './PendingApplications';\nimport { InvitedAssignments } from './InvitedAssignments';\nimport { UpcomingAssignments } from './UpcomingAssignments';\nimport { CompletedAssignments } from './CompletedAssignments';\nimport { FacilityRequests } from './FacilityRequests';\nimport InsuranceQuestions from './InsuranceQuestions';\nimport ThirdPartyServices from './ThirdPartyServices';\nimport JobBrowse from './JobBrowse';\nimport PhysicianCalendar from './PhysicianCalendar';\n\ninterface AssignmentTabsProps {\n  onFileDispute?: (assignmentId: string) => void;\n}\n\nexport default function AssignmentTabs({ onFileDispute }: AssignmentTabsProps) {\n  const [activeTab, setActiveTab] = useState<\n    'browse' | 'calendar' | 'pending' | 'invited' | 'upcoming' | 'completed' | 'requests' | 'insurance' | 'services'\n  >('browse');\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Tab Navigation */}\n      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-x-auto\">\n        <div className=\"flex border-b border-gray-200 min-w-max\">\n          <button\n            onClick={() => setActiveTab('browse')}\n            className={`flex-1 px-6 py-4 text-sm font-medium whitespace-nowrap transition-colors ${\n              activeTab === 'browse'\n                ? 'text-teal-600 border-b-2 border-teal-600 bg-teal-50'\n                : 'text-gray-600 hover:text-gray-900 hover:bg-gray-50'\n            }`}\n          >\n            <i className=\"ri-search-line mr-2\"></i>\n            Browse Jobs\n          </button>\n          <button\n            onClick={() => setActiveTab('calendar')}\n            className={`flex-1 px-6 py-4 text-sm font-medium whitespace-nowrap transition-colors ${\n              activeTab === 'calendar'\n                ? 'text-teal-600 border-b-2 border-teal-600 bg-teal-50'\n                : 'text-gray-600 hover:text-gray-900 hover:bg-gray-50'\n            }`}\n          >\n            <i className=\"ri-calendar-2-line mr-2\"></i>\n            My Calendar\n          </button>\n          <button\n            onClick={() => setActiveTab('pending')}\n            className={`flex-1 px-6 py-4 text-sm font-medium whitespace-nowrap transition-colors ${\n              activeTab === 'pending'\n                ? 'text-teal-600 border-b-2 border-teal-600 bg-teal-50'\n                : 'text-gray-600 hover:text-gray-900 hover:bg-gray-50'\n            }`}\n          >\n            <i className=\"ri-time-line mr-2\"></i>\n            Pending Applications\n          </button>\n          <button\n            onClick={() => setActiveTab('invited')}\n            className={`flex-1 px-6 py-4 text-sm font-medium whitespace-nowrap transition-colors ${\n              activeTab === 'invited'\n                ? 'text-teal-600 border-b-2 border-teal-600 bg-teal-50'\n                : 'text-gray-600 hover:text-gray-900 hover:bg-gray-50'\n            }`}\n          >\n            <i className=\"ri-mail-check-line mr-2\"></i>\n            Invited / Accepted\n          </button>\n          <button\n            onClick={() => setActiveTab('upcoming')}\n            className={`flex-1 px-6 py-4 text-sm font-medium whitespace-nowrap transition-colors ${\n              activeTab === 'upcoming'\n                ? 'text-teal-600 border-b-2 border-teal-600 bg-teal-50'\n                : 'text-gray-600 hover:text-gray-900 hover:bg-gray-50'\n            }`}\n          >\n            <i className=\"ri-calendar-check-line mr-2\"></i>\n            Upcoming Confirmed\n          </button>\n          <button\n            onClick={() => setActiveTab('completed')}\n            className={`flex-1 px-6 py-4 text-sm font-medium whitespace-nowrap transition-colors ${\n              activeTab === 'completed'\n                ? 'text-teal-600 border-b-2 border-teal-600 bg-teal-50'\n                : 'text-gray-600 hover:text-gray-900 hover:bg-gray-50'\n            }`}\n          >\n            <i className=\"ri-checkbox-circle-line mr-2\"></i>\n            Completed\n          </button>\n          <button\n            onClick={() => setActiveTab('requests')}\n            className={`flex-1 px-6 py-4 text-sm font-medium whitespace-nowrap transition-colors ${\n              activeTab === 'requests'\n                ? 'text-teal-600 border-b-2 border-teal-600 bg-teal-50'\n                : 'text-gray-600 hover:text-gray-900 hover:bg-gray-50'\n            }`}\n          >\n            <i className=\"ri-message-3-line mr-2\"></i>\n            Facility Requests\n          </button>\n          <button\n            onClick={() => setActiveTab('insurance')}\n            className={`flex-1 px-6 py-4 text-sm font-medium whitespace-nowrap transition-colors ${\n              activeTab === 'insurance'\n                ? 'text-teal-600 border-b-2 border-teal-600 bg-teal-50'\n                : 'text-gray-600 hover:text-gray-900 hover:bg-gray-50'\n            }`}\n          >\n            <i className=\"ri-shield-check-line mr-2\"></i>\n            Insurance\n          </button>\n          <button\n            onClick={() => setActiveTab('services')}\n            className={`flex-1 px-6 py-4 text-sm font-medium whitespace-nowrap transition-colors ${\n              activeTab === 'services'\n                ? 'text-teal-600 border-b-2 border-teal-600 bg-teal-50'\n                : 'text-gray-600 hover:text-gray-900 hover:bg-gray-50'\n            }`}\n          >\n            <i className=\"ri-customer-service-2-line mr-2\"></i>\n            Third-Party Services\n          </button>\n        </div>\n      </div>\n\n      {/* Tab Content */}\n      <div>\n        {activeTab === 'browse' && <JobBrowse physicianId=\"phy-001\" />}\n        {activeTab === 'calendar' && <PhysicianCalendar physicianId=\"phy-001\" />}\n        {activeTab === 'pending' && <PendingApplications />}\n        {activeTab === 'invited' && <InvitedAssignments />}\n        {activeTab === 'upcoming' && <UpcomingAssignments />}\n        {activeTab === 'completed' && <CompletedAssignments />}\n        {activeTab === 'requests' && <FacilityRequests />}\n        {activeTab === 'insurance' && <InsuranceQuestions />}\n        {activeTab === 'services' && <ThirdPartyServices />}\n      </div>\n    </div>\n  );\n}\n","import type { \n  Dispute, \n  DisputeType, \n  DisputeParty, \n  DisputeEvidence,\n  DisputeMessage,\n  DisputeFee,\n  DisputeResolution,\n  DisputeAbuseFlag\n} from '../types/dispute';\n\n// Dispute fee configuration\nconst DISPUTE_FEE_BASE = 300;\nconst DISPUTE_FEE_CURRENCY = 'USD';\n\n// Abuse detection thresholds\nconst ABUSE_THRESHOLDS = {\n  MAX_DISPUTES_PER_MONTH: 3,\n  FRIVOLOUS_RATE_THRESHOLD: 0.5, // 50% of disputes dismissed\n  ABUSE_SCORE_WARNING: 60,\n  ABUSE_SCORE_RESTRICTION: 80,\n};\n\n/**\n * Calculate dispute fee based on user's abuse history\n */\nexport const calculateDisputeFee = (userId: string, userRole: DisputeParty): number => {\n  const abuseFlag = checkAbuseFlag(userId, userRole);\n  \n  if (abuseFlag?.restrictions?.disputeFeeMultiplier) {\n    return DISPUTE_FEE_BASE * abuseFlag.restrictions.disputeFeeMultiplier;\n  }\n  \n  return DISPUTE_FEE_BASE;\n};\n\n/**\n * Check if user has abuse flags\n */\nexport const checkAbuseFlag = (userId: string, userRole: DisputeParty): DisputeAbuseFlag | null => {\n  // In production, this would query the database\n  // For now, return null (no abuse flags)\n  return null;\n};\n\n/**\n * Create a new dispute\n */\nexport const createDispute = (params: {\n  assignmentId: string;\n  assignmentTitle: string;\n  facility: { id: string; name: string };\n  physician: { id: string; name: string; specialty: string };\n  initiatedBy: DisputeParty;\n  initiatorId: string;\n  initiatorName: string;\n  respondentId: string;\n  respondentName: string;\n  respondentRole: DisputeParty;\n  type: DisputeType;\n  subject: string;\n  description: string;\n  escrowAmount?: number;\n}): Dispute => {\n  const disputeId = `DSP-${Date.now()}-${Math.random().toString(36).substr(2, 9).toUpperCase()}`;\n  const feeAmount = calculateDisputeFee(params.initiatorId, params.initiatedBy);\n  \n  const dispute: Dispute = {\n    id: disputeId,\n    assignmentId: params.assignmentId,\n    assignmentTitle: params.assignmentTitle,\n    facility: params.facility,\n    physician: params.physician,\n    initiatedBy: params.initiatedBy,\n    initiatorId: params.initiatorId,\n    initiatorName: params.initiatorName,\n    respondentId: params.respondentId,\n    respondentName: params.respondentName,\n    respondentRole: params.respondentRole,\n    type: params.type,\n    status: 'open',\n    priority: determinePriority(params.type),\n    subject: params.subject,\n    description: params.description,\n    evidence: [],\n    messages: [],\n    fee: {\n      id: `FEE-${disputeId}`,\n      disputeId,\n      amount: feeAmount,\n      currency: DISPUTE_FEE_CURRENCY,\n      paidBy: params.initiatorId,\n      paidByRole: params.initiatedBy,\n      paymentStatus: 'pending',\n    },\n    escrowHeld: true,\n    escrowAmount: params.escrowAmount,\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n    metadata: {\n      ipAddress: '0.0.0.0', // Captured from request in production\n      userAgent: navigator.userAgent,\n      deviceType: /Mobile|Android|iPhone/i.test(navigator.userAgent) ? 'mobile' : 'desktop',\n    },\n  };\n  \n  // Auto-escalate to admin panel\n  escalateToAdmin(dispute);\n  \n  return dispute;\n};\n\n/**\n * Determine dispute priority based on type\n */\nconst determinePriority = (type: DisputeType): 'low' | 'medium' | 'high' | 'urgent' => {\n  const priorityMap: Record<DisputeType, 'low' | 'medium' | 'high' | 'urgent'> = {\n    payment_dispute: 'high',\n    contract_violation: 'high',\n    quality_complaint: 'medium',\n    cancellation_dispute: 'medium',\n    no_show: 'urgent',\n    credential_misrepresentation: 'urgent',\n    facility_breach: 'high',\n    other: 'low',\n  };\n  \n  return priorityMap[type];\n};\n\n/**\n * Auto-escalate dispute to admin panel\n */\nexport const escalateToAdmin = (dispute: Dispute): void => {\n  dispute.status = 'escalated';\n  dispute.escalatedAt = new Date().toISOString();\n  dispute.updatedAt = new Date().toISOString();\n  \n  // In production, this would:\n  // 1. Create admin notification\n  // 2. Send email to admin team\n  // 3. Update database\n  // 4. Trigger webhook for external systems\n  \n  console.log(`Dispute ${dispute.id} auto-escalated to admin panel`);\n};\n\n/**\n * Add evidence to dispute\n */\nexport const addEvidence = (\n  disputeId: string,\n  file: File,\n  uploadedBy: DisputeParty,\n  description?: string\n): DisputeEvidence => {\n  const evidence: DisputeEvidence = {\n    id: `EVD-${Date.now()}-${Math.random().toString(36).substr(2, 9).toUpperCase()}`,\n    fileName: file.name,\n    fileUrl: URL.createObjectURL(file), // In production, upload to cloud storage\n    fileType: file.type,\n    uploadedAt: new Date().toISOString(),\n    uploadedBy,\n    description,\n  };\n  \n  return evidence;\n};\n\n/**\n * Add message to dispute\n */\nexport const addDisputeMessage = (\n  disputeId: string,\n  senderId: string,\n  senderName: string,\n  senderRole: DisputeParty,\n  message: string,\n  isInternal: boolean = false\n): DisputeMessage => {\n  const disputeMessage: DisputeMessage = {\n    id: `MSG-${Date.now()}-${Math.random().toString(36).substr(2, 9).toUpperCase()}`,\n    disputeId,\n    senderId,\n    senderName,\n    senderRole,\n    message,\n    timestamp: new Date().toISOString(),\n    isInternal,\n  };\n  \n  return disputeMessage;\n};\n\n/**\n * Process dispute fee payment\n */\nexport const processDisputeFee = async (\n  disputeId: string,\n  paymentMethodId: string\n): Promise<{ success: boolean; transactionId?: string; error?: string }> => {\n  try {\n    // In production, integrate with Stripe/PayPal\n    // For now, simulate payment processing\n    \n    const transactionId = `TXN-${Date.now()}-${Math.random().toString(36).substr(2, 9).toUpperCase()}`;\n    \n    // Simulate API call delay\n    await new Promise(resolve => setTimeout(resolve, 1000));\n    \n    return {\n      success: true,\n      transactionId,\n    };\n  } catch (error) {\n    return {\n      success: false,\n      error: 'Payment processing failed',\n    };\n  }\n};\n\n/**\n * Resolve dispute\n */\nexport const resolveDispute = (params: {\n  disputeId: string;\n  resolvedBy: string;\n  resolvedByName: string;\n  outcome: 'favor_physician' | 'favor_facility' | 'favor_vendor' | 'split' | 'dismissed' | 'settled';\n  resolution: string;\n  feeRefunded: boolean;\n  penaltyApplied?: {\n    party: DisputeParty;\n    amount: number;\n    reason: string;\n  };\n  escrowAction?: 'release_to_physician' | 'release_to_facility' | 'split' | 'hold';\n  notes?: string;\n}): DisputeResolution => {\n  const resolution: DisputeResolution = {\n    id: `RES-${Date.now()}-${Math.random().toString(36).substr(2, 9).toUpperCase()}`,\n    disputeId: params.disputeId,\n    resolvedBy: params.resolvedBy,\n    resolvedByName: params.resolvedByName,\n    resolvedAt: new Date().toISOString(),\n    outcome: params.outcome,\n    resolution: params.resolution,\n    feeRefunded: params.feeRefunded,\n    penaltyApplied: params.penaltyApplied,\n    escrowAction: params.escrowAction,\n    notes: params.notes,\n  };\n  \n  return resolution;\n};\n\n/**\n * Calculate abuse score for user\n */\nexport const calculateAbuseScore = (\n  totalDisputes: number,\n  frivolousDisputes: number,\n  monthlyDisputes: number\n): number => {\n  let score = 0;\n  \n  // Factor 1: Frivolous dispute rate (0-40 points)\n  const frivolousRate = totalDisputes > 0 ? frivolousDisputes / totalDisputes : 0;\n  score += frivolousRate * 40;\n  \n  // Factor 2: Monthly dispute frequency (0-30 points)\n  if (monthlyDisputes > ABUSE_THRESHOLDS.MAX_DISPUTES_PER_MONTH) {\n    score += Math.min(30, (monthlyDisputes - ABUSE_THRESHOLDS.MAX_DISPUTES_PER_MONTH) * 10);\n  }\n  \n  // Factor 3: Total dispute volume (0-30 points)\n  if (totalDisputes > 5) {\n    score += Math.min(30, (totalDisputes - 5) * 3);\n  }\n  \n  return Math.min(100, Math.round(score));\n};\n\n/**\n * Update abuse flag for user\n */\nexport const updateAbuseFlag = (\n  userId: string,\n  userRole: DisputeParty,\n  totalDisputes: number,\n  frivolousDisputes: number,\n  monthlyDisputes: number\n): DisputeAbuseFlag => {\n  const abuseScore = calculateAbuseScore(totalDisputes, frivolousDisputes, monthlyDisputes);\n  const flagged = abuseScore >= ABUSE_THRESHOLDS.ABUSE_SCORE_WARNING;\n  \n  const abuseFlag: DisputeAbuseFlag = {\n    userId,\n    userRole,\n    totalDisputes,\n    frivolousDisputes,\n    abuseScore,\n    flagged,\n    flaggedAt: flagged ? new Date().toISOString() : undefined,\n  };\n  \n  // Apply restrictions based on abuse score\n  if (abuseScore >= ABUSE_THRESHOLDS.ABUSE_SCORE_RESTRICTION) {\n    abuseFlag.restrictions = {\n      disputeFeeMultiplier: 2, // Double the fee\n      requiresAdminApproval: true,\n      temporaryBan: abuseScore >= 90,\n      banUntil: abuseScore >= 90 ? new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString() : undefined,\n    };\n  } else if (abuseScore >= ABUSE_THRESHOLDS.ABUSE_SCORE_WARNING) {\n    abuseFlag.restrictions = {\n      disputeFeeMultiplier: 1.5, // 1.5x fee\n      requiresAdminApproval: false,\n      temporaryBan: false,\n    };\n  }\n  \n  return abuseFlag;\n};\n\n/**\n * Check if user can file dispute\n */\nexport const canFileDispute = (userId: string, userRole: DisputeParty): {\n  allowed: boolean;\n  reason?: string;\n  feeAmount?: number;\n} => {\n  const abuseFlag = checkAbuseFlag(userId, userRole);\n  \n  if (abuseFlag?.restrictions?.temporaryBan) {\n    return {\n      allowed: false,\n      reason: `Your account is temporarily restricted from filing disputes until ${new Date(abuseFlag.restrictions.banUntil!).toLocaleDateString()}`,\n    };\n  }\n  \n  const feeAmount = calculateDisputeFee(userId, userRole);\n  \n  if (abuseFlag?.restrictions?.requiresAdminApproval) {\n    return {\n      allowed: true,\n      reason: 'Your dispute will require admin approval before processing',\n      feeAmount,\n    };\n  }\n  \n  return {\n    allowed: true,\n    feeAmount,\n  };\n};\n\n/**\n * Create dispute audit log\n */\nexport const createDisputeAuditLog = (params: {\n  disputeId: string;\n  action: string;\n  performedBy: string;\n  performedByRole: DisputeParty;\n  details: string;\n  metadata?: Record<string, any>;\n}): void => {\n  const log = {\n    id: `LOG-${Date.now()}-${Math.random().toString(36).substr(2, 9).toUpperCase()}`,\n    disputeId: params.disputeId,\n    action: params.action,\n    performedBy: params.performedBy,\n    performedByRole: params.performedByRole,\n    details: params.details,\n    timestamp: new Date().toISOString(),\n    ipAddress: '0.0.0.0', // Captured from request in production\n    userAgent: navigator.userAgent,\n    metadata: params.metadata,\n  };\n  \n  // In production, store in database\n  console.log('Dispute audit log:', log);\n};\n","import { useState } from 'react';\nimport type { DisputeType, DisputeParty } from '../../types/dispute';\nimport { createDispute, canFileDispute, processDisputeFee, createDisputeAuditLog } from '../../utils/disputeManager';\n\ninterface DisputeInitiationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  assignmentId: string;\n  assignmentTitle: string;\n  facility: { id: string; name: string };\n  physician: { id: string; name: string; specialty: string };\n  initiatedBy: DisputeParty;\n  initiatorId: string;\n  initiatorName: string;\n  respondentId: string;\n  respondentName: string;\n  respondentRole: DisputeParty;\n  escrowAmount?: number;\n  onDisputeCreated?: (disputeId: string) => void;\n}\n\nconst DISPUTE_TYPES: { value: DisputeType; label: string; description: string }[] = [\n  {\n    value: 'payment_dispute',\n    label: 'Payment Dispute',\n    description: 'Issues with payment amount, timing, or processing',\n  },\n  {\n    value: 'contract_violation',\n    label: 'Contract Violation',\n    description: 'Breach of contract terms or conditions',\n  },\n  {\n    value: 'quality_complaint',\n    label: 'Quality Complaint',\n    description: 'Concerns about service quality or performance',\n  },\n  {\n    value: 'cancellation_dispute',\n    label: 'Cancellation Dispute',\n    description: 'Issues related to assignment cancellation',\n  },\n  {\n    value: 'no_show',\n    label: 'No-Show',\n    description: 'Physician did not appear for scheduled assignment',\n  },\n  {\n    value: 'credential_misrepresentation',\n    label: 'Credential Misrepresentation',\n    description: 'False or misleading credential information',\n  },\n  {\n    value: 'facility_breach',\n    label: 'Facility Breach',\n    description: 'Facility failed to meet contractual obligations',\n  },\n  {\n    value: 'other',\n    label: 'Other',\n    description: 'Other dispute not covered by above categories',\n  },\n];\n\nexport default function DisputeInitiationModal({\n  isOpen,\n  onClose,\n  assignmentId,\n  assignmentTitle,\n  facility,\n  physician,\n  initiatedBy,\n  initiatorId,\n  initiatorName,\n  respondentId,\n  respondentName,\n  respondentRole,\n  escrowAmount,\n  onDisputeCreated,\n}: DisputeInitiationModalProps) {\n  const [step, setStep] = useState<'eligibility' | 'details' | 'payment' | 'confirmation'>('eligibility');\n  const [disputeType, setDisputeType] = useState<DisputeType>('payment_dispute');\n  const [subject, setSubject] = useState('');\n  const [description, setDescription] = useState('');\n  const [evidenceFiles, setEvidenceFiles] = useState<File[]>([]);\n  const [paymentMethodId, setPaymentMethodId] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [disputeFee, setDisputeFee] = useState(300);\n  const [eligibilityCheck, setEligibilityCheck] = useState<{\n    allowed: boolean;\n    reason?: string;\n    feeAmount?: number;\n  } | null>(null);\n\n  const handleEligibilityCheck = () => {\n    const check = canFileDispute(initiatorId, initiatedBy);\n    setEligibilityCheck(check);\n    \n    if (check.allowed && check.feeAmount) {\n      setDisputeFee(check.feeAmount);\n      setStep('details');\n    }\n  };\n\n  const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files) {\n      setEvidenceFiles(Array.from(e.target.files));\n    }\n  };\n\n  const handleSubmitDetails = () => {\n    if (!subject.trim() || !description.trim()) {\n      setError('Please provide both subject and description');\n      return;\n    }\n    \n    if (description.length < 50) {\n      setError('Description must be at least 50 characters');\n      return;\n    }\n    \n    setError('');\n    setStep('payment');\n  };\n\n  const handlePaymentSubmit = async () => {\n    if (!paymentMethodId) {\n      setError('Please provide payment method');\n      return;\n    }\n    \n    setLoading(true);\n    setError('');\n    \n    try {\n      // Process dispute fee payment\n      const paymentResult = await processDisputeFee('temp-dispute-id', paymentMethodId);\n      \n      if (!paymentResult.success) {\n        setError(paymentResult.error || 'Payment processing failed');\n        setLoading(false);\n        return;\n      }\n      \n      // Create dispute\n      const dispute = createDispute({\n        assignmentId,\n        assignmentTitle,\n        facility,\n        physician,\n        initiatedBy,\n        initiatorId,\n        initiatorName,\n        respondentId,\n        respondentName,\n        respondentRole,\n        type: disputeType,\n        subject,\n        description,\n        escrowAmount,\n      });\n      \n      // Update fee with transaction ID\n      dispute.fee.transactionId = paymentResult.transactionId;\n      dispute.fee.paymentStatus = 'paid';\n      dispute.fee.paidAt = new Date().toISOString();\n      \n      // Create audit log\n      createDisputeAuditLog({\n        disputeId: dispute.id,\n        action: 'dispute_created',\n        performedBy: initiatorId,\n        performedByRole: initiatedBy,\n        details: `Dispute created: ${subject}`,\n        metadata: {\n          disputeType,\n          feeAmount: disputeFee,\n          transactionId: paymentResult.transactionId,\n        },\n      });\n      \n      setLoading(false);\n      setStep('confirmation');\n      \n      // Notify parent component\n      if (onDisputeCreated) {\n        onDisputeCreated(dispute.id);\n      }\n      \n      // Auto-close after 3 seconds\n      setTimeout(() => {\n        handleClose();\n      }, 3000);\n    } catch (err) {\n      setError('Failed to create dispute. Please try again.');\n      setLoading(false);\n    }\n  };\n\n  const handleClose = () => {\n    setStep('eligibility');\n    setDisputeType('payment_dispute');\n    setSubject('');\n    setDescription('');\n    setEvidenceFiles([]);\n    setPaymentMethodId('');\n    setError('');\n    setEligibilityCheck(null);\n    onClose();\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n        {/* Header */}\n        <div className=\"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-xl font-semibold text-slate-900\">File a Dispute</h2>\n            <p className=\"text-sm text-slate-600 mt-1\">{assignmentTitle}</p>\n          </div>\n          <button\n            onClick={handleClose}\n            className=\"w-8 h-8 flex items-center justify-center text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors whitespace-nowrap\"\n          >\n            <i className=\"ri-close-line text-xl\"></i>\n          </button>\n        </div>\n\n        <div className=\"p-6\">\n          {/* Step Indicator */}\n          <div className=\"flex items-center justify-between mb-8\">\n            <div className=\"flex items-center gap-2\">\n              <div className={`w-8 h-8 flex items-center justify-center rounded-full ${\n                step === 'eligibility' ? 'bg-teal-500 text-white' : 'bg-teal-100 text-teal-600'\n              }`}>\n                <i className=\"ri-shield-check-line\"></i>\n              </div>\n              <span className=\"text-sm font-medium text-slate-700\">Eligibility</span>\n            </div>\n            <div className=\"flex-1 h-0.5 bg-slate-200 mx-2\"></div>\n            <div className=\"flex items-center gap-2\">\n              <div className={`w-8 h-8 flex items-center justify-center rounded-full ${\n                step === 'details' || step === 'payment' || step === 'confirmation' ? 'bg-teal-500 text-white' : 'bg-slate-200 text-slate-400'\n              }`}>\n                <i className=\"ri-file-text-line\"></i>\n              </div>\n              <span className=\"text-sm font-medium text-slate-700\">Details</span>\n            </div>\n            <div className=\"flex-1 h-0.5 bg-slate-200 mx-2\"></div>\n            <div className=\"flex items-center gap-2\">\n              <div className={`w-8 h-8 flex items-center justify-center rounded-full ${\n                step === 'payment' || step === 'confirmation' ? 'bg-teal-500 text-white' : 'bg-slate-200 text-slate-400'\n              }`}>\n                <i className=\"ri-bank-card-line\"></i>\n              </div>\n              <span className=\"text-sm font-medium text-slate-700\">Payment</span>\n            </div>\n          </div>\n\n          {/* Eligibility Check */}\n          {step === 'eligibility' && (\n            <div className=\"space-y-6\">\n              <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-4\">\n                <div className=\"flex gap-3\">\n                  <i className=\"ri-alert-line text-xl text-amber-600 flex-shrink-0\"></i>\n                  <div>\n                    <h3 className=\"font-semibold text-amber-900 mb-2\">Important Information</h3>\n                    <ul className=\"text-sm text-amber-800 space-y-1\">\n                      <li>• A mandatory dispute fee of ${disputeFee} will be charged</li>\n                      <li>• The fee is refunded if the dispute is resolved in your favor</li>\n                      <li>• Frivolous disputes may result in penalties and restrictions</li>\n                      <li>• All disputes are automatically escalated to admin review</li>\n                      <li>• Escrow funds will be held until resolution</li>\n                    </ul>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-slate-50 rounded-lg p-4 space-y-3\">\n                <h3 className=\"font-semibold text-slate-900\">Assignment Details</h3>\n                <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                  <div>\n                    <span className=\"text-slate-600\">Facility:</span>\n                    <p className=\"font-medium text-slate-900\">{facility.name}</p>\n                  </div>\n                  <div>\n                    <span className=\"text-slate-600\">Physician:</span>\n                    <p className=\"font-medium text-slate-900\">{physician.name}</p>\n                  </div>\n                  <div>\n                    <span className=\"text-slate-600\">Specialty:</span>\n                    <p className=\"font-medium text-slate-900\">{physician.specialty}</p>\n                  </div>\n                  {escrowAmount && (\n                    <div>\n                      <span className=\"text-slate-600\">Escrow Amount:</span>\n                      <p className=\"font-medium text-slate-900\">${escrowAmount.toLocaleString()}</p>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {eligibilityCheck && !eligibilityCheck.allowed && (\n                <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n                  <div className=\"flex gap-3\">\n                    <i className=\"ri-error-warning-line text-xl text-red-600 flex-shrink-0\"></i>\n                    <div>\n                      <h3 className=\"font-semibold text-red-900 mb-1\">Cannot File Dispute</h3>\n                      <p className=\"text-sm text-red-800\">{eligibilityCheck.reason}</p>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {eligibilityCheck && eligibilityCheck.allowed && eligibilityCheck.reason && (\n                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                  <div className=\"flex gap-3\">\n                    <i className=\"ri-information-line text-xl text-blue-600 flex-shrink-0\"></i>\n                    <div>\n                      <p className=\"text-sm text-blue-800\">{eligibilityCheck.reason}</p>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              <button\n                onClick={handleEligibilityCheck}\n                className=\"w-full bg-teal-500 text-white py-3 rounded-lg font-medium hover:bg-teal-600 transition-colors whitespace-nowrap\"\n              >\n                Continue to Dispute Details\n              </button>\n            </div>\n          )}\n\n          {/* Dispute Details */}\n          {step === 'details' && (\n            <div className=\"space-y-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-slate-700 mb-2\">\n                  Dispute Type <span className=\"text-red-500\">*</span>\n                </label>\n                <select\n                  value={disputeType}\n                  onChange={(e) => setDisputeType(e.target.value as DisputeType)}\n                  className=\"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n                >\n                  {DISPUTE_TYPES.map((type) => (\n                    <option key={type.value} value={type.value}>\n                      {type.label}\n                    </option>\n                  ))}\n                </select>\n                <p className=\"text-sm text-slate-600 mt-1\">\n                  {DISPUTE_TYPES.find(t => t.value === disputeType)?.description}\n                </p>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-slate-700 mb-2\">\n                  Subject <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"text\"\n                  value={subject}\n                  onChange={(e) => setSubject(e.target.value)}\n                  placeholder=\"Brief summary of the dispute\"\n                  className=\"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n                  maxLength={200}\n                />\n                <p className=\"text-sm text-slate-500 mt-1\">{subject.length}/200 characters</p>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-slate-700 mb-2\">\n                  Detailed Description <span className=\"text-red-500\">*</span>\n                </label>\n                <textarea\n                  value={description}\n                  onChange={(e) => setDescription(e.target.value)}\n                  placeholder=\"Provide a detailed explanation of the dispute, including dates, specific incidents, and any relevant context. Minimum 50 characters.\"\n                  rows={6}\n                  className=\"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent resize-none\"\n                  maxLength={2000}\n                />\n                <p className=\"text-sm text-slate-500 mt-1\">\n                  {description.length}/2000 characters {description.length < 50 && `(minimum 50 required)`}\n                </p>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-slate-700 mb-2\">\n                  Supporting Evidence (Optional)\n                </label>\n                <div className=\"border-2 border-dashed border-slate-300 rounded-lg p-6 text-center\">\n                  <input\n                    type=\"file\"\n                    multiple\n                    onChange={handleFileUpload}\n                    className=\"hidden\"\n                    id=\"evidence-upload\"\n                    accept=\".pdf,.doc,.docx,.jpg,.jpeg,.png,.zip\"\n                  />\n                  <label htmlFor=\"evidence-upload\" className=\"cursor-pointer\">\n                    <i className=\"ri-upload-cloud-line text-4xl text-slate-400 mb-2\"></i>\n                    <p className=\"text-sm text-slate-600 mb-1\">Click to upload files</p>\n                    <p className=\"text-xs text-slate-500\">PDF, DOC, JPG, PNG, ZIP (max 10MB each)</p>\n                  </label>\n                </div>\n                {evidenceFiles.length > 0 && (\n                  <div className=\"mt-3 space-y-2\">\n                    {evidenceFiles.map((file, index) => (\n                      <div key={index} className=\"flex items-center gap-2 text-sm text-slate-700 bg-slate-50 px-3 py-2 rounded\">\n                        <i className=\"ri-file-line\"></i>\n                        <span className=\"flex-1\">{file.name}</span>\n                        <span className=\"text-slate-500\">{(file.size / 1024).toFixed(1)} KB</span>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n\n              {error && (\n                <div className=\"bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-800\">\n                  {error}\n                </div>\n              )}\n\n              <div className=\"flex gap-3\">\n                <button\n                  onClick={() => setStep('eligibility')}\n                  className=\"flex-1 border border-slate-300 text-slate-700 py-3 rounded-lg font-medium hover:bg-slate-50 transition-colors whitespace-nowrap\"\n                >\n                  Back\n                </button>\n                <button\n                  onClick={handleSubmitDetails}\n                  className=\"flex-1 bg-teal-500 text-white py-3 rounded-lg font-medium hover:bg-teal-600 transition-colors whitespace-nowrap\"\n                >\n                  Continue to Payment\n                </button>\n              </div>\n            </div>\n          )}\n\n          {/* Payment */}\n          {step === 'payment' && (\n            <div className=\"space-y-6\">\n              <div className=\"bg-slate-50 rounded-lg p-4\">\n                <h3 className=\"font-semibold text-slate-900 mb-3\">Dispute Summary</h3>\n                <div className=\"space-y-2 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-slate-600\">Type:</span>\n                    <span className=\"font-medium text-slate-900\">\n                      {DISPUTE_TYPES.find(t => t.value === disputeType)?.label}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-slate-600\">Subject:</span>\n                    <span className=\"font-medium text-slate-900\">{subject}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-slate-600\">Evidence Files:</span>\n                    <span className=\"font-medium text-slate-900\">{evidenceFiles.length} file(s)</span>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-4\">\n                <div className=\"flex items-start gap-3\">\n                  <i className=\"ri-information-line text-xl text-amber-600 flex-shrink-0\"></i>\n                  <div className=\"text-sm text-amber-800\">\n                    <p className=\"font-semibold mb-1\">Dispute Fee: ${disputeFee}</p>\n                    <p>This fee will be refunded if the dispute is resolved in your favor. The fee helps prevent frivolous disputes and covers administrative costs.</p>\n                  </div>\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-slate-700 mb-2\">\n                  Payment Method <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"text\"\n                  value={paymentMethodId}\n                  onChange={(e) => setPaymentMethodId(e.target.value)}\n                  placeholder=\"Enter payment method ID (e.g., card_1234...)\"\n                  className=\"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n                />\n                <p className=\"text-sm text-slate-500 mt-1\">\n                  In production, this would integrate with Stripe/PayPal payment form\n                </p>\n              </div>\n\n              {error && (\n                <div className=\"bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-800\">\n                  {error}\n                </div>\n              )}\n\n              <div className=\"flex gap-3\">\n                <button\n                  onClick={() => setStep('details')}\n                  disabled={loading}\n                  className=\"flex-1 border border-slate-300 text-slate-700 py-3 rounded-lg font-medium hover:bg-slate-50 transition-colors disabled:opacity-50 whitespace-nowrap\"\n                >\n                  Back\n                </button>\n                <button\n                  onClick={handlePaymentSubmit}\n                  disabled={loading}\n                  className=\"flex-1 bg-teal-500 text-white py-3 rounded-lg font-medium hover:bg-teal-600 transition-colors disabled:opacity-50 flex items-center justify-center gap-2 whitespace-nowrap\"\n                >\n                  {loading ? (\n                    <>\n                      <i className=\"ri-loader-4-line animate-spin\"></i>\n                      Processing...\n                    </>\n                  ) : (\n                    `Pay $${disputeFee} & Submit Dispute`\n                  )}\n                </button>\n              </div>\n            </div>\n          )}\n\n          {/* Confirmation */}\n          {step === 'confirmation' && (\n            <div className=\"text-center py-8\">\n              <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <i className=\"ri-check-line text-3xl text-green-600\"></i>\n              </div>\n              <h3 className=\"text-xl font-semibold text-slate-900 mb-2\">Dispute Filed Successfully</h3>\n              <p className=\"text-slate-600 mb-6\">\n                Your dispute has been submitted and automatically escalated to our admin team for review.\n              </p>\n              <div className=\"bg-slate-50 rounded-lg p-4 text-left space-y-2 text-sm mb-6\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-slate-600\">Dispute Fee:</span>\n                  <span className=\"font-medium text-slate-900\">${disputeFee} (Paid)</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-slate-600\">Escrow Status:</span>\n                  <span className=\"font-medium text-amber-600\">Held</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-slate-600\">Next Steps:</span>\n                  <span className=\"font-medium text-slate-900\">Admin Review</span>\n                </div>\n              </div>\n              <p className=\"text-sm text-slate-600\">\n                You will receive email and dashboard notifications as your dispute progresses.\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import type { Review, ReviewRequest, TrustScore, VerificationBadge, ReviewStats, SearchRankingFactors } from '../types/review';\n\n/**\n * Calculate trust score based on multiple factors\n */\nexport const calculateTrustScore = (\n  averageRating: number,\n  totalReviews: number,\n  completionRate: number,\n  cancellationRate: number,\n  disputeRate: number,\n  responseRate: number,\n  wouldWorkAgainPercentage: number\n): number => {\n  // Weighted scoring algorithm\n  const ratingScore = (averageRating / 5) * 30; // 30% weight\n  const reviewVolumeScore = Math.min((totalReviews / 50) * 15, 15); // 15% weight, cap at 50 reviews\n  const completionScore = completionRate * 0.25; // 25% weight\n  const cancellationPenalty = cancellationRate * 10; // Penalty\n  const disputePenalty = disputeRate * 15; // Higher penalty\n  const responseScore = responseRate * 0.15; // 15% weight\n  const recommendationScore = (wouldWorkAgainPercentage / 100) * 15; // 15% weight\n\n  const totalScore = Math.max(\n    0,\n    Math.min(\n      100,\n      ratingScore + reviewVolumeScore + completionScore + responseScore + recommendationScore - cancellationPenalty - disputePenalty\n    )\n  );\n\n  return Math.round(totalScore * 10) / 10;\n};\n\n/**\n * Calculate search ranking score\n */\nexport const calculateSearchRanking = (\n  trustScore: number,\n  averageRating: number,\n  completionRate: number,\n  responseTime: number, // in hours\n  isVerified: boolean\n): SearchRankingFactors => {\n  const trustScoreWeight = trustScore * 0.35; // 35% weight\n  const reviewRatingWeight = (averageRating / 5) * 25; // 25% weight\n  const completionRateWeight = completionRate * 0.20; // 20% weight\n  const responseTimeWeight = Math.max(0, (48 - responseTime) / 48) * 10; // 10% weight, faster = better\n  const verificationWeight = isVerified ? 10 : 0; // 10% weight\n\n  const totalScore = trustScoreWeight + reviewRatingWeight + completionRateWeight + responseTimeWeight + verificationWeight;\n\n  return {\n    userId: '',\n    baseScore: trustScore,\n    trustScoreWeight,\n    reviewRatingWeight,\n    completionRateWeight,\n    responseTimeWeight,\n    verificationWeight,\n    totalScore: Math.round(totalScore * 10) / 10,\n    rank: 0,\n    lastCalculated: new Date().toISOString()\n  };\n};\n\n/**\n * Determine if user should receive verification badge\n */\nexport const shouldGrantVerification = (\n  profileComplete: boolean,\n  documentsValidated: boolean,\n  identityVerified: boolean,\n  licenseVerified: boolean,\n  backgroundCheckPassed: boolean\n): boolean => {\n  return (\n    profileComplete &&\n    documentsValidated &&\n    identityVerified &&\n    licenseVerified &&\n    backgroundCheckPassed\n  );\n};\n\n/**\n * Calculate badge level based on criteria\n */\nexport const calculateBadgeLevel = (\n  verificationCriteria: VerificationBadge['verificationCriteria'],\n  trustScore: number,\n  totalReviews: number\n): VerificationBadge['badgeLevel'] => {\n  const allCriteriaMet = Object.values(verificationCriteria).every(v => v === true);\n\n  if (allCriteriaMet && trustScore >= 95 && totalReviews >= 20) {\n    return 'elite';\n  } else if (allCriteriaMet && trustScore >= 90 && totalReviews >= 10) {\n    return 'premium';\n  } else if (\n    verificationCriteria.profileComplete &&\n    verificationCriteria.documentsValidated &&\n    verificationCriteria.identityVerified\n  ) {\n    return 'verified';\n  }\n  return 'basic';\n};\n\n/**\n * Trigger review request after payment release\n */\nexport const triggerReviewRequest = (\n  assignmentId: string,\n  physicianId: string,\n  physicianName: string,\n  facilityId: string,\n  facilityName: string\n): ReviewRequest => {\n  const requestedAt = new Date();\n  const expiresAt = new Date(requestedAt);\n  expiresAt.setDate(expiresAt.getDate() + 14); // 14 days to submit review\n\n  return {\n    id: `req-${Date.now()}`,\n    assignmentId,\n    physicianId,\n    physicianName,\n    facilityId,\n    facilityName,\n    requestedAt: requestedAt.toISOString(),\n    expiresAt: expiresAt.toISOString(),\n    physicianReviewSubmitted: false,\n    facilityReviewSubmitted: false,\n    remindersSent: 0\n  };\n};\n\n/**\n * Submit a review\n */\nexport const submitReview = (\n  assignmentId: string,\n  reviewerId: string,\n  reviewerName: string,\n  reviewerRole: 'physician' | 'facility',\n  revieweeId: string,\n  revieweeName: string,\n  revieweeRole: 'physician' | 'facility',\n  rating: number,\n  visibility: 'public' | 'anonymous',\n  title: string,\n  comment: string,\n  pros: string[],\n  cons: string[],\n  wouldWorkAgain: boolean\n): Review => {\n  const reviewType: Review['reviewType'] =\n    reviewerRole === 'physician' ? 'physician_to_facility' : 'facility_to_physician';\n\n  return {\n    id: `rev-${Date.now()}`,\n    assignmentId,\n    reviewType,\n    reviewerId,\n    reviewerName: visibility === 'anonymous' ? 'Anonymous' : reviewerName,\n    reviewerRole,\n    revieweeId,\n    revieweeName,\n    revieweeRole,\n    rating,\n    visibility,\n    title,\n    comment,\n    pros,\n    cons,\n    wouldWorkAgain,\n    status: 'submitted',\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n    helpfulCount: 0,\n    reportCount: 0\n  };\n};\n\n/**\n * Calculate review statistics for a user\n */\nexport const calculateReviewStats = (reviews: Review[]): ReviewStats => {\n  const totalReviews = reviews.length;\n  const averageRating = totalReviews > 0\n    ? reviews.reduce((sum, r) => sum + r.rating, 0) / totalReviews\n    : 0;\n\n  const ratingDistribution = {\n    fiveStar: reviews.filter(r => r.rating === 5).length,\n    fourStar: reviews.filter(r => r.rating === 4).length,\n    threeStar: reviews.filter(r => r.rating === 3).length,\n    twoStar: reviews.filter(r => r.rating === 2).length,\n    oneStar: reviews.filter(r => r.rating === 1).length\n  };\n\n  const wouldWorkAgainCount = reviews.filter(r => r.wouldWorkAgain).length;\n  const wouldWorkAgainPercentage = totalReviews > 0\n    ? (wouldWorkAgainCount / totalReviews) * 100\n    : 0;\n\n  // Extract top pros and cons\n  const allPros: string[] = [];\n  const allCons: string[] = [];\n  reviews.forEach(r => {\n    if (r.pros) allPros.push(...r.pros);\n    if (r.cons) allCons.push(...r.cons);\n  });\n\n  const prosCount = allPros.reduce((acc, pro) => {\n    acc[pro] = (acc[pro] || 0) + 1;\n    return acc;\n  }, {} as Record<string, number>);\n\n  const consCount = allCons.reduce((acc, con) => {\n    acc[con] = (acc[con] || 0) + 1;\n    return acc;\n  }, {} as Record<string, number>);\n\n  const topPros = Object.entries(prosCount)\n    .sort((a, b) => b[1] - a[1])\n    .slice(0, 5)\n    .map(([pro]) => pro);\n\n  const topCons = Object.entries(consCount)\n    .sort((a, b) => b[1] - a[1])\n    .slice(0, 5)\n    .map(([con]) => con);\n\n  return {\n    userId: reviews[0]?.revieweeId || '',\n    userType: reviews[0]?.revieweeRole || 'physician',\n    totalReviews,\n    averageRating: Math.round(averageRating * 10) / 10,\n    ratingDistribution,\n    recentReviews: reviews.slice(0, 5),\n    topPros,\n    topCons,\n    wouldWorkAgainPercentage: Math.round(wouldWorkAgainPercentage * 10) / 10,\n    responseToReviews: 0,\n    lastReviewDate: reviews[0]?.createdAt\n  };\n};\n\n/**\n * Check if review should be flagged for moderation\n */\nexport const shouldFlagReview = (review: Review): boolean => {\n  const suspiciousPatterns = [\n    /\\b(fake|scam|fraud|lie|liar)\\b/i,\n    /\\b(worst|terrible|horrible|awful)\\b.*\\b(worst|terrible|horrible|awful)\\b/i,\n    /[A-Z]{10,}/, // Excessive caps\n    /(.)\\1{5,}/, // Repeated characters\n  ];\n\n  const textToCheck = `${review.title} ${review.comment}`;\n  return suspiciousPatterns.some(pattern => pattern.test(textToCheck));\n};\n\n/**\n * Update trust score after new review\n */\nexport const updateTrustScoreAfterReview = (\n  currentScore: TrustScore,\n  newReview: Review\n): TrustScore => {\n  const totalReviews = currentScore.totalReviews + 1;\n  const newAverageRating =\n    (currentScore.averageRating * currentScore.totalReviews + newReview.rating) / totalReviews;\n\n  let positiveReviews = currentScore.positiveReviews;\n  let neutralReviews = currentScore.neutralReviews;\n  let negativeReviews = currentScore.negativeReviews;\n\n  if (newReview.rating >= 4) positiveReviews++;\n  else if (newReview.rating === 3) neutralReviews++;\n  else negativeReviews++;\n\n  const wouldWorkAgainCount =\n    (currentScore.wouldWorkAgainPercentage / 100) * currentScore.totalReviews +\n    (newReview.wouldWorkAgain ? 1 : 0);\n  const wouldWorkAgainPercentage = (wouldWorkAgainCount / totalReviews) * 100;\n\n  const overallScore = calculateTrustScore(\n    newAverageRating,\n    totalReviews,\n    currentScore.completionRate,\n    currentScore.cancellationRate,\n    currentScore.disputeRate,\n    currentScore.responseRate,\n    wouldWorkAgainPercentage\n  );\n\n  // Determine trend\n  let trend: TrustScore['trend'] = 'stable';\n  if (overallScore > currentScore.overallScore + 2) trend = 'improving';\n  else if (overallScore < currentScore.overallScore - 2) trend = 'declining';\n\n  return {\n    ...currentScore,\n    overallScore,\n    averageRating: Math.round(newAverageRating * 10) / 10,\n    totalReviews,\n    positiveReviews,\n    neutralReviews,\n    negativeReviews,\n    wouldWorkAgainPercentage: Math.round(wouldWorkAgainPercentage * 10) / 10,\n    lastUpdated: new Date().toISOString(),\n    trend\n  };\n};\n\n/**\n * Send review reminder\n */\nexport const sendReviewReminder = (reviewRequest: ReviewRequest): ReviewRequest => {\n  return {\n    ...reviewRequest,\n    remindersSent: reviewRequest.remindersSent + 1,\n    lastReminderAt: new Date().toISOString()\n  };\n};\n\n/**\n * Check if review request has expired\n */\nexport const isReviewRequestExpired = (reviewRequest: ReviewRequest): boolean => {\n  return new Date(reviewRequest.expiresAt) < new Date();\n};","import { useState } from 'react';\nimport type { Review } from '../../types/review';\nimport { submitReview } from '../../utils/reviewManager';\n\ninterface ReviewSubmissionModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  assignmentId: string;\n  reviewerId: string;\n  reviewerName: string;\n  reviewerRole: 'physician' | 'facility';\n  revieweeId: string;\n  revieweeName: string;\n  revieweeRole: 'physician' | 'facility';\n  onSubmit: (review: Review) => void;\n}\n\nconst ReviewSubmissionModal = ({\n  isOpen,\n  onClose,\n  assignmentId,\n  reviewerId,\n  reviewerName,\n  reviewerRole,\n  revieweeId,\n  revieweeName,\n  revieweeRole,\n  onSubmit\n}: ReviewSubmissionModalProps) => {\n  const [step, setStep] = useState(1);\n  const [rating, setRating] = useState(0);\n  const [hoverRating, setHoverRating] = useState(0);\n  const [visibility, setVisibility] = useState<'public' | 'anonymous'>('public');\n  const [title, setTitle] = useState('');\n  const [comment, setComment] = useState('');\n  const [pros, setPros] = useState<string[]>(['']);\n  const [cons, setCons] = useState<string[]>(['']);\n  const [wouldWorkAgain, setWouldWorkAgain] = useState<boolean | null>(null);\n  const [loading, setLoading] = useState(false);\n\n  if (!isOpen) return null;\n\n  const handleAddPro = () => {\n    setPros([...pros, '']);\n  };\n\n  const handleRemovePro = (index: number) => {\n    setPros(pros.filter((_, i) => i !== index));\n  };\n\n  const handleProChange = (index: number, value: string) => {\n    const newPros = [...pros];\n    newPros[index] = value;\n    setPros(newPros);\n  };\n\n  const handleAddCon = () => {\n    setCons([...cons, '']);\n  };\n\n  const handleRemoveCon = (index: number) => {\n    setCons(cons.filter((_, i) => i !== index));\n  };\n\n  const handleConChange = (index: number, value: string) => {\n    const newCons = [...cons];\n    newCons[index] = value;\n    setCons(newCons);\n  };\n\n  const handleSubmit = async () => {\n    if (rating === 0 || !title || !comment || wouldWorkAgain === null) {\n      alert('Please complete all required fields');\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      const review = submitReview(\n        assignmentId,\n        reviewerId,\n        reviewerName,\n        reviewerRole,\n        revieweeId,\n        revieweeName,\n        revieweeRole,\n        rating,\n        visibility,\n        title,\n        comment,\n        pros.filter(p => p.trim() !== ''),\n        cons.filter(c => c.trim() !== ''),\n        wouldWorkAgain\n      );\n\n      onSubmit(review);\n      setStep(3);\n      setTimeout(() => {\n        onClose();\n        resetForm();\n      }, 2000);\n    } catch (error) {\n      alert('Failed to submit review. Please try again.');\n      setLoading(false);\n    }\n  };\n\n  const resetForm = () => {\n    setStep(1);\n    setRating(0);\n    setHoverRating(0);\n    setVisibility('public');\n    setTitle('');\n    setComment('');\n    setPros(['']);\n    setCons(['']);\n    setWouldWorkAgain(null);\n    setLoading(false);\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n        {/* Header */}\n        <div className=\"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-xl font-semibold text-slate-900\">Leave a Review</h2>\n            <p className=\"text-sm text-slate-600 mt-1\">\n              Share your experience with {revieweeName}\n            </p>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"w-8 h-8 flex items-center justify-center text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors whitespace-nowrap\"\n          >\n            <i className=\"ri-close-line text-xl\"></i>\n          </button>\n        </div>\n\n        {/* Progress Steps */}\n        {step < 3 && (\n          <div className=\"px-6 py-4 bg-slate-50 border-b\">\n            <div className=\"flex items-center justify-between max-w-md mx-auto\">\n              <div className=\"flex items-center\">\n                <div className={`w-8 h-8 flex items-center justify-center rounded-full ${step >= 1 ? 'bg-teal-500 text-white' : 'bg-slate-200 text-slate-500'}`}>\n                  1\n                </div>\n                <span className=\"ml-2 text-sm font-medium text-slate-700\">Rating</span>\n              </div>\n              <div className=\"flex-1 h-0.5 bg-slate-200 mx-4\">\n                <div className={`h-full bg-teal-500 transition-all ${step >= 2 ? 'w-full' : 'w-0'}`}></div>\n              </div>\n              <div className=\"flex items-center\">\n                <div className={`w-8 h-8 flex items-center justify-center rounded-full ${step >= 2 ? 'bg-teal-500 text-white' : 'bg-slate-200 text-slate-500'}`}>\n                  2\n                </div>\n                <span className=\"ml-2 text-sm font-medium text-slate-700\">Details</span>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Step 1: Rating */}\n        {step === 1 && (\n          <div className=\"p-6\">\n            <div className=\"text-center mb-8\">\n              <h3 className=\"text-lg font-semibold text-slate-900 mb-2\">\n                How would you rate your experience?\n              </h3>\n              <p className=\"text-sm text-slate-600\">\n                Your honest feedback helps others make informed decisions\n              </p>\n            </div>\n\n            {/* Star Rating */}\n            <div className=\"flex items-center justify-center gap-2 mb-8\">\n              {[1, 2, 3, 4, 5].map((star) => (\n                <button\n                  key={star}\n                  onClick={() => setRating(star)}\n                  onMouseEnter={() => setHoverRating(star)}\n                  onMouseLeave={() => setHoverRating(0)}\n                  className=\"w-12 h-12 flex items-center justify-center transition-transform hover:scale-110 whitespace-nowrap\"\n                >\n                  <i\n                    className={`text-4xl ${\n                      star <= (hoverRating || rating)\n                        ? 'ri-star-fill text-amber-400'\n                        : 'ri-star-line text-slate-300'\n                    }`}\n                  ></i>\n                </button>\n              ))}\n            </div>\n\n            {rating > 0 && (\n              <div className=\"text-center mb-8\">\n                <p className=\"text-lg font-medium text-slate-900\">\n                  {rating === 5 && 'Excellent!'}\n                  {rating === 4 && 'Very Good'}\n                  {rating === 3 && 'Good'}\n                  {rating === 2 && 'Fair'}\n                  {rating === 1 && 'Poor'}\n                </p>\n              </div>\n            )}\n\n            {/* Visibility Toggle */}\n            <div className=\"bg-slate-50 rounded-lg p-4 mb-6\">\n              <label className=\"text-sm font-medium text-slate-700 mb-3 block\">\n                Review Visibility\n              </label>\n              <div className=\"flex gap-3\">\n                <button\n                  onClick={() => setVisibility('public')}\n                  className={`flex-1 p-3 rounded-lg border-2 transition-all whitespace-nowrap ${\n                    visibility === 'public'\n                      ? 'border-teal-500 bg-teal-50'\n                      : 'border-slate-200 bg-white hover:border-slate-300'\n                  }`}\n                >\n                  <div className=\"flex items-center justify-center gap-2\">\n                    <i className=\"ri-user-line text-lg\"></i>\n                    <span className=\"font-medium\">Public</span>\n                  </div>\n                  <p className=\"text-xs text-slate-600 mt-1\">Show my name</p>\n                </button>\n                <button\n                  onClick={() => setVisibility('anonymous')}\n                  className={`flex-1 p-3 rounded-lg border-2 transition-all whitespace-nowrap ${\n                    visibility === 'anonymous'\n                      ? 'border-teal-500 bg-teal-50'\n                      : 'border-slate-200 bg-white hover:border-slate-300'\n                  }`}\n                >\n                  <div className=\"flex items-center justify-center gap-2\">\n                    <i className=\"ri-user-unfollow-line text-lg\"></i>\n                    <span className=\"font-medium\">Anonymous</span>\n                  </div>\n                  <p className=\"text-xs text-slate-600 mt-1\">Hide my identity</p>\n                </button>\n              </div>\n            </div>\n\n            {/* Would Work Again */}\n            <div className=\"bg-slate-50 rounded-lg p-4 mb-6\">\n              <label className=\"text-sm font-medium text-slate-700 mb-3 block\">\n                Would you work with {revieweeName} again? *\n              </label>\n              <div className=\"flex gap-3\">\n                <button\n                  onClick={() => setWouldWorkAgain(true)}\n                  className={`flex-1 p-3 rounded-lg border-2 transition-all whitespace-nowrap ${\n                    wouldWorkAgain === true\n                      ? 'border-green-500 bg-green-50'\n                      : 'border-slate-200 bg-white hover:border-slate-300'\n                  }`}\n                >\n                  <i className=\"ri-thumb-up-line text-xl text-green-600\"></i>\n                  <p className=\"font-medium mt-1\">Yes</p>\n                </button>\n                <button\n                  onClick={() => setWouldWorkAgain(false)}\n                  className={`flex-1 p-3 rounded-lg border-2 transition-all whitespace-nowrap ${\n                    wouldWorkAgain === false\n                      ? 'border-red-500 bg-red-50'\n                      : 'border-slate-200 bg-white hover:border-slate-300'\n                  }`}\n                >\n                  <i className=\"ri-thumb-down-line text-xl text-red-600\"></i>\n                  <p className=\"font-medium mt-1\">No</p>\n                </button>\n              </div>\n            </div>\n\n            <button\n              onClick={() => setStep(2)}\n              disabled={rating === 0 || wouldWorkAgain === null}\n              className=\"w-full py-3 bg-teal-500 text-white rounded-lg font-medium hover:bg-teal-600 disabled:bg-slate-300 disabled:cursor-not-allowed transition-colors whitespace-nowrap\"\n            >\n              Continue\n            </button>\n          </div>\n        )}\n\n        {/* Step 2: Details */}\n        {step === 2 && (\n          <div className=\"p-6\">\n            {/* Title */}\n            <div className=\"mb-6\">\n              <label className=\"text-sm font-medium text-slate-700 mb-2 block\">\n                Review Title *\n              </label>\n              <input\n                type=\"text\"\n                value={title}\n                onChange={(e) => setTitle(e.target.value)}\n                placeholder=\"Summarize your experience\"\n                maxLength={200}\n                className=\"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n              />\n              <p className=\"text-xs text-slate-500 mt-1\">{title.length}/200 characters</p>\n            </div>\n\n            {/* Comment */}\n            <div className=\"mb-6\">\n              <label className=\"text-sm font-medium text-slate-700 mb-2 block\">\n                Detailed Review *\n              </label>\n              <textarea\n                value={comment}\n                onChange={(e) => setComment(e.target.value)}\n                placeholder=\"Share your experience in detail...\"\n                rows={5}\n                maxLength={2000}\n                className=\"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent resize-none\"\n              ></textarea>\n              <p className=\"text-xs text-slate-500 mt-1\">{comment.length}/2000 characters</p>\n            </div>\n\n            {/* Pros */}\n            <div className=\"mb-6\">\n              <label className=\"text-sm font-medium text-slate-700 mb-2 block\">\n                What went well? (Optional)\n              </label>\n              {pros.map((pro, index) => (\n                <div key={index} className=\"flex gap-2 mb-2\">\n                  <input\n                    type=\"text\"\n                    value={pro}\n                    onChange={(e) => handleProChange(index, e.target.value)}\n                    placeholder=\"e.g., Great communication\"\n                    className=\"flex-1 px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n                  />\n                  {pros.length > 1 && (\n                    <button\n                      onClick={() => handleRemovePro(index)}\n                      className=\"w-10 h-10 flex items-center justify-center text-red-500 hover:bg-red-50 rounded-lg transition-colors whitespace-nowrap\"\n                    >\n                      <i className=\"ri-close-line text-xl\"></i>\n                    </button>\n                  )}\n                </div>\n              ))}\n              {pros.length < 5 && (\n                <button\n                  onClick={handleAddPro}\n                  className=\"text-sm text-teal-600 hover:text-teal-700 font-medium whitespace-nowrap\"\n                >\n                  + Add another pro\n                </button>\n              )}\n            </div>\n\n            {/* Cons */}\n            <div className=\"mb-6\">\n              <label className=\"text-sm font-medium text-slate-700 mb-2 block\">\n                What could be improved? (Optional)\n              </label>\n              {cons.map((con, index) => (\n                <div key={index} className=\"flex gap-2 mb-2\">\n                  <input\n                    type=\"text\"\n                    value={con}\n                    onChange={(e) => handleConChange(index, e.target.value)}\n                    placeholder=\"e.g., Better scheduling\"\n                    className=\"flex-1 px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent\"\n                  />\n                  {cons.length > 1 && (\n                    <button\n                      onClick={() => handleRemoveCon(index)}\n                      className=\"w-10 h-10 flex items-center justify-center text-red-500 hover:bg-red-50 rounded-lg transition-colors whitespace-nowrap\"\n                    >\n                      <i className=\"ri-close-line text-xl\"></i>\n                    </button>\n                  )}\n                </div>\n              ))}\n              {cons.length < 5 && (\n                <button\n                  onClick={handleAddCon}\n                  className=\"text-sm text-teal-600 hover:text-teal-700 font-medium whitespace-nowrap\"\n                >\n                  + Add another con\n                </button>\n              )}\n            </div>\n\n            {/* Actions */}\n            <div className=\"flex gap-3\">\n              <button\n                onClick={() => setStep(1)}\n                className=\"flex-1 py-3 border border-slate-300 text-slate-700 rounded-lg font-medium hover:bg-slate-50 transition-colors whitespace-nowrap\"\n              >\n                Back\n              </button>\n              <button\n                onClick={handleSubmit}\n                disabled={!title || !comment || loading}\n                className=\"flex-1 py-3 bg-teal-500 text-white rounded-lg font-medium hover:bg-teal-600 disabled:bg-slate-300 disabled:cursor-not-allowed transition-colors whitespace-nowrap\"\n              >\n                {loading ? (\n                  <span className=\"flex items-center justify-center gap-2\">\n                    <i className=\"ri-loader-4-line animate-spin\"></i>\n                    Submitting...\n                  </span>\n                ) : (\n                  'Submit Review'\n                )}\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* Step 3: Success */}\n        {step === 3 && (\n          <div className=\"p-6 text-center\">\n            <div className=\"w-16 h-16 flex items-center justify-center bg-green-100 rounded-full mx-auto mb-4\">\n              <i className=\"ri-check-line text-3xl text-green-600\"></i>\n            </div>\n            <h3 className=\"text-xl font-semibold text-slate-900 mb-2\">Review Submitted!</h3>\n            <p className=\"text-slate-600 mb-6\">\n              Thank you for sharing your feedback. Your review helps build trust in our community.\n            </p>\n            <div className=\"bg-slate-50 rounded-lg p-4\">\n              <p className=\"text-sm text-slate-600\">\n                Your review will be visible on {revieweeName}'s profile shortly.\n              </p>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ReviewSubmissionModal;","import { useState, useEffect } from 'react';\nimport type { ReviewRequest } from '../../types/review';\nimport ReviewSubmissionModal from './ReviewSubmissionModal';\n\ninterface ReviewRequestNotificationProps {\n  reviewRequests: ReviewRequest[];\n  currentUserId: string;\n  currentUserRole: 'physician' | 'facility';\n  onReviewSubmitted: (reviewRequestId: string) => void;\n}\n\nconst ReviewRequestNotification = ({\n  reviewRequests,\n  currentUserId,\n  currentUserRole,\n  onReviewSubmitted\n}: ReviewRequestNotificationProps) => {\n  const [showModal, setShowModal] = useState(false);\n  const [selectedRequest, setSelectedRequest] = useState<ReviewRequest | null>(null);\n  const [dismissedRequests, setDismissedRequests] = useState<string[]>([]);\n\n  // Filter pending requests for current user\n  const pendingRequests = reviewRequests.filter((req) => {\n    if (dismissedRequests.includes(req.id)) return false;\n\n    if (currentUserRole === 'physician') {\n      return req.physicianId === currentUserId && !req.physicianReviewSubmitted;\n    } else {\n      return req.facilityId === currentUserId && !req.facilityReviewSubmitted;\n    }\n  });\n\n  const handleOpenReviewModal = (request: ReviewRequest) => {\n    setSelectedRequest(request);\n    setShowModal(true);\n  };\n\n  const handleDismiss = (requestId: string) => {\n    setDismissedRequests([...dismissedRequests, requestId]);\n  };\n\n  const handleReviewSubmit = () => {\n    if (selectedRequest) {\n      onReviewSubmitted(selectedRequest.id);\n      setShowModal(false);\n      setSelectedRequest(null);\n      handleDismiss(selectedRequest.id);\n    }\n  };\n\n  const getDaysRemaining = (expiresAt: string) => {\n    const now = new Date();\n    const expiry = new Date(expiresAt);\n    const diffTime = expiry.getTime() - now.getTime();\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    return diffDays;\n  };\n\n  if (pendingRequests.length === 0) return null;\n\n  return (\n    <>\n      {/* Notification Banner */}\n      <div className=\"bg-gradient-to-r from-teal-500 to-teal-600 text-white rounded-lg shadow-lg mb-6\">\n        <div className=\"p-6\">\n          <div className=\"flex items-start gap-4\">\n            <div className=\"w-12 h-12 flex items-center justify-center bg-white/20 rounded-full flex-shrink-0\">\n              <i className=\"ri-star-line text-2xl\"></i>\n            </div>\n            <div className=\"flex-1\">\n              <h3 className=\"text-lg font-semibold mb-2\">\n                {pendingRequests.length === 1\n                  ? 'You have a pending review request'\n                  : `You have ${pendingRequests.length} pending review requests`}\n              </h3>\n              <p className=\"text-teal-50 mb-4\">\n                Share your experience to help build trust in our community\n              </p>\n\n              {/* Review Request Cards */}\n              <div className=\"space-y-3\">\n                {pendingRequests.map((request) => {\n                  const daysRemaining = getDaysRemaining(request.expiresAt);\n                  const isUrgent = daysRemaining <= 3;\n                  const revieweeName =\n                    currentUserRole === 'physician'\n                      ? request.facilityName\n                      : request.physicianName;\n\n                  return (\n                    <div\n                      key={request.id}\n                      className=\"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20\"\n                    >\n                      <div className=\"flex items-center justify-between gap-4\">\n                        <div className=\"flex-1\">\n                          <h4 className=\"font-semibold mb-1\">{revieweeName}</h4>\n                          <p className=\"text-sm text-teal-50\">\n                            Assignment ID: {request.assignmentId}\n                          </p>\n                          <div className=\"flex items-center gap-2 mt-2\">\n                            <i className=\"ri-time-line text-sm\"></i>\n                            <span className=\"text-sm\">\n                              {isUrgent ? (\n                                <span className=\"font-semibold\">\n                                  {daysRemaining} {daysRemaining === 1 ? 'day' : 'days'} remaining\n                                </span>\n                              ) : (\n                                `${daysRemaining} days remaining`\n                              )}\n                            </span>\n                          </div>\n                        </div>\n\n                        <div className=\"flex items-center gap-2\">\n                          <button\n                            onClick={() => handleOpenReviewModal(request)}\n                            className=\"px-4 py-2 bg-white text-teal-600 rounded-lg font-medium hover:bg-teal-50 transition-colors whitespace-nowrap\"\n                          >\n                            Leave Review\n                          </button>\n                          <button\n                            onClick={() => handleDismiss(request.id)}\n                            className=\"w-8 h-8 flex items-center justify-center text-white/80 hover:text-white hover:bg-white/10 rounded-lg transition-colors whitespace-nowrap\"\n                          >\n                            <i className=\"ri-close-line text-xl\"></i>\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Review Submission Modal */}\n      {selectedRequest && (\n        <ReviewSubmissionModal\n          isOpen={showModal}\n          onClose={() => {\n            setShowModal(false);\n            setSelectedRequest(null);\n          }}\n          assignmentId={selectedRequest.assignmentId}\n          reviewerId={currentUserId}\n          reviewerName={\n            currentUserRole === 'physician'\n              ? selectedRequest.physicianName\n              : selectedRequest.facilityName\n          }\n          reviewerRole={currentUserRole}\n          revieweeId={\n            currentUserRole === 'physician'\n              ? selectedRequest.facilityId\n              : selectedRequest.physicianId\n          }\n          revieweeName={\n            currentUserRole === 'physician'\n              ? selectedRequest.facilityName\n              : selectedRequest.physicianName\n          }\n          revieweeRole={currentUserRole === 'physician' ? 'facility' : 'physician'}\n          onSubmit={handleReviewSubmit}\n        />\n      )}\n    </>\n  );\n};\n\nexport default ReviewRequestNotification;","import { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { ProfileStatusBar } from '../../components/feature/ProfileStatusBar';\nimport { NotificationPanel } from '../../components/feature/NotificationPanel';\nimport { SettingsModal } from '../../components/feature/SettingsModal';\nimport { ProfileMenu } from '../../components/feature/ProfileMenu';\nimport AssignmentTabs from './components/AssignmentTabs';\nimport DisputeInitiationModal from '../../components/feature/DisputeInitiationModal';\nimport ReviewRequestNotification from '../../components/feature/ReviewRequestNotification';\nimport { supabase } from '../../utils/supabaseClient';\nimport { useProfileCompletion } from '../../hooks/useProfileCompletion';\n\nconst PhysicianDashboard = () => {\n  const navigate = useNavigate();\n  const [showNotifications, setShowNotifications] = useState(false);\n  const [showSettings, setShowSettings] = useState(false);\n  const [showDisputeModal, setShowDisputeModal] = useState(false);\n  const [selectedAssignmentForDispute, setSelectedAssignmentForDispute] = useState<string | null>(null);\n  const [currentUserName, setCurrentUserName] = useState('Physician');\n  const [currentUserId, setCurrentUserId] = useState('');\n  const [reviewRequests, setReviewRequests] = useState<any[]>([]);\n\n  // Use profile completion hook\n  const { profile, completionPercentage, isProfileComplete, loading } = useProfileCompletion();\n\n  // Get user name and ID from profile or auth metadata\n  useEffect(() => {\n    const getUserInfo = async () => {\n      try {\n        const { data: { user } } = await supabase.auth.getUser();\n        \n        if (user) {\n          // Set user ID\n          setCurrentUserId(user.id);\n          \n          // First priority: Use completed profile data (user's official data)\n          // Check multiple possible field names for compatibility\n          if (profile?.personalIdentifiers) {\n            const firstName = profile.personalIdentifiers.legalFirstName || \n                            profile.personalIdentifiers.firstName ||\n                            profile.personalIdentifiers.first_name;\n            \n            if (firstName) {\n              setCurrentUserName(firstName);\n              return;\n            }\n          }\n\n          // Second priority: Get from Google OAuth metadata if no profile yet\n          const fullName = user.user_metadata?.full_name || user.user_metadata?.name;\n          \n          if (fullName) {\n            // Use just the first name for a friendlier greeting\n            const firstName = fullName.split(' ')[0];\n            setCurrentUserName(firstName);\n          }\n        }\n      } catch (error) {\n        console.error('Error getting user info:', error);\n      }\n    };\n\n    getUserInfo();\n  }, [profile]);\n\n  // Fetch review requests\n  useEffect(() => {\n    const fetchReviewRequests = async () => {\n      try {\n        const { data: user } = await supabase.auth.getUser();\n        if (!user.user) return;\n\n        // TODO: Fetch review requests from database\n        // const { data, error } = await supabase\n        //   .from('review_requests')\n        //   .select('*')\n        //   .eq('physician_id', user.user.id)\n        //   .eq('status', 'pending')\n        //   .order('created_at', { ascending: false });\n\n        // For now, set empty array\n        setReviewRequests([]);\n      } catch (error) {\n        console.error('Error fetching review requests:', error);\n      }\n    };\n\n    fetchReviewRequests();\n  }, []);\n\n  const handleReviewSubmitted = async (reviewRequestId: string) => {\n    console.log('Review submitted for request:', reviewRequestId);\n    // TODO: Update review request status in database\n    // await supabase\n    //   .from('review_requests')\n    //   .update({ status: 'completed' })\n    //   .eq('id', reviewRequestId);\n    \n    // Refresh review requests\n    setReviewRequests(prev => prev.filter(r => r.id !== reviewRequestId));\n  };\n\n  const handleFileDispute = (assignmentId: string) => {\n    setSelectedAssignmentForDispute(assignmentId);\n    setShowDisputeModal(true);\n  };\n\n  const handleCompleteProfile = () => {\n    navigate('/profile-completion');\n  };\n\n  const handleLogout = async () => {\n    await supabase.auth.signOut();\n    navigate('/login');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-slate-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <i className=\"ri-loader-4-line text-4xl text-teal-600 animate-spin\"></i>\n          <p className=\"mt-4 text-slate-600\">Loading your dashboard...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-slate-50\">\n      {/* Top Navigation */}\n      <nav className=\"bg-white border-b border-slate-200 sticky top-0 z-40\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex items-center justify-between h-16\">\n            <button \n              onClick={() => navigate('/')}\n              className=\"flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity\"\n            >\n              <div className=\"w-8 h-8 flex items-center justify-center bg-teal-500 rounded-lg\">\n                <i className=\"ri-stethoscope-line text-lg text-white\"></i>\n              </div>\n              <span className=\"text-xl font-bold text-slate-900\">LOCUM BNB</span>\n            </button>\n\n            <div className=\"flex items-center gap-4\">\n              <button \n                onClick={() => setShowNotifications(!showNotifications)}\n                className=\"w-10 h-10 flex items-center justify-center text-slate-600 hover:bg-slate-100 rounded-lg transition-colors whitespace-nowrap relative\"\n              >\n                <i className=\"ri-notification-3-line text-xl\"></i>\n                <span className=\"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full\"></span>\n              </button>\n              <button \n                onClick={() => setShowSettings(true)}\n                className=\"w-10 h-10 flex items-center justify-center text-slate-600 hover:bg-slate-100 rounded-lg transition-colors whitespace-nowrap\"\n              >\n                <i className=\"ri-settings-3-line text-xl\"></i>\n              </button>\n              <ProfileMenu \n                userName={currentUserName}\n                userRole=\"physician\"\n                onLogout={handleLogout}\n              />\n            </div>\n          </div>\n        </div>\n      </nav>\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Profile Status Bar */}\n        <ProfileStatusBar \n          isComplete={isProfileComplete}\n          completionPercentage={completionPercentage}\n          onCompleteProfile={handleCompleteProfile}\n        />\n\n        {/* Review Request Notifications */}\n        <ReviewRequestNotification\n          reviewRequests={reviewRequests}\n          currentUserId={currentUserId}\n          currentUserRole=\"physician\"\n          onReviewSubmitted={handleReviewSubmitted}\n        />\n\n        {/* Welcome Section */}\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-slate-900 mb-2\">\n            Welcome back, {currentUserName}\n          </h1>\n          <p className=\"text-slate-600\">Manage your assignments and opportunities</p>\n        </div>\n\n        {/* Main Content Tabs */}\n        <AssignmentTabs onFileDispute={handleFileDispute} />\n      </div>\n\n      {/* Notification Panel */}\n      <NotificationPanel \n        isOpen={showNotifications}\n        onClose={() => setShowNotifications(false)}\n      />\n\n      {/* Settings Modal */}\n      <SettingsModal\n        isOpen={showSettings}\n        onClose={() => setShowSettings(false)}\n        userRole=\"physician\"\n      />\n\n      {/* Dispute Initiation Modal */}\n      {selectedAssignmentForDispute && (\n        <DisputeInitiationModal\n          isOpen={showDisputeModal}\n          onClose={() => {\n            setShowDisputeModal(false);\n            setSelectedAssignmentForDispute(null);\n          }}\n          assignmentId={selectedAssignmentForDispute}\n          initiatorId={currentUserId}\n          initiatorName={currentUserName}\n          initiatorRole=\"physician\"\n          respondentId=\"fac-001\"\n          respondentName=\"Memorial Hospital\"\n          respondentRole=\"facility\"\n        />\n      )}\n    </div>\n  );\n};\n\nexport default PhysicianDashboard;"],"names":["ProfileStatusBar","isComplete","completionPercentage","onCompleteProfile","jsx","jsxs","PendingApplications","applications","setApplications","useState","loading","setLoading","selectedApplication","setSelectedApplication","showDetailsModal","setShowDetailsModal","useEffect","fetchApplications","user","supabase","profile","error","pendingApps","app","expiredApps","formatDate","dateString","formatDateTime","getTimeRemaining","deadline","now","diff","hours","minutes","days","isApplicationExpired","handleWithdraw","applicationId","handleViewDetails","l","InvitedAssignments","assignments","setAssignments","showSigningModal","setShowSigningModal","selectedAssignment","setSelectedAssignment","fetchInvitedAssignments","handleReviewDocuments","assignment","handleAcceptInvitation","id","prev","handleDeclineInvitation","Fragment","doc","isSigned","DocumentSigningModal","signedDocs","onClose","onComplete","currentDocIndex","setCurrentDocIndex","signature","setSignature","agreed","setAgreed","signedDocuments","setSignedDocuments","currentDoc","isLastDoc","isCurrentDocSigned","handleSign","updatedSigned","e","UpcomingAssignments","fetchUpcomingAssignments","data","transformedAssignments","item","getDaysUntilStart","startDate","today","diffTime","daysUntil","isStartingSoon","AssignmentDetailsModal","CompletedAssignments","fetchCompletedAssignments","handleUploadInvoice","fileInput","sum","a","CompletedAssignmentModal","onUploadInvoice","newMessage","setNewMessage","handleSendMessage","message","FacilityRequests","requests","setRequests","selectedRequest","setSelectedRequest","replyMessage","setReplyMessage","uploadedFiles","setUploadedFiles","filterStatus","setFilterStatus","formatTimestamp","timestamp","date","diffMs","diffMins","diffHours","diffDays","getRequestTypeIcon","type","getRequestTypeColor","getStatusBadge","status","handleFileUpload","handleSendReply","newResponse","f","req","filteredRequests","pendingCount","r","request","idx","response","file","_","i","standardQuestions","mockQuotes","InsuranceQuestions","answers","setAnswers","quotes","setQuotes","isSaved","setIsSaved","handleAnswerChange","questionId","value","handleSaveAnswers","handleQuoteAction","quoteId","action","quote","isFormComplete","q","question","option","submitInsuranceRequest","physicianId","assignmentId","requestDetails","submitTravelRequest","acceptQuote","requestId","updateServiceRequestStatus","logPlatformFeeTransaction","notifyVendorQuoteAccepted","declineQuote","reason","notifyVendorQuoteDeclined","ThirdPartyServices","getServiceRequestsByPhysician","insuranceQuotes","mockInsuranceQuotes","travelQuotes","mockTravelQuotes","showNewRequestModal","setShowNewRequestModal","dataOptIn","setDataOptIn","requestType","setRequestType","insuranceForm","setInsuranceForm","travelForm","setTravelForm","handleAcceptQuote","quoteType","handleDeclineQuote","handleSubmitInsuranceRequest","handleSubmitTravelRequest","getRequestIcon","getRequestLabel","getStatusColor","getStatusLabel","formatCurrency","amount","requestInsuranceQuotes","getInsuranceQuotesByRequest","requestTravelQuotes","getTravelQuotesByRequest","benefit","log","JobBrowse","isProfileComplete","useProfileCompletion","jobPostings","setJobPostings","mockJobPostings","mockApplications","calendarBlocks","setCalendarBlocks","mockCalendarBlocks","selectedJob","setSelectedJob","showApplicationModal","setShowApplicationModal","applicationError","setApplicationError","filterSpecialty","setFilterSpecialty","sortBy","setSortBy","filteredJobs","job","b","specialties","handleApplyClick","handleSubmitApplication","checkDateOverlap","ipAddress","getIPAddress","deviceInfo","getDeviceInfo","profileSnapshot","appliedAt","reviewDeadline","calculateReviewDeadline","newApplication","calendarBlock","createCalendarBlock","specialty","PhysicianCalendar","currentDate","setCurrentDate","events","setEvents","selectedDate","setSelectedDate","showBlockModal","setShowBlockModal","showEventDetails","setShowEventDetails","selectedEvent","setSelectedEvent","blockForm","setBlockForm","saving","setSaving","fetchCalendarEvents","calendarData","mappedEvents","err","goToPreviousMonth","goToNextMonth","goToToday","getEventsForDate","event","eventStart","eventEnd","checkDate","calendarDays","useMemo","year","month","firstDay","lastDay","startingDayOfWeek","daysInMonth","prevMonthLastDay","remainingDays","getEventColor","getDayBackgroundColor","dayEvents","hasAssignment","hasPersonalBlock","hasTravelBuffer","hasAvailablePublic","hasAvailablePrivate","handleDateClick","dateStr","handleSaveBlock","handleDeleteBlock","eventId","handleToggleVisibility","currentVisibility","newVisibility","monthNames","dayNames","isToday","day","index","dayBgColor","eventIndex","AssignmentTabs","onFileDispute","activeTab","setActiveTab","DISPUTE_FEE_BASE","DISPUTE_FEE_CURRENCY","calculateDisputeFee","userId","userRole","createDispute","params","disputeId","feeAmount","dispute","determinePriority","escalateToAdmin","processDisputeFee","paymentMethodId","transactionId","resolve","canFileDispute","createDisputeAuditLog","DISPUTE_TYPES","DisputeInitiationModal","isOpen","assignmentTitle","facility","physician","initiatedBy","initiatorId","initiatorName","respondentId","respondentName","respondentRole","escrowAmount","onDisputeCreated","step","setStep","disputeType","setDisputeType","subject","setSubject","description","setDescription","evidenceFiles","setEvidenceFiles","setPaymentMethodId","setError","disputeFee","setDisputeFee","eligibilityCheck","setEligibilityCheck","handleEligibilityCheck","check","handleSubmitDetails","handlePaymentSubmit","paymentResult","handleClose","t","submitReview","reviewerId","reviewerName","reviewerRole","revieweeId","revieweeName","revieweeRole","rating","visibility","title","comment","pros","cons","wouldWorkAgain","reviewType","ReviewSubmissionModal","onSubmit","setRating","hoverRating","setHoverRating","setVisibility","setTitle","setComment","setPros","setCons","setWouldWorkAgain","handleAddPro","handleRemovePro","handleProChange","newPros","handleAddCon","handleRemoveCon","handleConChange","newCons","handleSubmit","review","p","c","resetForm","star","pro","con","ReviewRequestNotification","reviewRequests","currentUserId","currentUserRole","onReviewSubmitted","showModal","setShowModal","dismissedRequests","setDismissedRequests","pendingRequests","handleOpenReviewModal","handleDismiss","handleReviewSubmit","getDaysRemaining","expiresAt","daysRemaining","isUrgent","PhysicianDashboard","navigate","useNavigate","showNotifications","setShowNotifications","showSettings","setShowSettings","showDisputeModal","setShowDisputeModal","selectedAssignmentForDispute","setSelectedAssignmentForDispute","currentUserName","setCurrentUserName","setCurrentUserId","setReviewRequests","firstName","fullName","handleReviewSubmitted","reviewRequestId","handleFileDispute","handleCompleteProfile","handleLogout","ProfileMenu","NotificationPanel","SettingsModal"],"mappings":"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"}