import{u as w,r as a,j as e,s as N}from"./index-Cg48h7fn.js";import{g as v,a as y}from"./adminAuditLogger-DDwDAuyc.js";function I(){const g=w(),[l,p]=a.useState(""),[i,b]=a.useState(""),[n,h]=a.useState(!1),[x,o]=a.useState(""),[u,d]=a.useState(!1),f=async t=>{t.preventDefault(),o(""),d(!0);try{await new Promise(j=>setTimeout(j,1e3)),console.log("Attempting login with:",{email:l,password:i});const{data:s,error:c}=await N.from("admin").select("*").eq("email",l).eq("password",i).maybeSingle();if(console.log("Database query result:",{adminUser:s,dbError:c}),c||!s){console.log("Login failed:",c),o("Invalid email or password"),d(!1);return}const m=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,r={sessionId:m,adminId:`admin_${s.email}`,adminEmail:s.email,adminRole:s.role,loginTime:new Date().toISOString(),ipAddress:"Client IP (captured server-side)",deviceInfo:navigator.userAgent,expiresAt:new Date(Date.now()+480*60*1e3).toISOString(),permissions:v(s.role)};localStorage.setItem("admin_session",JSON.stringify(r)),y.log(r.adminId,r.adminEmail,r.adminRole,"ADMIN_LOGIN","session",m,{loginMethod:"password",success:!0},m),g("/admin/dashboard",{replace:!0})}catch{o("An error occurred during login"),d(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"40px 40px"}})}),e.jsxs("div",{className:"relative w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-red-500/20 rounded-full mb-4",children:e.jsx("i",{className:"ri-shield-keyhole-line text-3xl text-red-400"})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Admin Access"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Secure Platform Management Portal"})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-2xl p-8 shadow-2xl",children:[e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Admin Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-mail-line text-slate-500"})}),e.jsx("input",{type:"email",value:l,onChange:t=>p(t.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-900/50 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all",placeholder:"admin@platform.com",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-lock-line text-slate-500"})}),e.jsx("input",{type:n?"text":"password",value:i,onChange:t=>b(t.target.value),className:"w-full pl-10 pr-12 py-3 bg-slate-900/50 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all",placeholder:"Enter your password",required:!0}),e.jsx("button",{type:"button",onClick:()=>h(!n),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-500 hover:text-slate-300 transition-colors",children:e.jsx("i",{className:n?"ri-eye-off-line":"ri-eye-line"})})]})]}),x&&e.jsxs("div",{className:"bg-red-500/10 border border-red-500/50 rounded-lg p-3 flex items-start gap-3",children:[e.jsx("i",{className:"ri-error-warning-line text-red-400 text-lg mt-0.5"}),e.jsx("p",{className:"text-sm text-red-300",children:x})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full bg-red-500 hover:bg-red-600 text-white font-semibold py-3 rounded-lg transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",children:u?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin"}),"Authenticating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-login-box-line"}),"Secure Login"]})})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-slate-700",children:e.jsxs("div",{className:"flex items-start gap-3 text-xs text-slate-400",children:[e.jsx("i",{className:"ri-information-line text-slate-500 mt-0.5"}),e.jsx("p",{children:"All admin sessions are logged and monitored. Unauthorized access attempts will be reported."})]})})]})]})]})}export{I as default};
//# sourceMappingURL=page-BR0KzlV3.js.map
