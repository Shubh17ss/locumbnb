{"version":3,"file":"NotificationPanel-zIli_TJs.js","sources":["../../src/components/feature/NotificationPanel.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { supabase } from '../../utils/supabaseClient';\n\ninterface Notification {\n  id: string;\n  type: 'info' | 'success' | 'warning' | 'error';\n  title: string;\n  message: string;\n  time: string;\n  read: boolean;\n  created_at?: string;\n}\n\ninterface NotificationPanelProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport const NotificationPanel = ({ isOpen, onClose }: NotificationPanelProps) => {\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchNotifications();\n    }\n  }, [isOpen]);\n\n  const fetchNotifications = async () => {\n    try {\n      const { data: user } = await supabase.auth.getUser();\n      if (!user.user) {\n        setLoading(false);\n        return;\n      }\n\n      // TODO: Fetch notifications from your database\n      // Example query structure:\n      // const { data, error } = await supabase\n      //   .from('notifications')\n      //   .select('*')\n      //   .eq('user_id', user.user.id)\n      //   .order('created_at', { ascending: false })\n      //   .limit(50);\n\n      // For now, show empty state\n      setNotifications([]);\n      setLoading(false);\n    } catch (error) {\n      console.error('Error fetching notifications:', error);\n      setLoading(false);\n    }\n  };\n\n  const unreadCount = notifications.filter(n => !n.read).length;\n\n  const markAsRead = async (id: string) => {\n    try {\n      // TODO: Update notification in database\n      // await supabase\n      //   .from('notifications')\n      //   .update({ read: true })\n      //   .eq('id', id);\n\n      setNotifications(notifications.map(n => \n        n.id === id ? { ...n, read: true } : n\n      ));\n    } catch (error) {\n      console.error('Error marking notification as read:', error);\n    }\n  };\n\n  const markAllAsRead = async () => {\n    try {\n      const { data: user } = await supabase.auth.getUser();\n      if (!user.user) return;\n\n      // TODO: Update all notifications in database\n      // await supabase\n      //   .from('notifications')\n      //   .update({ read: true })\n      //   .eq('user_id', user.user.id)\n      //   .eq('read', false);\n\n      setNotifications(notifications.map(n => ({ ...n, read: true })));\n    } catch (error) {\n      console.error('Error marking all as read:', error);\n    }\n  };\n\n  const deleteNotification = async (id: string) => {\n    try {\n      // TODO: Delete notification from database\n      // await supabase\n      //   .from('notifications')\n      //   .delete()\n      //   .eq('id', id);\n\n      setNotifications(notifications.filter(n => n.id !== id));\n    } catch (error) {\n      console.error('Error deleting notification:', error);\n    }\n  };\n\n  const getIcon = (type: string) => {\n    switch (type) {\n      case 'success': return 'ri-checkbox-circle-line';\n      case 'warning': return 'ri-alert-line';\n      case 'error': return 'ri-error-warning-line';\n      default: return 'ri-information-line';\n    }\n  };\n\n  const getColor = (type: string) => {\n    switch (type) {\n      case 'success': return 'text-green-600 bg-green-100';\n      case 'warning': return 'text-amber-600 bg-amber-100';\n      case 'error': return 'text-red-600 bg-red-100';\n      default: return 'text-blue-600 bg-blue-100';\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <>\n      {/* Backdrop */}\n      <div \n        className=\"fixed inset-0 bg-black/20 z-40\"\n        onClick={onClose}\n      />\n\n      {/* Panel */}\n      <div className=\"fixed top-16 right-4 w-96 max-h-[600px] bg-white rounded-xl shadow-2xl border border-gray-200 z-50 flex flex-col\">\n        {/* Header */}\n        <div className=\"p-4 border-b border-gray-200\">\n          <div className=\"flex items-center justify-between mb-3\">\n            <h3 className=\"text-lg font-semibold text-gray-900\">Notifications</h3>\n            <button\n              onClick={onClose}\n              className=\"w-8 h-8 flex items-center justify-center text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors\"\n            >\n              <i className=\"ri-close-line text-xl\"></i>\n            </button>\n          </div>\n          \n          {unreadCount > 0 && (\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm text-gray-600\">{unreadCount} unread</span>\n              <button\n                onClick={markAllAsRead}\n                className=\"text-sm text-teal-600 hover:text-teal-700 font-medium\"\n              >\n                Mark all as read\n              </button>\n            </div>\n          )}\n        </div>\n\n        {/* Notifications List */}\n        <div className=\"flex-1 overflow-y-auto\">\n          {loading ? (\n            <div className=\"p-8 text-center\">\n              <i className=\"ri-loader-4-line text-4xl text-teal-600 animate-spin\"></i>\n              <p className=\"mt-4 text-gray-600\">Loading notifications...</p>\n            </div>\n          ) : notifications.length === 0 ? (\n            <div className=\"p-8 text-center\">\n              <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3\">\n                <i className=\"ri-notification-off-line text-2xl text-gray-400\"></i>\n              </div>\n              <p className=\"text-gray-900 font-medium mb-1\">No notifications</p>\n              <p className=\"text-gray-500 text-sm\">You're all caught up!</p>\n            </div>\n          ) : (\n            <div className=\"divide-y divide-gray-100\">\n              {notifications.map((notification) => (\n                <div\n                  key={notification.id}\n                  className={`p-4 hover:bg-gray-50 transition-colors ${\n                    !notification.read ? 'bg-teal-50/30' : ''\n                  }`}\n                >\n                  <div className=\"flex items-start gap-3\">\n                    <div className={`w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 ${getColor(notification.type)}`}>\n                      <i className={`${getIcon(notification.type)} text-lg`}></i>\n                    </div>\n                    \n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-start justify-between gap-2 mb-1\">\n                        <h4 className=\"text-sm font-semibold text-gray-900\">\n                          {notification.title}\n                        </h4>\n                        {!notification.read && (\n                          <div className=\"w-2 h-2 bg-teal-600 rounded-full flex-shrink-0 mt-1\"></div>\n                        )}\n                      </div>\n                      <p className=\"text-sm text-gray-600 mb-2\">{notification.message}</p>\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"text-xs text-gray-500\">{notification.time}</span>\n                        <div className=\"flex items-center gap-2\">\n                          {!notification.read && (\n                            <button\n                              onClick={() => markAsRead(notification.id)}\n                              className=\"text-xs text-teal-600 hover:text-teal-700 font-medium\"\n                            >\n                              Mark as read\n                            </button>\n                          )}\n                          <button\n                            onClick={() => deleteNotification(notification.id)}\n                            className=\"text-xs text-red-600 hover:text-red-700 font-medium\"\n                          >\n                            Delete\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </>\n  );\n};"],"names":["NotificationPanel","isOpen","onClose","notifications","setNotifications","useState","loading","setLoading","useEffect","fetchNotifications","user","supabase","error","unreadCount","n","markAsRead","id","markAllAsRead","deleteNotification","getIcon","type","getColor","jsxs","Fragment","jsx","notification"],"mappings":"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"}